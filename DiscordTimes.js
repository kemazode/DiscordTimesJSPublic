const _0x3e1e04=_0x20e1;(function(_0x1da7a7,_0x59e210){const _0x18fa3c=_0x20e1,_0x428468=_0x1da7a7();while(!![]){try{const _0xfcbdc9=-parseInt(_0x18fa3c(0x1c5))/0x1*(-parseInt(_0x18fa3c(0x1a7))/0x2)+parseInt(_0x18fa3c(0x184))/0x3+parseInt(_0x18fa3c(0x1ae))/0x4*(-parseInt(_0x18fa3c(0x15a))/0x5)+parseInt(_0x18fa3c(0x1a9))/0x6*(-parseInt(_0x18fa3c(0x18a))/0x7)+parseInt(_0x18fa3c(0x180))/0x8*(-parseInt(_0x18fa3c(0x1dc))/0x9)+-parseInt(_0x18fa3c(0x1fe))/0xa*(-parseInt(_0x18fa3c(0x1fa))/0xb)+parseInt(_0x18fa3c(0x1ad))/0xc;if(_0xfcbdc9===_0x59e210)break;else _0x428468['push'](_0x428468['shift']());}catch(_0x5c841c){_0x428468['push'](_0x428468['shift']());}}}(_0xf93d,0x9fe99));const ARMY_SIZE=0xc;let DT_BasePath='';const DT_Bonuses={'Attack':[],'Defence':[],'Turn':[],'Start':[],'Ability':[],'Map':[]},DT_BonusCallbacks={},DT_BonusEmojis={},DT_RestorableCharacteristics=[_0x3e1e04(0x1d4),_0x3e1e04(0x1aa),_0x3e1e04(0x16c),_0x3e1e04(0x1ab),_0x3e1e04(0x1c3),_0x3e1e04(0x1b2),'Cursed',_0x3e1e04(0x1d3)];let DT_ArmiesInitialState=[],DT_Armies=[],DT_RelicsInUse=[];const DT_EnemyRear=[0x17,0x16,0x15,0x14,0x13,0x12],DT_EnemyForward=[0x11,0x10,0xf,0xe,0xd,0xc],DT_PlayerForward=[0x0,0x1,0x2,0x3,0x4,0x5],DT_PlayerRear=[0x6,0x7,0x8,0x9,0xa,0xb],DT_LineLength=0x6;let DT_Parent=null,DT_Resources={'icons':{},'sfx':{},'projectile':null,'cursed':null},DT_Grid=null,DT_CSSCards=[],DT_ImgWidth=_0x3e1e04(0x209),DT_ImgHeight=_0x3e1e04(0x209),DT_ActiveUnit=null,DT_PlayerWon=![],DT_EnemyWon=![],DT_LockCallback=![],DT_BattleIsOverCalled=![],DT_ActiveStates=[],TurnCounter=0x0;function CreateBonus(_0x118843,_0x3e7572,_0x5571ab,_0x24ed11){const _0x18eced=_0x3e1e04;DT_BonusCallbacks[_0x118843]=_0x24ed11,DT_BonusEmojis[_0x118843]=_0x3e7572;for(const _0x30e2cb of _0x5571ab){DT_Bonuses[_0x30e2cb][_0x18eced(0x1e0)](_0x118843);}}function GetProperty(_0x2bd953,_0x4393be){const _0x361f03=_0x3e1e04;return pos=Math[_0x361f03(0x1f7)](_0x2bd953),_0x4393be in DT_Armies[pos]?DT_Armies[pos][_0x4393be]:null;}function SetState(_0x25839b,_0xbb25bd,_0xd2fa44,_0x300140,_0x5f32da){const _0x4d00f8=_0x3e1e04;if(_0x25839b<0x0)return;t=DT_Armies[_0x25839b];if(!(_0xbb25bd in DT_ActiveStates))DT_ActiveStates[_0xbb25bd]={'emoji':_0xd2fa44,'frequency':_0x300140,'f':_0x5f32da,'sufferers':[t]};else!DT_ActiveStates[_0xbb25bd]['sufferers'][_0x4d00f8(0x1e1)](t)&&DT_ActiveStates[_0xbb25bd][_0x4d00f8(0x1cc)][_0x4d00f8(0x1e0)](t);}function GoOff(_0x16c42b,_0x559945,_0x58b4f6,_0x11a261){const _0x4862ae=_0x3e1e04;if(_0x559945<0x0||_0x58b4f6<0x0)return;if(_0x16c42b==='Hit')DT_CSSCards[_0x58b4f6][_0x4862ae(0x20d)]['dispatchEvent'](new CustomEvent('Action',{'detail':{'type':_0x4862ae(0x21a),'attacker':DT_Armies[_0x559945],'target':DT_Armies[_0x58b4f6],'attacktype':_0x11a261}}));else _0x16c42b===_0x4862ae(0x19b)&&DT_CSSCards[_0x58b4f6][_0x4862ae(0x20d)][_0x4862ae(0x160)](new CustomEvent('Action',{'detail':{'type':_0x4862ae(0x19b),'target':DT_Armies[_0x58b4f6]}}));}function _0x20e1(_0x300a95,_0x15bc21){const _0xf93df8=_0xf93d();return _0x20e1=function(_0x20e18d,_0x3a849c){_0x20e18d=_0x20e18d-0x14f;let _0x4ec455=_0xf93df8[_0x20e18d];return _0x4ec455;},_0x20e1(_0x300a95,_0x15bc21);}function getRandomInt(_0x3140c3){const _0x3a9a69=_0x3e1e04;return Math[_0x3a9a69(0x205)](Math[_0x3a9a69(0x179)]()*_0x3140c3);}function DT_GetRandomArmy(){const _0x3b62e5=_0x3e1e04;let _0x3f17b2=[];for(let _0x1163c3=0x0;_0x1163c3<ARMY_SIZE;_0x1163c3++){ind=getRandomInt(0x64);for(const _0x2150c3 in DT_Units)if(DT_Units[_0x2150c3][_0x3b62e5(0x20e)]===ind)_0x3f17b2[_0x3b62e5(0x1e0)](_0x2150c3);}return _0x3f17b2;}function DT_GetUnitNumber(_0x413642){const _0x410d7e=_0x3e1e04;for(let _0x448e7f=0x0;_0x448e7f<DT_CSSCards[_0x410d7e(0x1c0)];_0x448e7f++){if(DT_Armies[_0x448e7f]===_0x413642)return _0x448e7f;}return null;}function DT_GetElementID(_0x3c75a7){const _0x48d820=_0x3e1e04;for(let _0x3169b4=0x0;_0x3169b4<DT_CSSCards[_0x48d820(0x1c0)];_0x3169b4++){if(DT_CSSCards[_0x3169b4][_0x48d820(0x20d)]===_0x3c75a7)return _0x3169b4;}return null;}function DT_ApplyBonus(_0x1f1ac3,_0xf9686e,_0x1753b2=null,_0x8ced85=null,_0x4305e0=null){const _0x5f33b3=_0x3e1e04;console[_0x5f33b3(0x1ea)](_0x5f33b3(0x1bf));let _0x4f4e2f=DT_Armies[Math[_0x5f33b3(0x1f7)](_0xf9686e)],_0x554f3d=DT_Armies[Math[_0x5f33b3(0x1f7)](_0x8ced85)];if(_0x1f1ac3==='Defence'){if(_0x554f3d===null)return _0x1753b2;bonus=_0x554f3d[_0x5f33b3(0x1b6)];}else{if(_0x4f4e2f===null)return _0x1753b2;bonus=_0x4f4e2f['Bonus'];}if(DT_Bonuses[_0x1f1ac3][_0x5f33b3(0x1e1)](bonus)&&DT_BonusCallbacks[bonus]!==null)return console[_0x5f33b3(0x1ea)](_0x5f33b3(0x1cb)+_0x1f1ac3+_0x5f33b3(0x1bd)+_0xf9686e,_0x5f33b3(0x157)+_0x8ced85),DT_BonusCallbacks[bonus](_0x1f1ac3,_0xf9686e,_0x8ced85,_0x4305e0,_0x1753b2);return console['log']('Callback\x20hasn\x27t\x20been\x20found,\x20stage\x20'+_0x1f1ac3+_0x5f33b3(0x1bd)+_0xf9686e,_0x5f33b3(0x157)+_0x8ced85),_0x1753b2;}function DT_AttachHit(_0x5888ad,_0x3de819){const _0xdc4b1e=_0x3e1e04;console[_0xdc4b1e(0x1ea)](_0xdc4b1e(0x1b0));if(_0x3de819===null)return;DT_NormalizeHit(_0x5888ad,_0x3de819);for(const _0x50fb18 in _0x3de819){if(typeof _0x3de819[_0x50fb18]===_0xdc4b1e(0x201)&&_0x50fb18 in _0x5888ad)_0x5888ad[_0x50fb18]+=_0x3de819[_0x50fb18];else _0x5888ad[_0x50fb18]=_0x3de819[_0x50fb18];}DT_RefreshElement(_0x5888ad[_0xdc4b1e(0x1db)]);}function DT_NormalizeHit(_0x3e1dc0,_0x2e4c9e){const _0x12a0eb=_0x3e1e04;console[_0x12a0eb(0x1ea)](_0x12a0eb(0x191));if(_0x2e4c9e===null)return;for(const _0x2a2458 in _0x2e4c9e){if(typeof _0x2e4c9e[_0x2a2458]==='number'&&_0x2e4c9e[_0x2a2458]<0x0&&_0x3e1dc0[_0x2a2458]+_0x2e4c9e[_0x2a2458]<0x0)_0x2e4c9e[_0x2a2458]=-_0x3e1dc0[_0x2a2458];}_0x12a0eb(0x172)in _0x2e4c9e&&(_0x2e4c9e[_0x12a0eb(0x172)]+_0x3e1dc0[_0x12a0eb(0x172)]>_0x3e1dc0[_0x12a0eb(0x192)]['Hits']&&(_0x2e4c9e[_0x12a0eb(0x172)]=_0x3e1dc0['InitialState'][_0x12a0eb(0x172)]-_0x3e1dc0[_0x12a0eb(0x172)]),_0x2e4c9e[_0x12a0eb(0x172)]=Math['round'](_0x2e4c9e['Hits']));}function DT_ComputeUnitValue(_0x35f77e){const _0x219a86=_0x3e1e04;if(!DT_IsThereUnit(_0x35f77e))return 0x0;const _0xf9e560=_0x35f77e[_0x219a86(0x192)];let _0x75aa5d=_0xf9e560[_0x219a86(0x172)],_0x541c3d=_0xf9e560[_0x219a86(0x1d3)],_0x43dc6d=_0xf9e560[_0x219a86(0x1c3)],_0x2f7cb9=_0x219a86(0x16c)in _0xf9e560?_0xf9e560[_0x219a86(0x16c)]:0x0,_0x3f0556='DefenceShot'in _0xf9e560?_0xf9e560[_0x219a86(0x1ab)]:0x0,_0x33911f=_0x219a86(0x218)in _0xf9e560?_0xf9e560[_0x219a86(0x218)]:0x0,_0x337cfc='ProtectLife'in _0xf9e560?_0xf9e560['ProtectLife']:0x0,_0x21dbbc='ProtectElemental'in _0xf9e560?_0xf9e560[_0x219a86(0x182)]:0x0,_0x29bd50='AttackBlow'in _0xf9e560?_0xf9e560[_0x219a86(0x1aa)]:0x0,_0x3d5275=_0x219a86(0x1d4)in _0xf9e560?_0xf9e560['AttackShot']:0x0,_0x3b7145=_0x219a86(0x18e)in _0xf9e560?_0xf9e560[_0x219a86(0x18e)]:0x0;return _0x75aa5d*(0x1+(_0x2f7cb9+_0x3f0556)/0x64+(_0x337cfc+_0x33911f+_0x21dbbc)/0x12c)+(_0x29bd50+_0x3d5275+_0x3b7145)*(0x2+_0x43dc6d/0xa)*_0x541c3d;}function DT_ComputeUnitsPriority(_0x542db8,_0x31c00f){const _0x3f13db=_0x3e1e04;let _0x2eb643=DT_Armies[_0x542db8],_0x1d7030=DT_Armies[_0x31c00f],_0x1e60bd=DT_GetPossibleAttack(_0x542db8,_0x31c00f),_0x8ed071={'priority':0x0,'attacktype':_0x1e60bd};if(_0x1e60bd===null)return _0x8ed071;let _0x32ffbe=DT_IsPlayersUnit(_0x2eb643)?DT_PlayerForward[_0x3f13db(0x155)]():DT_EnemyForward[_0x3f13db(0x155)]();_0x32ffbe['splice'](DT_GetUnitNumberInLine(_0x542db8),0x1);if(_0x1e60bd!==null&&_0x1e60bd!==_0x3f13db(0x175)){_0x8ed071[_0x3f13db(0x1f1)]=0x64,_0x8ed071[_0x3f13db(0x1b1)]=_0x1e60bd;let _0x4661ef=DT_ComputeUnitValue(_0x1d7030);_0x8ed071['priority']+=_0x4661ef;let _0x2c609e=DT_CalculateHit(_0x2eb643,_0x1d7030,_0x1e60bd);_0x2c609e=DT_ApplyBonus(_0x3f13db(0x200),-_0x542db8,_0x2c609e,-_0x31c00f,_0x1e60bd),_0x2c609e=DT_ApplyBonus(_0x3f13db(0x18d),-_0x542db8,_0x2c609e,-_0x31c00f,_0x1e60bd),DT_NormalizeHit(_0x1d7030,_0x2c609e),_0x1d7030[_0x3f13db(0x172)]+_0x2c609e[_0x3f13db(0x172)]===0x0&&(_0x8ed071[_0x3f13db(0x1f1)]+=0x3e8),actual=_0x6fec7f=>_0x6fec7f in _0x2c609e?Math['abs'](_0x2c609e[_0x6fec7f]):0x0,_0x8ed071[_0x3f13db(0x1f1)]+=(actual(_0x3f13db(0x172))+actual(_0x3f13db(0x1ab))/0x2+actual('DefenceBlow')/0x2+actual('AttackBlow')/0x2+actual(_0x3f13db(0x1d4))/0x2)*(_0x4661ef/0xa)+actual(_0x3f13db(0x1d3))*_0x4661ef+0x64*actual(_0x3f13db(0x1c6));}else{if(_0x1e60bd===_0x3f13db(0x175)){if(_0x3f13db(0x1aa)in _0x2eb643&&DT_IsRearPosition(_0x542db8))_0x8ed071[_0x3f13db(0x1f1)]+=DT_IsForwardPosition(_0x31c00f)?0xc8:-0xc8;else(_0x3f13db(0x1d4)in _0x2eb643||_0x3f13db(0x18e)in _0x2eb643)&&DT_IsForwardPosition(_0x542db8)&&DT_AreThereOccupiedPosition(_0x32ffbe)&&(_0x8ed071[_0x3f13db(0x1f1)]+=DT_IsRearPosition(_0x31c00f)?0x320:-0x320);}}return _0x8ed071;}function DT_GetUnitNumberInLine(_0x210e46){return _0x210e46<ARMY_SIZE?_0x210e46%DT_LineLength:DT_LineLength-0x1-_0x210e46%DT_LineLength;}function DT_PlaySFX(_0xb9a6a3){const _0x43e64c=_0x3e1e04;DT_Resources[_0x43e64c(0x17d)][_0xb9a6a3][_0x43e64c(0x1e2)](),DT_Resources[_0x43e64c(0x17d)][_0xb9a6a3][_0x43e64c(0x207)]=0x0,DT_Resources[_0x43e64c(0x17d)][_0xb9a6a3][_0x43e64c(0x211)]();}function DT_AnimationDeath(_0x353944){const _0x2fc397=_0x3e1e04;DT_CSSCards[_0x353944][_0x2fc397(0x20d)][_0x2fc397(0x210)][_0x2fc397(0x152)](_0x2fc397(0x1d2)),setTimeout(function(){const _0x44fd29=_0x2fc397;DT_CSSCards[_0x353944][_0x44fd29(0x20d)][_0x44fd29(0x210)][_0x44fd29(0x1cd)](_0x44fd29(0x1d2));},0x1f4);}function DT_AnimationHit(_0x5f34fe,_0x4633c1,_0x56ce5b){const _0x33bcec=_0x3e1e04;let _0x185cd4=1.5,_0xe87a69=new Image();const _0x38439b=DT_CSSCards[_0x4633c1][_0x33bcec(0x1eb)]['getBoundingClientRect'](),_0x29b047=DT_CSSCards[_0x5f34fe][_0x33bcec(0x1eb)][_0x33bcec(0x20a)](),_0x3abed8=0x40,_0x50af86={'left':(_0x29b047['left']+_0x29b047[_0x33bcec(0x21d)]-_0x3abed8)/0x2,'top':(_0x29b047[_0x33bcec(0x1bc)]+_0x29b047[_0x33bcec(0x208)]-_0x3abed8)/0x2},_0x334738={'left':(_0x38439b[_0x33bcec(0x1f2)]+_0x38439b[_0x33bcec(0x21d)]-_0x3abed8)/0x2,'top':(_0x38439b['top']+_0x38439b[_0x33bcec(0x208)]-_0x3abed8)/0x2};let _0x3e99ea=_0x334738[_0x33bcec(0x1f2)]-_0x50af86[_0x33bcec(0x1f2)],_0x95b06a=_0x334738['top']-_0x50af86[_0x33bcec(0x1bc)];const _0x3cf4e2=Math['sqrt'](_0x3e99ea*_0x3e99ea+_0x95b06a*_0x95b06a);let _0x5f0b77=_0x3cf4e2/_0x185cd4;return _0xe87a69['src']=DT_Resources[_0x33bcec(0x198)][_0x33bcec(0x1c2)],_0xe87a69[_0x33bcec(0x1fc)]['left']=_0x50af86[_0x33bcec(0x1f2)]+'px',_0xe87a69[_0x33bcec(0x1fc)][_0x33bcec(0x1bc)]=_0x50af86[_0x33bcec(0x1bc)]+'px',_0xe87a69[_0x33bcec(0x1fc)][_0x33bcec(0x213)](_0x33bcec(0x219),_0x3e99ea+'px'),_0xe87a69[_0x33bcec(0x1fc)][_0x33bcec(0x213)]('--y',_0x95b06a+'px'),_0xe87a69[_0x33bcec(0x1fc)][_0x33bcec(0x213)](_0x33bcec(0x16f),_0x5f0b77+'ms'),_0xe87a69[_0x33bcec(0x210)][_0x33bcec(0x152)](_0x33bcec(0x198)),DT_Parent[_0x33bcec(0x167)](_0xe87a69),setTimeout(()=>{_0xe87a69['remove']();},_0x5f0b77),_0x5f0b77;}function getCellsBetweenPoints(_0x311200,_0x2809c1){const _0x48ad55=_0x3e1e04;var _0x30a49e=[],_0x1cea06=_0x311200['x'],_0x4a569b=_0x311200['y'],_0x5ea0d3=_0x2809c1['x'],_0x4ccd2e=_0x2809c1['y'],_0x2ad584=Math[_0x48ad55(0x1f7)](_0x5ea0d3-_0x1cea06),_0x1d9f44=Math[_0x48ad55(0x1f7)](_0x4ccd2e-_0x4a569b),_0xc2217b=_0x1cea06<_0x5ea0d3?0x1:-0x1,_0x27d192=_0x4a569b<_0x4ccd2e?0x1:-0x1,_0x415fad=_0x2ad584-_0x1d9f44;_0x30a49e[_0x48ad55(0x1e0)]({'y':_0x4a569b,'x':_0x1cea06});while(!(_0x1cea06===_0x5ea0d3&&_0x4a569b===_0x4ccd2e)){var _0x44a613=_0x415fad<<0x1;_0x44a613>-_0x1d9f44&&(_0x415fad-=_0x1d9f44,_0x1cea06+=_0xc2217b),_0x44a613<_0x2ad584&&(_0x415fad+=_0x2ad584,_0x4a569b+=_0x27d192),_0x30a49e[_0x48ad55(0x1e0)]({'y':_0x4a569b,'x':_0x1cea06});}return _0x30a49e;}function DT_IsBattleOver(){const _0x35436d=_0x3e1e04;return console[_0x35436d(0x1ea)](_0x35436d(0x217)),DT_EnemyWon=!DT_AreThereOccupiedPosition(DT_PlayerForward)&&!DT_AreThereOccupiedPosition(DT_PlayerRear),DT_PlayerWon=!DT_AreThereOccupiedPosition(DT_EnemyForward)&&!DT_AreThereOccupiedPosition(DT_EnemyRear),DT_EnemyWon||DT_PlayerWon;}function DT_AIMove(){const _0x4708bf=_0x3e1e04;console['log'](_0x4708bf(0x21c)),!DT_IsPlayersUnit(DT_ActiveUnit)&&(DT_AIPerformAction(),DT_ActiveUnit['Manevres']-=0x1,DT_RefreshElement(DT_ActiveUnit[_0x4708bf(0x1db)]));}function DT_AIPerformAction(){const _0xa921ab=_0x3e1e04;console[_0xa921ab(0x1ea)](_0xa921ab(0x1ba));let _0x3e3bfa=null;for(let _0x565c70=0x0;_0x565c70<DT_CSSCards[_0xa921ab(0x1c0)];_0x565c70++){pri=DT_ComputeUnitsPriority(DT_ActiveUnit[_0xa921ab(0x1db)],_0x565c70),console[_0xa921ab(0x1ea)]('Next\x20pr:\x20'+pri[_0xa921ab(0x1f1)]+_0xa921ab(0x1e9)+DT_ComputeUnitValue(DT_Armies[_0x565c70])),pri['attacktype']!==null&&(_0x3e3bfa===null||pri['priority']>_0x3e3bfa['pri'])&&(_0x3e3bfa={'pri':pri['priority'],'tPos':_0x565c70,'atype':pri['attacktype']});}_0x3e3bfa!==null?DT_CSSCards[_0x3e3bfa[_0xa921ab(0x20f)]][_0xa921ab(0x20d)][_0xa921ab(0x160)](new CustomEvent(_0xa921ab(0x186),{'detail':{'type':_0xa921ab(0x21a),'attacker':DT_ActiveUnit,'target':DT_Armies[_0x3e3bfa[_0xa921ab(0x20f)]],'attacktype':_0x3e3bfa['atype']}})):DT_CSSCards[DT_ActiveUnit[_0xa921ab(0x1db)]]['card']['dispatchEvent'](new CustomEvent(_0xa921ab(0x186),{'detail':{'type':_0xa921ab(0x19b),'target':DT_ActiveUnit}}));}function findNextLowerInitiative(_0x4c75c0){const _0x1a68ff=_0x3e1e04;let _0xc59502=null;for(const _0x45e18a of DT_Armies){DT_IsUnitEngaged(_0x45e18a)&&_0x45e18a[_0x1a68ff(0x1c3)]<=_0x4c75c0&&(_0xc59502===null||_0x45e18a[_0x1a68ff(0x1c3)]>=_0xc59502[_0x1a68ff(0x1c3)])&&(_0xc59502=_0x45e18a);}return _0xc59502;}function DT_ArePositionAllies(_0x313d38,_0x5aabce){return _0x313d38<ARMY_SIZE&&_0x5aabce<ARMY_SIZE||_0x313d38>=ARMY_SIZE&&_0x5aabce>=ARMY_SIZE;}function DT_IsForwardPosition(_0x1e0b42){const _0x4d2b50=_0x3e1e04;return DT_EnemyForward[_0x4d2b50(0x1e1)](_0x1e0b42)||DT_PlayerForward[_0x4d2b50(0x1e1)](_0x1e0b42);}function DT_IsRearPosition(_0x14d794){const _0x50d7af=_0x3e1e04;return DT_EnemyRear[_0x50d7af(0x1e1)](_0x14d794)||DT_PlayerRear['includes'](_0x14d794);}function DT_AreThereOccupiedPosition(_0x243780){for(const _0x5859d0 of _0x243780){if(_0x5859d0!==null&&DT_IsThereUnit(DT_Armies[_0x5859d0]))return!![];}return![];}function DT_DoesMagicAffect(_0x4a960c,_0x17b685){const _0x4d7ea2=_0x3e1e04;return DT_ArePositionAllies(_0x4a960c['Position'],_0x17b685[_0x4d7ea2(0x1db)])?(magictype=_0x4a960c['Magic']['slice'](0x0,-0x5),magictype==='Death'&&_0x17b685[_0x4d7ea2(0x19e)]===_0x4d7ea2(0x1b8)||magictype!==_0x4d7ea2(0x1d9)&&_0x17b685['Nature']!==_0x4d7ea2(0x1b8)):!![];}function DT_IsThereUnit(_0x40c1da){return _0x40c1da!==null&&_0x40c1da['Hits']>0x0;}function DT_IsPlayersUnit(_0x5f52a0){const _0x165846=_0x3e1e04;return _0x5f52a0[_0x165846(0x1db)]<ARMY_SIZE;}function DT_IsUnitEngaged(_0x1c9f36){const _0x5e50d4=_0x3e1e04;return _0x1c9f36!==null&&_0x1c9f36['Manevres']>0x0&&_0x1c9f36[_0x5e50d4(0x172)]>0x0;}function DT_GetPossibleAttack(_0x10f1ab,_0x16d4c9){const _0x575ad1=_0x3e1e04;a=DT_Armies[_0x10f1ab],t=DT_Armies[_0x16d4c9];let _0x4bd82d=null;if(DT_IsThereUnit(a)&&DT_IsThereUnit(t)&&typeof DT_CSSCards[_0x10f1ab]===_0x575ad1(0x1be)){hitPath=DT_GetPossiblePath(_0x10f1ab,_0x16d4c9);if(hitPath[_0x575ad1(0x1c0)]===0x0)return null;let _0x4d3612=DT_IsPlayersUnit(a)?DT_EnemyForward[_0x575ad1(0x155)]():DT_PlayerForward[_0x575ad1(0x155)](),_0x3f6ebe=0x0;for(const _0x75db4 of hitPath){if(DT_IsThereUnit(DT_Armies[_0x75db4])&&!DT_ArePositionAllies(_0x10f1ab,_0x75db4))_0x3f6ebe++;}let _0x131761=DT_GetUnitNumberInLine(_0x10f1ab),_0xd9c6e5=_0x131761-0x1<0x0?null:_0x4d3612[_0x131761-0x1],_0x13f485=_0x4d3612[_0x131761],_0x17b642=_0x131761+0x1>=_0x4d3612['length']?null:_0x4d3612[_0x131761+0x1],_0x672ab6=DT_IsForwardPosition(_0x10f1ab)&&DT_AreThereOccupiedPosition([_0xd9c6e5,_0x13f485,_0x17b642]),_0x5a3049=Math[_0x575ad1(0x1f7)](_0x131761-DT_GetUnitNumberInLine(_0x16d4c9))<0x2&&DT_IsForwardPosition(_0x16d4c9)&&_0x672ab6;if(!DT_ArePositionAllies(_0x10f1ab,_0x16d4c9)){if(_0x575ad1(0x1aa)in a&&DT_IsForwardPosition(_0x10f1ab)){if(_0x5a3049===!![])_0x4bd82d=_0x575ad1(0x185);else!_0x672ab6&&DT_IsForwardPosition(_0x16d4c9)&&_0x3f6ebe<0x2&&(_0x4bd82d=_0x575ad1(0x185));}else{if('AttackShot'in a){if(DT_IsRearPosition(_0x10f1ab))_0x4bd82d=a[_0x575ad1(0x20e)]===0x18||a[_0x575ad1(0x20e)]===0x19?_0x575ad1(0x1a8):'Shot';else{if(_0x5a3049===!![])_0x4bd82d=a['GlobalIndex']===0x18||a[_0x575ad1(0x20e)]===0x19?_0x575ad1(0x1a8):_0x575ad1(0x20c);else!_0x672ab6&&_0x3f6ebe<0x2&&(_0x4bd82d=a['GlobalIndex']===0x18||a[_0x575ad1(0x20e)]===0x19?_0x575ad1(0x1a8):_0x575ad1(0x20c));}}else{if(!_0x672ab6&&'MagicPower'in a&&(a[_0x575ad1(0x1b9)]===_0x575ad1(0x17c)||a[_0x575ad1(0x1b9)]==='ToAll')&&DT_DoesMagicAffect(a,t)){if(t[_0x575ad1(0x1c6)]===!![])_0x4bd82d=_0x575ad1(0x1c1);else a[_0x575ad1(0x19e)]===_0x575ad1(0x1b8)?_0x4bd82d='Curse\x20of\x20Death':_0x4bd82d='Curse';}}}}else{if('MagicPower'in a&&(a['MagicDirection']===_0x575ad1(0x159)||a[_0x575ad1(0x1b9)]===_0x575ad1(0x1a2))&&DT_DoesMagicAffect(a,t)){if(t[_0x575ad1(0x172)]<t[_0x575ad1(0x192)][_0x575ad1(0x172)])_0x4bd82d='Heal';else t['Blessed']===![]&&(_0x4bd82d=_0x575ad1(0x17f));}}}else DT_IsThereUnit(a)&&DT_ArePositionAllies(_0x10f1ab,_0x16d4c9)&&typeof DT_CSSCards[_0x10f1ab]===_0x575ad1(0x1be)&&(_0x4bd82d=_0x575ad1(0x175));return _0x4bd82d;}function DT_GetPossiblePath(_0x5505b3,_0x97bd78){const _0x448a4b=_0x3e1e04;table=[DT_EnemyRear,DT_EnemyForward,DT_PlayerForward,DT_PlayerRear];if(ARMY_SIZE!==0xc)return console['log'](_0x448a4b(0x15b)),[];const _0x4c6a0d={'aPos':{'x':null,'y':null},'tPos':{'x':null,'y':null}};for(let _0x5bac5f=0x0;_0x5bac5f<table['length'];_0x5bac5f++){for(let _0x4620ae=0x0;_0x4620ae<table[_0x5bac5f][_0x448a4b(0x1c0)];_0x4620ae++){table[_0x5bac5f][_0x4620ae]===_0x5505b3&&(_0x4c6a0d[_0x448a4b(0x18c)]['x']=_0x4620ae,_0x4c6a0d[_0x448a4b(0x18c)]['y']=_0x5bac5f),table[_0x5bac5f][_0x4620ae]===_0x97bd78&&(_0x4c6a0d[_0x448a4b(0x20f)]['x']=_0x4620ae,_0x4c6a0d['tPos']['y']=_0x5bac5f);}}let _0x50012a=[],_0x433c27=getCellsBetweenPoints(_0x4c6a0d[_0x448a4b(0x18c)],_0x4c6a0d[_0x448a4b(0x20f)]);for(const _0x5868e6 of _0x433c27){_0x50012a[_0x448a4b(0x1e0)](table[_0x5868e6['y']][_0x5868e6['x']]);}return _0x50012a;}function DT_CallbackFlipCard(_0x3c05e8){const _0x42da9f=_0x3e1e04;_0x3c05e8[_0x42da9f(0x177)]();if(!this['classList'][_0x42da9f(0x1df)](_0x42da9f(0x162)))this['classList']['toggle'](_0x42da9f(0x1c4));}function DT_CallbackAction(_0x4275cc){const _0x4b1d3d=_0x3e1e04;console['log'](_0x4b1d3d(0x188));let _0x318199=_0x4b1d3d(0x1fb)in _0x4275cc[_0x4b1d3d(0x158)]?_0x4275cc[_0x4b1d3d(0x158)]['attacker']:null,_0x429738='target'in _0x4275cc[_0x4b1d3d(0x158)]?_0x4275cc['detail'][_0x4b1d3d(0x1f3)]:null,_0x3cb7cc=_0x429738===null?DT_GetElementID(this):_0x429738[_0x4b1d3d(0x1db)],_0x19bf7b=_0x4275cc[_0x4b1d3d(0x158)][_0x4b1d3d(0x1b1)],_0x48fdfe=0x0,_0x5a2371=![],_0x118861=function(){};if(DT_IsBattleOver()){DT_BattleIsOver();return;}if(_0x4275cc[_0x4b1d3d(0x158)][_0x4b1d3d(0x1f9)]===_0x4b1d3d(0x1ce)){DT_GiveMoveTo(_0x429738),DT_LockCallback=![];if(!DT_IsPlayersUnit(DT_ActiveUnit))DT_AIMove();return;}if(_0x4275cc['detail'][_0x4b1d3d(0x1f9)]===_0x4b1d3d(0x21a)&&DT_IsThereUnit(_0x318199))console[_0x4b1d3d(0x1ea)](_0x4b1d3d(0x18f)+_0x318199['Position']+_0x4b1d3d(0x157)+_0x3cb7cc+'\x20att:\x20'+_0x19bf7b+')'),_0x118861=function(){const _0xe5cb52=_0x4b1d3d;_0x19bf7b===_0xe5cb52(0x175)?(DT_SwapUnits([_0x318199['Position']],[_0x3cb7cc],DT_Armies),DT_PlaySFX(_0x19bf7b)):(hit=DT_CalculateHit(_0x318199,_0x429738,_0x19bf7b),hit=DT_ApplyBonus(_0xe5cb52(0x200),_0x318199[_0xe5cb52(0x1db)],hit,_0x3cb7cc,_0x19bf7b),hit=DT_ApplyBonus(_0xe5cb52(0x18d),_0x318199[_0xe5cb52(0x1db)],hit,_0x3cb7cc,_0x19bf7b),DT_AttachHit(_0x429738,hit),DT_PlaySFX(_0x19bf7b));if(!DT_AreThereOccupiedPosition(DT_PlayerForward))DT_SwapUnits(DT_PlayerForward,DT_PlayerRear);else!DT_AreThereOccupiedPosition(DT_EnemyForward)&&DT_SwapUnits(DT_EnemyForward,DT_EnemyRear);},_0x48fdfe=DT_AnimationHit(_0x318199['Position'],_0x3cb7cc,_0x19bf7b);else _0x4275cc[_0x4b1d3d(0x158)][_0x4b1d3d(0x1f9)]===_0x4b1d3d(0x1d7)?(console['log'](_0x4b1d3d(0x1cf)),_0x118861=function(){const _0xa113e2=_0x4b1d3d;_0x5a2371=!![],TurnCounter++,DT_CheckStates(_0xa113e2(0x1c9));for(const _0x4bd638 of DT_Armies){if(DT_IsThereUnit(_0x4bd638)){for(const _0x328586 of DT_RestorableCharacteristics){if(_0x328586 in _0x4bd638[_0xa113e2(0x192)])_0x4bd638[_0x328586]=_0x4bd638[_0xa113e2(0x192)][_0x328586];else delete _0x4bd638[_0x328586];}TurnCounter===0x1&&(hit=DT_ApplyBonus('Start',_0x4bd638[_0xa113e2(0x1db)]),DT_AttachHit(_0x4bd638,hit)),TurnCounter>0x3&&_0xa113e2(0x18e)in _0x4bd638&&_0x4bd638[_0xa113e2(0x18e)]>0xf&&(_0x4bd638[_0xa113e2(0x18e)]=_0x4bd638['MagicPower']-0x2<0xf?0xf:_0x4bd638['MagicPower']-0x2),DT_RefreshElement(_0x4bd638[_0xa113e2(0x1db)]);}}}):console[_0x4b1d3d(0x1ea)](_0x4b1d3d(0x1e6)+_0x4275cc[_0x4b1d3d(0x158)]['type']);setTimeout(function(){const _0x24da6d=_0x4b1d3d;_0x118861(),DT_CheckStates(_0x24da6d(0x176));let _0x13fc31=DT_ActiveUnit;(!DT_IsUnitEngaged(_0x13fc31)||_0x5a2371)&&(_0x13fc31=findNextLowerInitiative(Infinity)),_0x13fc31!==null?DT_CSSCards[_0x13fc31[_0x24da6d(0x1db)]][_0x24da6d(0x20d)]['dispatchEvent'](new CustomEvent(_0x24da6d(0x186),{'detail':{'type':_0x24da6d(0x1ce),'target':_0x13fc31}})):DT_CSSCards[0x0][_0x24da6d(0x20d)][_0x24da6d(0x160)](new CustomEvent(_0x24da6d(0x186),{'detail':{'type':_0x24da6d(0x1d7),'target':0x0}}));},_0x48fdfe);}function DT_Callback(){const _0x353e72=_0x3e1e04;console['log'](_0x353e72(0x1a0));if(DT_LockCallback===!![]||!DT_IsPlayersUnit(DT_ActiveUnit))return;let _0xd262b5=DT_GetElementID(this),_0x5981a2=DT_Armies[_0xd262b5];attacktype=DT_GetPossibleAttack(DT_ActiveUnit[_0x353e72(0x1db)],_0xd262b5);if(attacktype!==null&&DT_ActiveUnit['Manevres']>0x0)DT_LockCallback=!![],DT_ActiveUnit[_0x353e72(0x1d3)]-=0x1,DT_RefreshElement(DT_ActiveUnit[_0x353e72(0x1db)]),DT_CSSCards[_0xd262b5][_0x353e72(0x20d)][_0x353e72(0x160)](new CustomEvent(_0x353e72(0x186),{'detail':{'type':_0x353e72(0x21a),'attacker':DT_ActiveUnit,'target':_0x5981a2,'attacktype':attacktype}}));else DT_ActiveUnit===_0x5981a2&&(DT_LockCallback=!![],DT_ActiveUnit['Manevres']-=0x1,DT_RefreshElement(DT_ActiveUnit[_0x353e72(0x1db)]),DT_CSSCards[DT_ActiveUnit[_0x353e72(0x1db)]][_0x353e72(0x20d)]['dispatchEvent'](new CustomEvent(_0x353e72(0x186),{'detail':{'type':_0x353e72(0x19b),'target':DT_ActiveUnit}})));}function DT_CallbackSpace(_0x541156){const _0x43b5e5=_0x3e1e04;console[_0x43b5e5(0x1ea)]('In\x20DT_CallbackSpace');if(DT_LockCallback===!![]||!DT_IsPlayersUnit(DT_ActiveUnit))return;_0x541156[_0x43b5e5(0x197)]==='\x20'&&(DT_LockCallback=!![],DT_ActiveUnit[_0x43b5e5(0x1d3)]-=0x1,DT_RefreshElement(DT_ActiveUnit['Position']),DT_CSSCards[DT_ActiveUnit['Position']][_0x43b5e5(0x20d)]['dispatchEvent'](new CustomEvent('Action',{'detail':{'type':'Pass','target':DT_ActiveUnit}})));}function DT_CalculateHit(_0x2caac6,_0x170687,_0x1e7ed2){const _0x1aebbf=_0x3e1e04;console['log'](_0x1aebbf(0x203)),gained={'Hits':0x0};let _0x929026;switch(_0x1e7ed2){case _0x1aebbf(0x185):def=_0x1aebbf(0x16c)in _0x170687?_0x170687[_0x1aebbf(0x16c)]:0x0,dmg=_0x2caac6[_0x1aebbf(0x1aa)]-def>0x0?_0x2caac6['AttackBlow']-def:0x1,gained[_0x1aebbf(0x172)]-=dmg;break;case'Strike':case _0x1aebbf(0x20c):def='DefenceShot'in _0x170687?_0x170687[_0x1aebbf(0x1ab)]:0x0,dmg=_0x2caac6[_0x1aebbf(0x1d4)]-def>0x0?_0x2caac6[_0x1aebbf(0x1d4)]-def:0x1,gained[_0x1aebbf(0x172)]-=dmg;break;case'Heal':gained[_0x1aebbf(0x172)]+=_0x2caac6[_0x1aebbf(0x18e)];break;case _0x1aebbf(0x189):case'Curse':gained['Cursed']=!![],_0x929026=_0x2caac6[_0x1aebbf(0x161)][_0x1aebbf(0x155)](0x0,-0x5),restype=_0x1aebbf(0x206)+_0x929026;let _0x5aef29=_0x2caac6[_0x1aebbf(0x18e)];restype in _0x170687&&(_0x5aef29=Math['round'](_0x2caac6[_0x1aebbf(0x18e)]*(0x1-_0x170687[restype]/0x64)));defdown=Math['round'](_0x5aef29*0.2);_0x1aebbf(0x16c)in _0x170687&&(gained[_0x1aebbf(0x16c)]=-defdown);_0x1aebbf(0x1ab)in _0x170687&&(gained['DefenceShot']=-defdown);attdown=Math[_0x1aebbf(0x1d6)](_0x5aef29*0.1);_0x1aebbf(0x1aa)in _0x170687&&(gained['AttackBlow']=-attdown);'AttackShot'in _0x170687&&(gained[_0x1aebbf(0x1d4)]=-attdown);_0x929026===_0x1aebbf(0x151)&&(gained[_0x1aebbf(0x1d3)]=_0x5aef29>=0x32?-0x2:_0x5aef29>=0x19?-0x1:0x0,gained['Initiative']=-Math[_0x1aebbf(0x1d6)](_0x5aef29/0xa));break;case _0x1aebbf(0x17f):gained[_0x1aebbf(0x1b2)]=!![],defup=Math[_0x1aebbf(0x1d6)](_0x2caac6['MagicPower']*0.34),gained[_0x1aebbf(0x16c)]=defup,gained[_0x1aebbf(0x1ab)]=defup,attup=Math[_0x1aebbf(0x1d6)](_0x2caac6['MagicPower']*0.2);_0x1aebbf(0x1aa)in _0x170687&&(gained['AttackBlow']=attup);_0x1aebbf(0x1d4)in _0x170687&&(gained[_0x1aebbf(0x1d4)]=attup);break;case _0x1aebbf(0x1c1):let _0x42af7b=0x1;_0x929026=_0x2caac6[_0x1aebbf(0x161)]['slice'](0x0,-0x5),restype=_0x1aebbf(0x206)+_0x929026;restype in _0x170687&&(_0x42af7b-=_0x170687[restype]/0x64);let _0x3dc394=0x1;_0x170687['Nature']===_0x1aebbf(0x1b8)&&_0x929026==='Life'&&(_0x3dc394=0x2);gained[_0x1aebbf(0x172)]=-(_0x2caac6[_0x1aebbf(0x18e)]*_0x42af7b*_0x3dc394);break;case'Banish':gained[_0x1aebbf(0x172)]=-_0x170687[_0x1aebbf(0x172)];break;default:break;}return gained;}function DT_CheckStates(_0x12a243){const _0x57397e=_0x3e1e04;for(const _0xab187f in DT_ActiveStates){if(DT_ActiveStates[_0xab187f][_0x57397e(0x1ff)]===_0x12a243)for(const _0x266dab of DT_ActiveStates[_0xab187f][_0x57397e(0x1cc)]){DT_ActiveStates[_0xab187f]['f'](_0x266dab),DT_RefreshElement(_0x266dab[_0x57397e(0x1db)]);}}}function DT_SwapUnits(_0x127ec5,_0x356fc8){const _0x1945d5=_0x3e1e04;console[_0x1945d5(0x1ea)](_0x1945d5(0x17b));_0x127ec5[_0x1945d5(0x1c0)]!==_0x356fc8[_0x1945d5(0x1c0)]&&console['log']('Not\x20equal\x20groups\x20of\x20units\x20are\x20being\x20swaped!');for(let _0x2e02dd=0x0;_0x2e02dd<_0x127ec5[_0x1945d5(0x1c0)];_0x2e02dd++){let _0x845aa7=_0x356fc8[_0x2e02dd],_0x3ab209=_0x127ec5[_0x2e02dd],_0x23b26c=DT_Armies[_0x845aa7];DT_Armies[_0x845aa7]=DT_Armies[_0x3ab209],DT_Armies[_0x3ab209]=_0x23b26c,DT_Armies[_0x845aa7]!==null&&(DT_Armies[_0x845aa7][_0x1945d5(0x1db)]=_0x845aa7),DT_Armies[_0x3ab209]!==null&&(DT_Armies[_0x3ab209][_0x1945d5(0x1db)]=_0x3ab209),DT_RefreshElement(_0x3ab209),DT_RefreshElement(_0x845aa7);}}function DT_GiveMoveTo(_0x2f6d65){const _0x1f4fbf=_0x3e1e04;DT_ActiveUnit=_0x2f6d65;const _0x525757={'Blow':_0x1f4fbf(0x1a1),'Shot':_0x1f4fbf(0x1a1),'Curse':_0x1f4fbf(0x1a1),'Curse\x20of\x20Death':_0x1f4fbf(0x1a1),'Draining\x20Life':_0x1f4fbf(0x1a1),'Strike':_0x1f4fbf(0x1a1),'Heal':_0x1f4fbf(0x183),'Bless':'target-bless','Move':'target-move'};for(let _0x4322cf=0x0;_0x4322cf<DT_CSSCards['length'];_0x4322cf++){attacktype=DT_GetPossibleAttack(DT_ActiveUnit[_0x1f4fbf(0x1db)],_0x4322cf);let _0x11f832=DT_CSSCards[_0x4322cf][_0x1f4fbf(0x20d)]['classList'];_0x11f832[_0x1f4fbf(0x1cd)](_0x1f4fbf(0x1a1),_0x1f4fbf(0x183),_0x1f4fbf(0x204),_0x1f4fbf(0x162)),attacktype!==null&&DT_IsPlayersUnit(DT_ActiveUnit)&&_0x11f832[_0x1f4fbf(0x152)](_0x525757[attacktype]);}DT_CSSCards[DT_ActiveUnit[_0x1f4fbf(0x1db)]][_0x1f4fbf(0x20d)]['classList'][_0x1f4fbf(0x1cd)](_0x1f4fbf(0x1c4)),DT_CSSCards[DT_ActiveUnit[_0x1f4fbf(0x1db)]][_0x1f4fbf(0x20d)][_0x1f4fbf(0x210)][_0x1f4fbf(0x152)](_0x1f4fbf(0x162));}function DT_BattleIsOver(){const _0x1b9e99=_0x3e1e04;if(DT_BattleIsOverCalled===!![])return;DT_BattleIsOverCalled=!![];if(DT_PlayerWon===!![])DT_PlaySFX(_0x1b9e99(0x19a));else DT_PlaySFX('Lose');for(const _0x2ae758 of DT_CSSCards){_0x2ae758[_0x1b9e99(0x20d)][_0x1b9e99(0x210)][_0x1b9e99(0x1cd)](_0x1b9e99(0x162));}DT_DeleteListeners();}function DT_AddUnitToArmy(_0x5279b6,_0x20ec53){}function DT_CreateArmy(_0x525dd6,_0x2c53a4){const _0x1fe514=_0x3e1e04;let _0xcaa69=_0x525dd6===_0x1fe514(0x173)?[...DT_PlayerForward,...DT_PlayerRear]:[...DT_EnemyForward,...DT_EnemyRear];for(const _0x12ae08 of _0xcaa69){naming=_0x2c53a4['shift']();if(!(naming in DT_Units)){DT_Armies[_0x12ae08]=null;continue;}DT_Armies[_0x12ae08]=Object[_0x1fe514(0x1b5)]({},DT_Units[naming]),DT_Armies[_0x12ae08][_0x1fe514(0x1b2)]=![],DT_Armies[_0x12ae08][_0x1fe514(0x1c6)]=![],DT_Armies[_0x12ae08][_0x1fe514(0x1db)]=_0x12ae08,!(_0x1fe514(0x19e)in DT_Armies[_0x12ae08])&&(DT_Armies[_0x12ae08][_0x1fe514(0x19e)]=_0x1fe514(0x1e3)),DT_ArmiesInitialState[_0x12ae08]=Object[_0x1fe514(0x1b5)]({},DT_Armies[_0x12ae08]),DT_Armies[_0x12ae08][_0x1fe514(0x192)]=DT_ArmiesInitialState[_0x12ae08];}}function DT_SetUpRelics(_0x50c1d6,_0x274866){const _0x191432=_0x3e1e04;if(_0x50c1d6===_0x191432(0x173))for(let _0x3e1c8d=0x0;_0x3e1c8d<ARMY_SIZE;_0x3e1c8d++){typeof _0x274866[_0x3e1c8d]==='string'?DT_RelicsInUse[_0x3e1c8d]=Object[_0x191432(0x1b5)]({},DT_Relics[_0x274866[_0x3e1c8d]]):DT_RelicsInUse[_0x3e1c8d]=0x0;}else{if(_0x50c1d6===_0x191432(0x19d))for(let _0x2299ba=ARMY_SIZE;_0x2299ba<ARMY_SIZE*0x2;_0x2299ba++){typeof _0x274866[_0x2299ba-ARMY_SIZE]===_0x191432(0x178)?DT_RelicsInUse[_0x2299ba]=Object['assign']({},DT_Relics[_0x274866[_0x2299ba-ARMY_SIZE]]):DT_RelicsInUse[_0x2299ba]=0x0;}}for(let _0x2fa6ff=0x0;_0x2fa6ff<DT_CSSCards['length'];++_0x2fa6ff){}}function DT_CreateElements(){const _0xb93b3a=_0x3e1e04;function _0x547a1f(_0x49d19e){const _0x22199d=_0x20e1;img=document[_0x22199d(0x1dd)](_0x22199d(0x1eb)),img[_0x22199d(0x210)]['add']('icon'),stats=document[_0x22199d(0x1dd)]('div'),stats[_0x22199d(0x210)][_0x22199d(0x152)](_0x22199d(0x1ee)),descr=document[_0x22199d(0x1dd)](_0x22199d(0x195)),descr[_0x22199d(0x210)]['add']('descr');let _0x6ff953=document[_0x22199d(0x1dd)](_0x22199d(0x195)),_0x2bf0c4=document[_0x22199d(0x1dd)](_0x22199d(0x195));_0x2bf0c4['classList'][_0x22199d(0x152)](_0x22199d(0x1e8));let _0x1397df=document[_0x22199d(0x1dd)](_0x22199d(0x195));return _0x1397df['classList'][_0x22199d(0x152)](_0x22199d(0x181)),_0x2bf0c4[_0x22199d(0x167)](img),_0x2bf0c4['appendChild'](stats),_0x1397df['appendChild'](descr),_0x6ff953[_0x22199d(0x167)](_0x2bf0c4),_0x6ff953[_0x22199d(0x167)](_0x1397df),_0x6ff953[_0x22199d(0x1e7)]('id',_0x22199d(0x1f6)+_0x49d19e),_0x6ff953[_0x22199d(0x210)][_0x22199d(0x152)](_0x22199d(0x20d)),{'card':_0x6ff953,'img':img,'stats':stats,'descr':descr};}grid=document[_0xb93b3a(0x1dd)](_0xb93b3a(0x195)),grid['classList'][_0xb93b3a(0x152)]('dtgrid'),orderedArmy=[...DT_EnemyRear,...DT_EnemyForward,...DT_PlayerForward,...DT_PlayerRear];for(let _0x3a1f10=0x0;_0x3a1f10<ARMY_SIZE*0x2;_0x3a1f10++){cw=_0x547a1f(orderedArmy[_0x3a1f10]),grid['appendChild'](cw[_0xb93b3a(0x20d)]),DT_CSSCards[orderedArmy[_0x3a1f10]]=cw,DT_RefreshElement(orderedArmy[_0x3a1f10]);}DT_Grid=grid,DT_Parent[_0xb93b3a(0x167)](grid);}function DT_AddListeners(){const _0x30a0e2=_0x3e1e04;DT_Parent['addEventListener']('keyup',DT_CallbackSpace),DT_CSSCards[_0x30a0e2(0x190)](_0x5ab6d7=>{const _0x254e56=_0x30a0e2;_0x5ab6d7[_0x254e56(0x20d)][_0x254e56(0x16a)](_0x254e56(0x17a),DT_Callback),_0x5ab6d7[_0x254e56(0x20d)][_0x254e56(0x16a)](_0x254e56(0x186),DT_CallbackAction),_0x5ab6d7[_0x254e56(0x20d)]['addEventListener']('contextmenu',DT_CallbackFlipCard);});}function _0xf93d(){const _0x3bb093=['orange','Elemental','add','%,\x20transparent\x200%),\x20url(','<span\x20style=\x22color:','slice','keyup','\x20t:\x20','detail','ToAlly','2944355oYhHbP','The\x20DT_IsReachableFor\x20hasn\x27t\x20been\x20adapted\x20for\x20this\x20army\x20size','Specify\x20a\x20parent\x20node\x20to\x20attach','innerHTML','),\x20','<span\x20style=\x22float:right;color:','dispatchEvent','Magic','activeunit','üõ°Ô∏è\x20','.png','DeathMagic','icons','appendChild','<span\x20style=\x22position:absolute;top:calc(100%\x20-\x202.4em);left:\x20calc(100%\x20-\x202.4em);\x22>','red','addEventListener','ü•≤\x20','DefenceBlow','<br>','Name','--timeout','Heal','sfx/shot.wav','Hits','player','sfx/dtbless.wav','Move','each\x20move','preventDefault','string','random','click','In\x20DT_SwapUnits','ToEnemy','sfx','üèπ\x20','Bless','56RXiOqW','card-back','ProtectElemental','target-bless','2046828gwzlEm','Blow','Action','contextmenu','In\x20DT_CallbackAction','Curse\x20of\x20Death','276451enAEEw','<span\x20style=\x22float:right;color:blue;\x22>','aPos','Defence','MagicPower','In\x20DT_CallbackAction:Hit\x20(a:\x20','forEach','In\x20DT_NormalizeHit','InitialState','Curse','height','div','sfx/dtmove.wav','key','projectile','no-repeat','Win','Pass','sfx/dtcurse.wav','enemy','Nature','dimgrey','In\x20DT_Callback','target-shot','ToAll','background-image','üôè\x20','üó°Ô∏è\x20','üíÄ\x20','2FwxzLo','Strike','138vbdziq','AttackBlow','DefenceShot','emptyslot','2730012cOPrEK','8ILOCnt','skull.gif','In\x20DT_AttachHit','attacktype','Blessed','descr','emoji','assign','Bonus','48px,\x20contain,\x20','Undead','MagicDirection','In\x20DT_AIGetActionEvent','<br>&nbsp;<span\x20style=\x22text-align:right;font-size:1.3em;color:','top','\x20a:\x20','object','In\x20DT_ApplyBonus','length','Draining\x20Life','src','Initiative','flipped','1225835CaukRB','Cursed','</span>','mediumseagreen','each\x20turn','steelblue','Callback\x20has\x20been\x20found,\x20stage\x20','sufferers','remove','Activate','In\x20DT_CallbackAction:New\x20Turn','width','crimson','deadunit','Manevres','AttackShot','<span\x20style=\x22position:absolute\x22>','round','New\x20Turn','cover','Death','LifeMagic','Position','866007OZPlKC','createElement','ProtectLife','contains','push','includes','pause','Loyal','&nbsp;','Resources\x20haven\x27t\x20been\x20uploaded,\x20make\x20sure\x20you\x20called\x20the\x20function\x20DT_UploadResources()','In\x20??\x20DT_CallbackAction:','setAttribute','card-front',';\x20Initial\x20pr\x20=\x20','log','img','cursed','blue','stats','sfx/losetheme.mp3','ü™Ñ\x20','priority','left','target','projectile.png','aliveunit','slot-','abs',';\x22>','type','1082257aOqUZz','attacker','style','sfx/heal.wav','130HlKdLd','frequency','Attack','number','background-size','In\x20DT_CalculateHit','target-move','floor','Protect','currentTime','bottom','108px','getBoundingClientRect','removeEventListener','Shot','card','GlobalIndex','tPos','classList','play','sfx/swordblow.wav','setProperty','Lose','icons/img_','Banish','In\x20DT_IsBattleOver','ProtectDeath','--x','Hit','black','In\x20DT_AIMove','right','sfx/curseofdeath.wav'];_0xf93d=function(){return _0x3bb093;};return _0xf93d();}function DT_DeleteListeners(){const _0x185ff8=_0x3e1e04;DT_Parent!==null&&DT_Parent[_0x185ff8(0x20b)](_0x185ff8(0x156),DT_CallbackSpace),DT_CSSCards[_0x185ff8(0x190)](_0x3f1aac=>{const _0x4015eb=_0x185ff8;_0x3f1aac[_0x4015eb(0x20d)]['removeEventListener'](_0x4015eb(0x17a),DT_Callback),_0x3f1aac[_0x4015eb(0x20d)][_0x4015eb(0x20b)](_0x4015eb(0x186),DT_CallbackAction),_0x3f1aac['card'][_0x4015eb(0x20b)](_0x4015eb(0x187),DT_CallbackFlipCard);});}function DT_RefreshElement(_0x5aa3e1){const _0x3e3b79=_0x3e1e04;cardwr=DT_CSSCards[_0x5aa3e1],u=DT_Armies[_0x5aa3e1];let _0x4528e8=null;if(typeof cardwr===_0x3e3b79(0x1be))_0x4528e8=cardwr[_0x3e3b79(0x20d)][_0x3e3b79(0x210)];else return;if(DT_IsThereUnit(u))_0x4528e8[_0x3e3b79(0x152)](_0x3e3b79(0x1f5)),_0x4528e8[_0x3e3b79(0x1cd)](_0x3e3b79(0x1ac));else{_0x4528e8[_0x3e3b79(0x1cd)](_0x3e3b79(0x1f5)),_0x4528e8[_0x3e3b79(0x152)](_0x3e3b79(0x1ac)),cardwr[_0x3e3b79(0x1eb)][_0x3e3b79(0x1fc)][_0x3e3b79(0x1d0)]=DT_ImgWidth,cardwr[_0x3e3b79(0x1eb)][_0x3e3b79(0x1fc)]['height']=DT_ImgHeight;return;}let _0xa2ea2b=u[_0x3e3b79(0x19e)]==='Rogue'?_0x3e3b79(0x1c8):u[_0x3e3b79(0x19e)]===_0x3e3b79(0x1b8)?_0x3e3b79(0x1d1):u[_0x3e3b79(0x19e)]==='People'?_0x3e3b79(0x19f):_0x3e3b79(0x1ca);cardwr['descr'][_0x3e3b79(0x15d)]=_0x3e3b79(0x1bb)+_0xa2ea2b+_0x3e3b79(0x1f8)+u[_0x3e3b79(0x16e)]+'</span><br>';'ProtectLife'in u&&(cardwr[_0x3e3b79(0x1b3)][_0x3e3b79(0x15d)]+=_0x3e3b79(0x16d),cardwr['descr'][_0x3e3b79(0x15d)]+=_0x3e3b79(0x1a4)+u[_0x3e3b79(0x1de)]+'%');_0x3e3b79(0x218)in u&&(cardwr[_0x3e3b79(0x1b3)][_0x3e3b79(0x15d)]+=_0x3e3b79(0x16d),cardwr[_0x3e3b79(0x1b3)][_0x3e3b79(0x15d)]+=_0x3e3b79(0x1a6)+u[_0x3e3b79(0x218)]+'%');_0x3e3b79(0x182)in u&&(cardwr['descr'][_0x3e3b79(0x15d)]+=_0x3e3b79(0x16d),cardwr[_0x3e3b79(0x1b3)][_0x3e3b79(0x15d)]+=_0x3e3b79(0x1f0)+u[_0x3e3b79(0x182)]+'%');cardwr[_0x3e3b79(0x1b3)][_0x3e3b79(0x15d)]+=_0x3e3b79(0x16d),cardwr[_0x3e3b79(0x1b3)][_0x3e3b79(0x15d)]+='<span\x20style=\x22position:absolute;top:calc(100%\x20-\x202.4em);\x22>üí®\x20'+u['Initiative']+_0x3e3b79(0x1c7);'Bonus'in u&&(emoji=u[_0x3e3b79(0x1b6)]in DT_BonusEmojis?DT_BonusEmojis[u[_0x3e3b79(0x1b6)]]:'‚ùì',cardwr['descr']['innerHTML']+=_0x3e3b79(0x168)+emoji+_0x3e3b79(0x1c7));let _0x338ad7=DT_Resources[_0x3e3b79(0x166)][u[_0x3e3b79(0x20e)]][_0x3e3b79(0x1c2)],_0x5f261f=Math[_0x3e3b79(0x1d6)]((u[_0x3e3b79(0x192)][_0x3e3b79(0x172)]-u[_0x3e3b79(0x172)])*0x64/u[_0x3e3b79(0x192)][_0x3e3b79(0x172)]);const _0x5385ec=_0x5f261f<0x1e?'green':_0x5f261f<0x32?'#FFD700':_0x5f261f<0x4b?_0x3e3b79(0x150):_0x3e3b79(0x169);let _0x53bf71=![],_0x1b058c='black',_0xbc34d8='0';if(_0x3e3b79(0x1aa)in u)_0x1b058c=u[_0x3e3b79(0x1aa)]>u[_0x3e3b79(0x192)][_0x3e3b79(0x1aa)]?_0x3e3b79(0x1ed):_0x3e3b79(0x21b),_0xbc34d8=u[_0x3e3b79(0x1aa)];else{if(_0x3e3b79(0x1d4)in u)_0x1b058c=u[_0x3e3b79(0x1d4)]>u[_0x3e3b79(0x192)][_0x3e3b79(0x1d4)]?_0x3e3b79(0x1ed):'black',_0xbc34d8=u[_0x3e3b79(0x1d4)];else'MagicPower'in u&&(_0x53bf71=!![]);}let _0x5445ba='black',_0x253af2='0';_0x3e3b79(0x16c)in u&&(initialDef='DefenceBlow'in u[_0x3e3b79(0x192)]?u[_0x3e3b79(0x192)][_0x3e3b79(0x16c)]:0x0,_0x5445ba=u[_0x3e3b79(0x16c)]>initialDef?_0x3e3b79(0x1ed):'black',_0x253af2=u[_0x3e3b79(0x16c)]);let _0x4d397a=_0x3e3b79(0x21b),_0x47057e='0';_0x3e3b79(0x1ab)in u&&(initialDef=_0x3e3b79(0x1ab)in u[_0x3e3b79(0x192)]?u['InitialState'][_0x3e3b79(0x1ab)]:0x0,_0x4d397a=u[_0x3e3b79(0x1ab)]>initialDef?'blue':_0x3e3b79(0x21b),_0x47057e=u[_0x3e3b79(0x1ab)]);if(_0x53bf71)cardwr[_0x3e3b79(0x1ee)][_0x3e3b79(0x15d)]=(u[_0x3e3b79(0x161)]===_0x3e3b79(0x165)?'üíÄ':u[_0x3e3b79(0x161)]===_0x3e3b79(0x1da)?'üôè':'ü™Ñ')+'\x20'+u[_0x3e3b79(0x18e)];else{if(_0x3e3b79(0x1aa)in u)cardwr[_0x3e3b79(0x1ee)]['innerHTML']=_0x3e3b79(0x1a5)+(_0x3e3b79(0x154)+_0x1b058c+_0x3e3b79(0x1f8)+_0xbc34d8+_0x3e3b79(0x1c7));else _0x3e3b79(0x1d4)in u?cardwr[_0x3e3b79(0x1ee)][_0x3e3b79(0x15d)]=_0x3e3b79(0x17e)+(_0x3e3b79(0x154)+_0x1b058c+_0x3e3b79(0x1f8)+_0xbc34d8+'</span>'):cardwr['stats'][_0x3e3b79(0x15d)]=_0x3e3b79(0x16b);}for(const _0x423151 in DT_ActiveStates){DT_ActiveStates[_0x423151]['sufferers']['includes'](u)&&(cardwr[_0x3e3b79(0x1ee)]['innerHTML']+=_0x3e3b79(0x1d5)+DT_ActiveStates[_0x423151][_0x3e3b79(0x1b4)]+'</span>');}cardwr[_0x3e3b79(0x1ee)]['innerHTML']+=_0x3e3b79(0x1e4),cardwr['stats'][_0x3e3b79(0x15d)]+=_0x3e3b79(0x15f)+_0x5385ec+_0x3e3b79(0x1f8)+u['Hits']+'/'+u[_0x3e3b79(0x192)][_0x3e3b79(0x172)]+_0x3e3b79(0x1c7),cardwr[_0x3e3b79(0x1ee)][_0x3e3b79(0x15d)]+=_0x3e3b79(0x16d),cardwr[_0x3e3b79(0x1ee)][_0x3e3b79(0x15d)]+=_0x3e3b79(0x163)+(_0x3e3b79(0x154)+_0x5445ba+';\x22>'+_0x253af2+_0x3e3b79(0x1c7))+'/'+(_0x3e3b79(0x154)+_0x4d397a+';\x22>'+_0x47057e+_0x3e3b79(0x1c7)),cardwr['stats']['innerHTML']+=_0x3e3b79(0x1e4),cardwr['stats']['innerHTML']+=_0x3e3b79(0x18b)+u[_0x3e3b79(0x1d3)]+_0x3e3b79(0x1c7),cardwr[_0x3e3b79(0x1eb)]['style']['width']=DT_ImgWidth,cardwr[_0x3e3b79(0x1eb)][_0x3e3b79(0x1fc)][_0x3e3b79(0x194)]=DT_ImgHeight,cardwr[_0x3e3b79(0x1eb)][_0x3e3b79(0x1fc)]['setProperty']('background-repeat',_0x3e3b79(0x199));let _0x1f790a='',_0x21f15a='';u['Cursed']===!![]&&(_0x1f790a='url('+DT_Resources[_0x3e3b79(0x1ec)][_0x3e3b79(0x1c2)]+_0x3e3b79(0x15e),_0x21f15a=_0x3e3b79(0x1b7)),cardwr[_0x3e3b79(0x1eb)][_0x3e3b79(0x1fc)][_0x3e3b79(0x213)](_0x3e3b79(0x202),_0x21f15a+_0x3e3b79(0x1d8)),cardwr[_0x3e3b79(0x1eb)][_0x3e3b79(0x1fc)][_0x3e3b79(0x213)](_0x3e3b79(0x1a3),_0x1f790a+('linear-gradient(to\x20top,\x20var(--bloodcoloralpha)\x20'+_0x5f261f+_0x3e3b79(0x153)+_0x338ad7+')'));}function DT_UploadResources(){DT_UploadImages(),DT_UploadSounds();}function DT_UploadImages(){const _0x18d72d=_0x3e1e04;for(const _0xb0ce0b in DT_Units){let _0x5861c8=new Image();_0x5861c8['src']=_0x18d72d(0x215)+(DT_Units[_0xb0ce0b][_0x18d72d(0x20e)]-0x1)+_0x18d72d(0x164),DT_Resources[_0x18d72d(0x166)][DT_Units[_0xb0ce0b][_0x18d72d(0x20e)]]=_0x5861c8;}let _0x58c5f1=new Image();_0x58c5f1[_0x18d72d(0x1c2)]=_0x18d72d(0x1f4),DT_Resources[_0x18d72d(0x198)]=_0x58c5f1;let _0x5b0d0a=new Image();_0x5b0d0a[_0x18d72d(0x1c2)]=_0x18d72d(0x1af),DT_Resources[_0x18d72d(0x1ec)]=_0x5b0d0a;}function DT_UploadSounds(){const _0x46632b=_0x3e1e04;function _0x95768b(_0x2cc46f,_0x44885c){const _0x495af5=_0x20e1;if(!(_0x44885c in DT_Resources[_0x495af5(0x17d)])){let _0x316019=new Audio(_0x2cc46f);DT_Resources['sfx'][_0x44885c]=_0x316019;}}_0x95768b(_0x46632b(0x19c),_0x46632b(0x193)),_0x95768b(_0x46632b(0x14f),_0x46632b(0x189)),_0x95768b('sfx/dtcurse.wav',_0x46632b(0x1c1)),_0x95768b(_0x46632b(0x171),_0x46632b(0x20c)),_0x95768b(_0x46632b(0x212),_0x46632b(0x185)),_0x95768b(_0x46632b(0x1fd),_0x46632b(0x170)),_0x95768b(_0x46632b(0x174),'Bless'),_0x95768b('sfx/strike.wav',_0x46632b(0x1a8)),_0x95768b(_0x46632b(0x196),_0x46632b(0x175)),_0x95768b('sfx/curseofdeath.wav',_0x46632b(0x216)),_0x95768b('sfx/wintheme.wav',_0x46632b(0x19a)),_0x95768b(_0x46632b(0x1ef),_0x46632b(0x214));}function DT_ClearArmies(){DT_Armies=[],DT_ArmiesInitialState=[],DT_RelicsInUse=[];}function DT_ClearElements(){const _0x1161ca=_0x3e1e04;DT_DeleteListeners();for(const _0x365a27 of DT_CSSCards){_0x365a27['card'][_0x1161ca(0x1cd)]();}DT_CSSCards=[];if(DT_Grid!==null)DT_Grid[_0x1161ca(0x1cd)]();DT_Grid=null;}function DT_StartTheBattle(){const _0x131a71=_0x3e1e04;if(DT_Parent===null){console[_0x131a71(0x1ea)](_0x131a71(0x15c));return;}else DT_Units===null&&console[_0x131a71(0x1ea)](_0x131a71(0x1e5));DT_BattleIsOverCalled=![],TurnCounter=0x0,DT_ClearElements(),DT_CreateElements(),DT_AddListeners(),DT_CSSCards[0x0][_0x131a71(0x20d)][_0x131a71(0x160)](new CustomEvent(_0x131a71(0x186),{'detail':{'type':_0x131a71(0x1d7),'target':0x0}}));}