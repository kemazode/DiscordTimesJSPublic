const _0x4be2dd=_0x390e;(function(_0x407f89,_0xd8e1df){const _0x2ab232=_0x390e,_0x23becd=_0x407f89();while(!![]){try{const _0x4ae0d8=parseInt(_0x2ab232(0x116))/0x1+-parseInt(_0x2ab232(0xfe))/0x2+-parseInt(_0x2ab232(0xce))/0x3+parseInt(_0x2ab232(0xc0))/0x4+-parseInt(_0x2ab232(0xd6))/0x5+parseInt(_0x2ab232(0x143))/0x6+parseInt(_0x2ab232(0xc9))/0x7*(-parseInt(_0x2ab232(0xbd))/0x8);if(_0x4ae0d8===_0xd8e1df)break;else _0x23becd['push'](_0x23becd['shift']());}catch(_0x2f218e){_0x23becd['push'](_0x23becd['shift']());}}}(_0xab63,0x38132));const ARMY_SIZE=0xc;let BASE_PATH=_0x4be2dd(0xd0);const DT_Bonuses={'Attack':[],'Defence':[],'Turn':[],'Start':[],'Ability':[],'Map':[]},DT_BonusCallbacks={},DT_BonusEmojis={},DT_RestorableCharacteristics=[_0x4be2dd(0xb8),_0x4be2dd(0x151),_0x4be2dd(0x15b),_0x4be2dd(0x121),_0x4be2dd(0xe4),_0x4be2dd(0xf2),_0x4be2dd(0xf5),_0x4be2dd(0xea)];let DT_ArmiesInitialState=[],DT_Armies=[],DT_RelicsInUse=[];const DT_EnemyRear=[0x17,0x16,0x15,0x14,0x13,0x12],DT_EnemyForward=[0x11,0x10,0xf,0xe,0xd,0xc],DT_PlayerForward=[0x0,0x1,0x2,0x3,0x4,0x5],DT_PlayerRear=[0x6,0x7,0x8,0x9,0xa,0xb],DT_LineLength=0x6;let DT_Parent=null,DT_Resources={'icons':{},'sfx':{},'projectile':null,'cursed':null},DT_Grid=null,DT_CSSCards=[],DT_ImgWidth=_0x4be2dd(0x127),DT_ImgHeight='108',DT_ImgWidthPx=_0x4be2dd(0x117),DT_ImgHeightPx='108px',DT_ActiveUnit=null,DT_PlayerWon=![],DT_EnemyWon=![],DT_LockCallback=![],DT_BattleIsOverCalled=![],DT_ActiveStates=[],TurnCounter=0x0;function CreateBonus(_0x34d38f,_0x392095,_0xe381de,_0x5a37f9){const _0x5c77bf=_0x4be2dd;DT_BonusCallbacks[_0x34d38f]=_0x5a37f9,DT_BonusEmojis[_0x34d38f]=_0x392095;for(const _0x2ef7b7 of _0xe381de){DT_Bonuses[_0x2ef7b7][_0x5c77bf(0xdc)](_0x34d38f);}}function GetProperty(_0xa33df8,_0x62838e){const _0x5138fe=_0x4be2dd;return pos=Math[_0x5138fe(0x167)](_0xa33df8),_0x62838e in DT_Armies[pos]?DT_Armies[pos][_0x62838e]:null;}function SetState(_0x56d98e,_0x43f8cc,_0x5b2852,_0x49982c,_0x3ecc08){const _0xb2db92=_0x4be2dd;if(_0x56d98e<0x0)return;t=DT_Armies[_0x56d98e];if(!(_0x43f8cc in DT_ActiveStates))DT_ActiveStates[_0x43f8cc]={'emoji':_0x5b2852,'frequency':_0x49982c,'f':_0x3ecc08,'sufferers':[t]};else!DT_ActiveStates[_0x43f8cc][_0xb2db92(0x170)][_0xb2db92(0x12f)](t)&&DT_ActiveStates[_0x43f8cc][_0xb2db92(0x170)][_0xb2db92(0xdc)](t);}function GoOff(_0x592164,_0x1fbe7a,_0x38ddb4,_0x4fe862){const _0x23dca9=_0x4be2dd;if(_0x1fbe7a<0x0||_0x38ddb4<0x0)return;if(_0x592164===_0x23dca9(0x111))DT_CSSCards[_0x38ddb4][_0x23dca9(0xb5)][_0x23dca9(0xcc)](new CustomEvent(_0x23dca9(0x154),{'detail':{'type':_0x23dca9(0x111),'attacker':DT_Armies[_0x1fbe7a],'target':DT_Armies[_0x38ddb4],'attacktype':_0x4fe862}}));else _0x592164===_0x23dca9(0xba)&&DT_CSSCards[_0x38ddb4][_0x23dca9(0xb5)]['dispatchEvent'](new CustomEvent(_0x23dca9(0x154),{'detail':{'type':'Pass','target':DT_Armies[_0x38ddb4]}}));}function getRandomInt(_0x7fac2a){const _0x1a6cba=_0x4be2dd;return Math[_0x1a6cba(0xeb)](Math['random']()*_0x7fac2a);}function DT_GetRandomArmy(){const _0x3c2103=_0x4be2dd;let _0x854ede=[];for(let _0x5e502c=0x0;_0x5e502c<ARMY_SIZE;_0x5e502c++){ind=getRandomInt(0x64);for(const _0x732a43 in DT_Units)if(DT_Units[_0x732a43][_0x3c2103(0x11b)]===ind)_0x854ede[_0x3c2103(0xdc)](_0x732a43);}return _0x854ede;}function DT_GetUnitNumber(_0x4ff1c6){for(let _0x519fae=0x0;_0x519fae<DT_CSSCards['length'];_0x519fae++){if(DT_Armies[_0x519fae]===_0x4ff1c6)return _0x519fae;}return null;}function DT_GetElementID(_0x1f8000){const _0x483977=_0x4be2dd;for(let _0x38a281=0x0;_0x38a281<DT_CSSCards[_0x483977(0x12d)];_0x38a281++){if(DT_CSSCards[_0x38a281][_0x483977(0xb5)]===_0x1f8000)return _0x38a281;}return null;}function DT_ApplyBonus(_0x57f739,_0x41d57d,_0x3d6ede=null,_0x1f3980=null,_0x23c11f=null){const _0x20c1fb=_0x4be2dd;let _0x2eb55c=DT_Armies[Math[_0x20c1fb(0x167)](_0x41d57d)],_0x28c8a6=DT_Armies[Math[_0x20c1fb(0x167)](_0x1f3980)];if(_0x57f739===_0x20c1fb(0x157)){if(_0x28c8a6===null)return _0x3d6ede;bonus=_0x28c8a6['Bonus'];}else{if(_0x2eb55c===null)return _0x3d6ede;bonus=_0x2eb55c[_0x20c1fb(0x14b)];}if(DT_Bonuses[_0x57f739]['includes'](bonus)&&DT_BonusCallbacks[bonus]!==null)return DT_BonusCallbacks[bonus](_0x57f739,_0x41d57d,_0x1f3980,_0x23c11f,_0x3d6ede);return _0x3d6ede;}function DT_AttachHit(_0xd3200f,_0x4388c8){const _0x41b158=_0x4be2dd;if(_0x4388c8===null)return;DT_NormalizeHit(_0xd3200f,_0x4388c8);for(const _0x16fcd7 in _0x4388c8){if(typeof _0x4388c8[_0x16fcd7]===_0x41b158(0xbc)&&_0x16fcd7 in _0xd3200f)_0xd3200f[_0x16fcd7]+=_0x4388c8[_0x16fcd7];else _0xd3200f[_0x16fcd7]=_0x4388c8[_0x16fcd7];}DT_RefreshElement(_0xd3200f[_0x41b158(0xe6)]);}function DT_NormalizeHit(_0x2e0907,_0x2fc913){const _0x3b4e84=_0x4be2dd;if(_0x2fc913===null)return;for(const _0x114a49 in _0x2fc913){if(typeof _0x2fc913[_0x114a49]===_0x3b4e84(0xbc)&&_0x2fc913[_0x114a49]<0x0&&_0x2e0907[_0x114a49]+_0x2fc913[_0x114a49]<0x0)_0x2fc913[_0x114a49]=-_0x2e0907[_0x114a49];}_0x3b4e84(0x105)in _0x2fc913&&(_0x2fc913[_0x3b4e84(0x105)]+_0x2e0907[_0x3b4e84(0x105)]>_0x2e0907[_0x3b4e84(0x122)][_0x3b4e84(0x105)]&&(_0x2fc913[_0x3b4e84(0x105)]=_0x2e0907['InitialState'][_0x3b4e84(0x105)]-_0x2e0907[_0x3b4e84(0x105)]),_0x2fc913[_0x3b4e84(0x105)]=Math['round'](_0x2fc913['Hits']));}function DT_ComputeUnitValue(_0x43df64){const _0x279fa7=_0x4be2dd;if(!DT_IsThereUnit(_0x43df64))return 0x0;const _0x592d79=_0x43df64[_0x279fa7(0x122)];let _0x49e7dc=_0x592d79['Hits'],_0x50f1a8=_0x592d79[_0x279fa7(0xea)],_0x3b1478=_0x592d79[_0x279fa7(0xe4)],_0x42ed18=_0x279fa7(0x15b)in _0x592d79?_0x592d79[_0x279fa7(0x15b)]:0x0,_0x8fc849=_0x279fa7(0x121)in _0x592d79?_0x592d79[_0x279fa7(0x121)]:0x0,_0x2d5076='ProtectDeath'in _0x592d79?_0x592d79[_0x279fa7(0x104)]:0x0,_0x4e98bd=_0x279fa7(0xc6)in _0x592d79?_0x592d79[_0x279fa7(0xc6)]:0x0,_0x573281=_0x279fa7(0xee)in _0x592d79?_0x592d79[_0x279fa7(0xee)]:0x0,_0xcc9345='AttackBlow'in _0x592d79?_0x592d79[_0x279fa7(0x151)]:0x0,_0x22a6cc=_0x279fa7(0xb8)in _0x592d79?_0x592d79[_0x279fa7(0xb8)]:0x0,_0x14d46e=_0x279fa7(0x10e)in _0x592d79?_0x592d79['MagicPower']:0x0;return _0x49e7dc*(0x1+(_0x42ed18+_0x8fc849)/0x64+(_0x4e98bd+_0x2d5076+_0x573281)/0x12c)+(_0xcc9345+_0x22a6cc+_0x14d46e)*(0x2+_0x3b1478/0xa)*_0x50f1a8;}function DT_ComputeUnitsPriority(_0x44cc94,_0x18af50){const _0x307c85=_0x4be2dd;let _0x564ec9=DT_Armies[_0x44cc94],_0x1099c6=DT_Armies[_0x18af50],_0x533fe0=DT_GetPossibleAttack(_0x44cc94,_0x18af50),_0x3352a0={'priority':0x0,'attacktype':_0x533fe0};if(_0x533fe0===null)return _0x3352a0;let _0x1e2f2a=DT_IsPlayersUnit(_0x564ec9)?DT_PlayerForward[_0x307c85(0xd9)]():DT_EnemyForward[_0x307c85(0xd9)]();_0x1e2f2a[_0x307c85(0x129)](DT_GetUnitNumberInLine(_0x44cc94),0x1);if(_0x533fe0!==null&&_0x533fe0!=='Move'){_0x3352a0[_0x307c85(0xcb)]=0x64,_0x3352a0[_0x307c85(0x11a)]=_0x533fe0;let _0x18f4bd=DT_ComputeUnitValue(_0x1099c6);_0x3352a0[_0x307c85(0xcb)]+=_0x18f4bd;let _0x4e7e68=DT_CalculateHit(_0x564ec9,_0x1099c6,_0x533fe0);_0x4e7e68=DT_ApplyBonus(_0x307c85(0x164),-_0x44cc94,_0x4e7e68,-_0x18af50,_0x533fe0),_0x4e7e68=DT_ApplyBonus('Defence',-_0x44cc94,_0x4e7e68,-_0x18af50,_0x533fe0),DT_NormalizeHit(_0x1099c6,_0x4e7e68),_0x1099c6['Hits']+_0x4e7e68[_0x307c85(0x105)]===0x0&&(_0x3352a0[_0x307c85(0xcb)]+=0x3e8),actual=_0x132ab1=>_0x132ab1 in _0x4e7e68?Math[_0x307c85(0x167)](_0x4e7e68[_0x132ab1]):0x0,_0x3352a0[_0x307c85(0xcb)]+=(actual('Hits')+actual(_0x307c85(0x121))/0x2+actual(_0x307c85(0x15b))/0x2+actual(_0x307c85(0x151))/0x2+actual(_0x307c85(0xb8))/0x2)*(_0x18f4bd/0xa)+actual(_0x307c85(0xea))*_0x18f4bd+0x64*actual(_0x307c85(0xf5));}else{if(_0x533fe0===_0x307c85(0xe8)){if(_0x307c85(0x151)in _0x564ec9&&DT_IsRearPosition(_0x44cc94))_0x3352a0[_0x307c85(0xcb)]+=DT_IsForwardPosition(_0x18af50)?0xc8:-0xc8;else(_0x307c85(0xb8)in _0x564ec9||'MagicPower'in _0x564ec9)&&DT_IsForwardPosition(_0x44cc94)&&DT_AreThereOccupiedPosition(_0x1e2f2a)&&(_0x3352a0['priority']+=DT_IsRearPosition(_0x18af50)?0x320:-0x320);}}return _0x3352a0;}function DT_GetUnitNumberInLine(_0x6fb604){return _0x6fb604<ARMY_SIZE?_0x6fb604%DT_LineLength:DT_LineLength-0x1-_0x6fb604%DT_LineLength;}function DT_PlaySFX(_0x4060fa){const _0x2c0be9=_0x4be2dd;DT_Resources[_0x2c0be9(0xef)][_0x4060fa]['pause'](),DT_Resources[_0x2c0be9(0xef)][_0x4060fa][_0x2c0be9(0xca)]=0x0,DT_Resources[_0x2c0be9(0xef)][_0x4060fa][_0x2c0be9(0x10b)]();}function DT_AnimationDeath(_0x473622){const _0x381ed3=_0x4be2dd;DT_CSSCards[_0x473622]['card'][_0x381ed3(0x100)][_0x381ed3(0xe1)]('deadunit'),setTimeout(function(){const _0x25e361=_0x381ed3;DT_CSSCards[_0x473622]['card']['classList'][_0x25e361(0xf6)](_0x25e361(0x110));},0x1f4);}function DT_AnimationHit(_0xbfcc45,_0x20b596,_0x2606f9){const _0x155d37=_0x4be2dd;let _0x228b75=1.5,_0x193ea3=new Image();const _0x3b5d11=DT_CSSCards[_0x20b596][_0x155d37(0x14e)]['getBoundingClientRect'](),_0x3e6caf=DT_CSSCards[_0xbfcc45]['img'][_0x155d37(0x159)](),_0x71d84=0x40,_0x1d28e0={'left':(_0x3e6caf[_0x155d37(0x161)]+_0x3e6caf[_0x155d37(0x137)]-_0x71d84)/0x2,'top':(_0x3e6caf[_0x155d37(0x153)]+_0x3e6caf[_0x155d37(0x13d)]-_0x71d84)/0x2},_0x40c13c={'left':(_0x3b5d11[_0x155d37(0x161)]+_0x3b5d11[_0x155d37(0x137)]-_0x71d84)/0x2,'top':(_0x3b5d11[_0x155d37(0x153)]+_0x3b5d11[_0x155d37(0x13d)]-_0x71d84)/0x2};let _0x3e21c5=_0x40c13c[_0x155d37(0x161)]-_0x1d28e0['left'],_0x5c7c82=_0x40c13c['top']-_0x1d28e0[_0x155d37(0x153)];const _0x494a53=Math[_0x155d37(0x15e)](_0x3e21c5*_0x3e21c5+_0x5c7c82*_0x5c7c82);let _0x1bf825=_0x494a53/_0x228b75;return _0x193ea3['src']=DT_Resources['projectile'][_0x155d37(0x13b)],_0x193ea3[_0x155d37(0xe0)][_0x155d37(0x161)]=_0x1d28e0[_0x155d37(0x161)]+'px',_0x193ea3[_0x155d37(0xe0)]['top']=_0x1d28e0['top']+'px',_0x193ea3[_0x155d37(0xe0)][_0x155d37(0xc2)](_0x155d37(0x165),_0x3e21c5+'px'),_0x193ea3[_0x155d37(0xe0)][_0x155d37(0xc2)](_0x155d37(0xe9),_0x5c7c82+'px'),_0x193ea3[_0x155d37(0xe0)][_0x155d37(0xc2)]('--timeout',_0x1bf825+'ms'),_0x193ea3[_0x155d37(0x100)]['add']('projectile'),DT_Parent[_0x155d37(0xd8)](_0x193ea3),setTimeout(()=>{const _0xd045f6=_0x155d37;_0x193ea3[_0xd045f6(0xf6)]();},_0x1bf825),_0x1bf825;}function getCellsBetweenPoints(_0x5087f4,_0x1ef2bd){const _0x539971=_0x4be2dd;var _0x487135=[],_0x265912=_0x5087f4['x'],_0x3e3237=_0x5087f4['y'],_0x2c94fa=_0x1ef2bd['x'],_0x287545=_0x1ef2bd['y'],_0x584845=Math[_0x539971(0x167)](_0x2c94fa-_0x265912),_0x442b09=Math[_0x539971(0x167)](_0x287545-_0x3e3237),_0x33d7b2=_0x265912<_0x2c94fa?0x1:-0x1,_0x3f0b70=_0x3e3237<_0x287545?0x1:-0x1,_0x529991=_0x584845-_0x442b09;_0x487135['push']({'y':_0x3e3237,'x':_0x265912});while(!(_0x265912===_0x2c94fa&&_0x3e3237===_0x287545)){var _0x573eb0=_0x529991<<0x1;_0x573eb0>-_0x442b09&&(_0x529991-=_0x442b09,_0x265912+=_0x33d7b2),_0x573eb0<_0x584845&&(_0x529991+=_0x584845,_0x3e3237+=_0x3f0b70),_0x487135['push']({'y':_0x3e3237,'x':_0x265912});}return _0x487135;}function DT_IsBattleOver(){return DT_EnemyWon=!DT_AreThereOccupiedPosition(DT_PlayerForward)&&!DT_AreThereOccupiedPosition(DT_PlayerRear),DT_PlayerWon=!DT_AreThereOccupiedPosition(DT_EnemyForward)&&!DT_AreThereOccupiedPosition(DT_EnemyRear),DT_EnemyWon||DT_PlayerWon;}function DT_AIMove(){const _0x5b6df1=_0x4be2dd;!DT_IsPlayersUnit(DT_ActiveUnit)&&(DT_AIPerformAction(),DT_ActiveUnit[_0x5b6df1(0xea)]-=0x1,DT_RefreshElement(DT_ActiveUnit[_0x5b6df1(0xe6)]));}function DT_AIPerformAction(){const _0xae92c5=_0x4be2dd;let _0x119070=null;for(let _0x29aac4=0x0;_0x29aac4<DT_CSSCards['length'];_0x29aac4++){pri=DT_ComputeUnitsPriority(DT_ActiveUnit[_0xae92c5(0xe6)],_0x29aac4),pri[_0xae92c5(0x11a)]!==null&&(_0x119070===null||pri[_0xae92c5(0xcb)]>_0x119070[_0xae92c5(0x141)])&&(_0x119070={'pri':pri[_0xae92c5(0xcb)],'tPos':_0x29aac4,'atype':pri[_0xae92c5(0x11a)]});}_0x119070!==null?DT_CSSCards[_0x119070[_0xae92c5(0x14a)]][_0xae92c5(0xb5)]['dispatchEvent'](new CustomEvent(_0xae92c5(0x154),{'detail':{'type':'Hit','attacker':DT_ActiveUnit,'target':DT_Armies[_0x119070[_0xae92c5(0x14a)]],'attacktype':_0x119070[_0xae92c5(0x16c)]}})):DT_CSSCards[DT_ActiveUnit[_0xae92c5(0xe6)]][_0xae92c5(0xb5)][_0xae92c5(0xcc)](new CustomEvent(_0xae92c5(0x154),{'detail':{'type':_0xae92c5(0xba),'target':DT_ActiveUnit}}));}function findNextLowerInitiative(_0x58f15b){const _0x43ec63=_0x4be2dd;let _0x50a411=null;for(const _0x5db21d of DT_Armies){DT_IsUnitEngaged(_0x5db21d)&&_0x5db21d[_0x43ec63(0xe4)]<=_0x58f15b&&(_0x50a411===null||_0x5db21d[_0x43ec63(0xe4)]>=_0x50a411[_0x43ec63(0xe4)])&&(_0x50a411=_0x5db21d);}return _0x50a411;}function DT_ArePositionAllies(_0x10abfa,_0x5edeea){return _0x10abfa<ARMY_SIZE&&_0x5edeea<ARMY_SIZE||_0x10abfa>=ARMY_SIZE&&_0x5edeea>=ARMY_SIZE;}function DT_IsForwardPosition(_0x5c80af){const _0x4d4f14=_0x4be2dd;return DT_EnemyForward[_0x4d4f14(0x12f)](_0x5c80af)||DT_PlayerForward[_0x4d4f14(0x12f)](_0x5c80af);}function DT_IsRearPosition(_0x432959){const _0x359dc2=_0x4be2dd;return DT_EnemyRear[_0x359dc2(0x12f)](_0x432959)||DT_PlayerRear[_0x359dc2(0x12f)](_0x432959);}function DT_AreThereOccupiedPosition(_0x17ddfd){for(const _0x125657 of _0x17ddfd){if(_0x125657!==null&&DT_IsThereUnit(DT_Armies[_0x125657]))return!![];}return![];}function DT_DoesMagicAffect(_0x5d296a,_0x262287){const _0x7cd7f0=_0x4be2dd;return DT_ArePositionAllies(_0x5d296a['Position'],_0x262287['Position'])?(magictype=_0x5d296a[_0x7cd7f0(0x15f)][_0x7cd7f0(0xd9)](0x0,-0x5),magictype===_0x7cd7f0(0x125)&&_0x262287['Nature']===_0x7cd7f0(0x162)||magictype!=='Death'&&_0x262287[_0x7cd7f0(0xfc)]!==_0x7cd7f0(0x162)):!![];}function DT_IsThereUnit(_0x25a004){const _0x5e07bc=_0x4be2dd;return _0x25a004!==null&&_0x25a004[_0x5e07bc(0x105)]>0x0;}function DT_IsPlayersUnit(_0x438d44){const _0xf164a3=_0x4be2dd;return _0x438d44[_0xf164a3(0xe6)]<ARMY_SIZE;}function DT_IsUnitEngaged(_0x4e8c8f){const _0x28566b=_0x4be2dd;return _0x4e8c8f!==null&&_0x4e8c8f[_0x28566b(0xea)]>0x0&&_0x4e8c8f[_0x28566b(0x105)]>0x0;}function _0x390e(_0x3196d9,_0x2fdf32){const _0xab633a=_0xab63();return _0x390e=function(_0x390e98,_0x4d5d21){_0x390e98=_0x390e98-0xb4;let _0x502cec=_0xab633a[_0x390e98];return _0x502cec;},_0x390e(_0x3196d9,_0x2fdf32);}function DT_GetPossibleAttack(_0x359810,_0x431bde){const _0x2d24cd=_0x4be2dd;a=DT_Armies[_0x359810],t=DT_Armies[_0x431bde];let _0x234702=null;if(DT_IsThereUnit(a)&&DT_IsThereUnit(t)&&typeof DT_CSSCards[_0x359810]===_0x2d24cd(0x163)){hitPath=DT_GetPossiblePath(_0x359810,_0x431bde);if(hitPath[_0x2d24cd(0x12d)]===0x0)return null;let _0x39166f=DT_IsPlayersUnit(a)?DT_EnemyForward[_0x2d24cd(0xd9)]():DT_PlayerForward[_0x2d24cd(0xd9)](),_0x2515e8=0x0;for(const _0x57c4da of hitPath){if(DT_IsThereUnit(DT_Armies[_0x57c4da])&&!DT_ArePositionAllies(_0x359810,_0x57c4da))_0x2515e8++;}let _0x44097c=DT_GetUnitNumberInLine(_0x359810),_0x39720c=_0x44097c-0x1<0x0?null:_0x39166f[_0x44097c-0x1],_0xa65c13=_0x39166f[_0x44097c],_0x41a1dc=_0x44097c+0x1>=_0x39166f['length']?null:_0x39166f[_0x44097c+0x1],_0xb5e969=DT_IsForwardPosition(_0x359810)&&DT_AreThereOccupiedPosition([_0x39720c,_0xa65c13,_0x41a1dc]),_0x417400=Math[_0x2d24cd(0x167)](_0x44097c-DT_GetUnitNumberInLine(_0x431bde))<0x2&&DT_IsForwardPosition(_0x431bde)&&_0xb5e969;if(!DT_ArePositionAllies(_0x359810,_0x431bde)){if('AttackBlow'in a&&DT_IsForwardPosition(_0x359810)){if(_0x417400===!![])_0x234702=_0x2d24cd(0xe5);else!_0xb5e969&&DT_IsForwardPosition(_0x431bde)&&_0x2515e8<0x2&&(_0x234702=_0x2d24cd(0xe5));}else{if('AttackShot'in a){if(DT_IsRearPosition(_0x359810))_0x234702=a[_0x2d24cd(0x11b)]===0x18||a[_0x2d24cd(0x11b)]===0x19?_0x2d24cd(0xf1):_0x2d24cd(0xed);else{if(_0x417400===!![])_0x234702=a[_0x2d24cd(0x11b)]===0x18||a[_0x2d24cd(0x11b)]===0x19?'Strike':_0x2d24cd(0xed);else!_0xb5e969&&_0x2515e8<0x2&&(_0x234702=a[_0x2d24cd(0x11b)]===0x18||a['GlobalIndex']===0x19?'Strike':_0x2d24cd(0xed));}}else{if(!_0xb5e969&&_0x2d24cd(0x10e)in a&&(a[_0x2d24cd(0xd5)]==='ToEnemy'||a[_0x2d24cd(0xd5)]==='ToAll')&&DT_DoesMagicAffect(a,t)){if(t[_0x2d24cd(0xf5)]===!![])_0x234702=_0x2d24cd(0x107);else a[_0x2d24cd(0xfc)]==='Undead'?_0x234702=_0x2d24cd(0xc3):_0x234702='Curse';}}}}else{if(_0x2d24cd(0x10e)in a&&(a[_0x2d24cd(0xd5)]===_0x2d24cd(0x168)||a[_0x2d24cd(0xd5)]==='ToAll')&&DT_DoesMagicAffect(a,t)){if(t[_0x2d24cd(0x105)]<t[_0x2d24cd(0x122)][_0x2d24cd(0x105)])_0x234702=_0x2d24cd(0x11f);else t['Blessed']===![]&&(_0x234702=t[_0x2d24cd(0xfc)]==='Undead'?_0x2d24cd(0xda):_0x2d24cd(0x134));}}}else DT_IsThereUnit(a)&&DT_ArePositionAllies(_0x359810,_0x431bde)&&typeof DT_CSSCards[_0x359810]===_0x2d24cd(0x163)&&(_0x234702=_0x2d24cd(0xe8));return _0x234702;}function DT_GetPossiblePath(_0x2e0cee,_0x3e98b3){const _0x3227ff=_0x4be2dd;table=[DT_EnemyRear,DT_EnemyForward,DT_PlayerForward,DT_PlayerRear];if(ARMY_SIZE!==0xc)return console[_0x3227ff(0x10d)]('The\x20DT_IsReachableFor\x20hasn\x27t\x20been\x20adapted\x20for\x20this\x20army\x20size'),[];const _0x53f8b1={'aPos':{'x':null,'y':null},'tPos':{'x':null,'y':null}};for(let _0x570e27=0x0;_0x570e27<table[_0x3227ff(0x12d)];_0x570e27++){for(let _0x508602=0x0;_0x508602<table[_0x570e27]['length'];_0x508602++){table[_0x570e27][_0x508602]===_0x2e0cee&&(_0x53f8b1[_0x3227ff(0xbf)]['x']=_0x508602,_0x53f8b1[_0x3227ff(0xbf)]['y']=_0x570e27),table[_0x570e27][_0x508602]===_0x3e98b3&&(_0x53f8b1['tPos']['x']=_0x508602,_0x53f8b1[_0x3227ff(0x14a)]['y']=_0x570e27);}}let _0x3bc82d=[],_0x207bc2=getCellsBetweenPoints(_0x53f8b1[_0x3227ff(0xbf)],_0x53f8b1[_0x3227ff(0x14a)]);for(const _0x22eeb2 of _0x207bc2){_0x3bc82d[_0x3227ff(0xdc)](table[_0x22eeb2['y']][_0x22eeb2['x']]);}return _0x3bc82d;}function DT_CallbackFlipCard(_0x26d34f){const _0x321cad=_0x4be2dd;_0x26d34f[_0x321cad(0x140)]();if(!this[_0x321cad(0x100)][_0x321cad(0x16e)](_0x321cad(0xc4)))this[_0x321cad(0x100)][_0x321cad(0xc1)]('flipped');}function DT_CallbackAction(_0x2010f1){const _0x403553=_0x4be2dd;let _0x2e104c='attacker'in _0x2010f1[_0x403553(0x112)]?_0x2010f1[_0x403553(0x112)][_0x403553(0x10a)]:null,_0x2d8722=_0x403553(0x133)in _0x2010f1[_0x403553(0x112)]?_0x2010f1[_0x403553(0x112)][_0x403553(0x133)]:null,_0x3012cf=_0x2d8722===null?DT_GetElementID(this):_0x2d8722[_0x403553(0xe6)],_0x241d43=_0x2010f1[_0x403553(0x112)]['attacktype'],_0x803e6=0x0,_0x56839a=![],_0x3a7c89=function(){};if(DT_IsBattleOver()){DT_BattleIsOver();return;}if(_0x2010f1['detail'][_0x403553(0x142)]===_0x403553(0xff)){DT_GiveMoveTo(_0x2d8722),DT_LockCallback=![];if(!DT_IsPlayersUnit(DT_ActiveUnit))DT_AIMove();return;}if(_0x2010f1[_0x403553(0x112)][_0x403553(0x142)]===_0x403553(0x111)&&DT_IsThereUnit(_0x2e104c))_0x3a7c89=function(){const _0x3f0458=_0x403553;_0x241d43===_0x3f0458(0xe8)?(DT_SwapUnits([_0x2e104c[_0x3f0458(0xe6)]],[_0x3012cf],DT_Armies),DT_PlaySFX(_0x241d43)):(hit=DT_CalculateHit(_0x2e104c,_0x2d8722,_0x241d43),hit=DT_ApplyBonus(_0x3f0458(0x164),_0x2e104c[_0x3f0458(0xe6)],hit,_0x3012cf,_0x241d43),hit=DT_ApplyBonus(_0x3f0458(0x157),_0x2e104c[_0x3f0458(0xe6)],hit,_0x3012cf,_0x241d43),DT_AttachHit(_0x2d8722,hit),DT_PlaySFX(_0x241d43));if(!DT_AreThereOccupiedPosition(DT_PlayerForward))DT_SwapUnits(DT_PlayerForward,DT_PlayerRear);else!DT_AreThereOccupiedPosition(DT_EnemyForward)&&DT_SwapUnits(DT_EnemyForward,DT_EnemyRear);},_0x803e6=DT_AnimationHit(_0x2e104c[_0x403553(0xe6)],_0x3012cf,_0x241d43);else{if(_0x2010f1[_0x403553(0x112)][_0x403553(0x142)]===_0x403553(0xdf))_0x3a7c89=function(){const _0x463ce8=_0x403553;_0x56839a=!![],TurnCounter++,DT_CheckStates(_0x463ce8(0x145));for(const _0xa8f38c of DT_Armies){if(DT_IsThereUnit(_0xa8f38c)){for(const _0x159b16 of DT_RestorableCharacteristics){if(_0x159b16 in _0xa8f38c[_0x463ce8(0x122)])_0xa8f38c[_0x159b16]=_0xa8f38c[_0x463ce8(0x122)][_0x159b16];else delete _0xa8f38c[_0x159b16];}TurnCounter===0x1&&(hit=DT_ApplyBonus(_0x463ce8(0x124),_0xa8f38c[_0x463ce8(0xe6)]),DT_AttachHit(_0xa8f38c,hit)),TurnCounter>0x3&&_0x463ce8(0x10e)in _0xa8f38c&&_0xa8f38c[_0x463ce8(0x10e)]>0xf&&(_0xa8f38c[_0x463ce8(0x10e)]=_0xa8f38c[_0x463ce8(0x10e)]-0x2<0xf?0xf:_0xa8f38c['MagicPower']-0x2),DT_RefreshElement(_0xa8f38c[_0x463ce8(0xe6)]);}}};else{}}setTimeout(function(){const _0x2e492d=_0x403553;_0x3a7c89(),DT_CheckStates(_0x2e492d(0x101));let _0x51b387=DT_ActiveUnit;(!DT_IsUnitEngaged(_0x51b387)||_0x56839a)&&(_0x51b387=findNextLowerInitiative(Infinity)),_0x51b387!==null?DT_CSSCards[_0x51b387[_0x2e492d(0xe6)]][_0x2e492d(0xb5)][_0x2e492d(0xcc)](new CustomEvent('Action',{'detail':{'type':'Activate','target':_0x51b387}})):DT_CSSCards[0x0][_0x2e492d(0xb5)][_0x2e492d(0xcc)](new CustomEvent(_0x2e492d(0x154),{'detail':{'type':_0x2e492d(0xdf),'target':0x0}}));},_0x803e6);}function DT_Callback(){const _0x193f67=_0x4be2dd;if(DT_LockCallback===!![]||!DT_IsPlayersUnit(DT_ActiveUnit))return;let _0x50dbdd=DT_GetElementID(this),_0x4305fd=DT_Armies[_0x50dbdd];attacktype=DT_GetPossibleAttack(DT_ActiveUnit[_0x193f67(0xe6)],_0x50dbdd);if(attacktype!==null&&DT_ActiveUnit[_0x193f67(0xea)]>0x0)DT_LockCallback=!![],DT_ActiveUnit[_0x193f67(0xea)]-=0x1,DT_RefreshElement(DT_ActiveUnit['Position']),DT_CSSCards[_0x50dbdd][_0x193f67(0xb5)][_0x193f67(0xcc)](new CustomEvent(_0x193f67(0x154),{'detail':{'type':_0x193f67(0x111),'attacker':DT_ActiveUnit,'target':_0x4305fd,'attacktype':attacktype}}));else DT_ActiveUnit===_0x4305fd&&(DT_LockCallback=!![],DT_ActiveUnit[_0x193f67(0xea)]-=0x1,DT_RefreshElement(DT_ActiveUnit[_0x193f67(0xe6)]),DT_CSSCards[DT_ActiveUnit[_0x193f67(0xe6)]][_0x193f67(0xb5)][_0x193f67(0xcc)](new CustomEvent(_0x193f67(0x154),{'detail':{'type':'Pass','target':DT_ActiveUnit}})));}function DT_CallbackSpace(_0x5eea4b){const _0x7a7646=_0x4be2dd;if(DT_LockCallback===!![]||!DT_IsPlayersUnit(DT_ActiveUnit))return;_0x5eea4b[_0x7a7646(0xf8)]==='\x20'&&(DT_LockCallback=!![],DT_ActiveUnit['Manevres']-=0x1,DT_RefreshElement(DT_ActiveUnit[_0x7a7646(0xe6)]),DT_CSSCards[DT_ActiveUnit[_0x7a7646(0xe6)]][_0x7a7646(0xb5)]['dispatchEvent'](new CustomEvent(_0x7a7646(0x154),{'detail':{'type':_0x7a7646(0xba),'target':DT_ActiveUnit}})));}function DT_CalculateHit(_0x4e5d2d,_0x4fb955,_0x5072d2){const _0x4ca5ab=_0x4be2dd;gained={'Hits':0x0};let _0x5858e7;switch(_0x5072d2){case'Blow':def=_0x4ca5ab(0x15b)in _0x4fb955?_0x4fb955['DefenceBlow']:0x0,dmg=_0x4e5d2d['AttackBlow']-def>0x0?_0x4e5d2d['AttackBlow']-def:0x1,gained[_0x4ca5ab(0x105)]-=dmg;break;case _0x4ca5ab(0xf1):case'Shot':def=_0x4ca5ab(0x121)in _0x4fb955?_0x4fb955[_0x4ca5ab(0x121)]:0x0,dmg=_0x4e5d2d[_0x4ca5ab(0xb8)]-def>0x0?_0x4e5d2d[_0x4ca5ab(0xb8)]-def:0x1,gained[_0x4ca5ab(0x105)]-=dmg;break;case _0x4ca5ab(0x11f):gained[_0x4ca5ab(0x105)]+=_0x4e5d2d[_0x4ca5ab(0x10e)];break;case _0x4ca5ab(0xc3):case'Curse':gained[_0x4ca5ab(0xf5)]=!![],_0x5858e7=_0x4e5d2d[_0x4ca5ab(0x15f)]['slice'](0x0,-0x5),restype='Protect'+_0x5858e7;let _0x538795=_0x4e5d2d[_0x4ca5ab(0x10e)];restype in _0x4fb955&&(_0x538795=Math['round'](_0x4e5d2d[_0x4ca5ab(0x10e)]*(0x1-_0x4fb955[restype]/0x64)));defdown=Math[_0x4ca5ab(0x132)](_0x538795*0.2);_0x4ca5ab(0x15b)in _0x4fb955&&(gained['DefenceBlow']=-defdown);_0x4ca5ab(0x121)in _0x4fb955&&(gained[_0x4ca5ab(0x121)]=-defdown);attdown=Math[_0x4ca5ab(0x132)](_0x538795*0.1);_0x4ca5ab(0x151)in _0x4fb955&&(gained[_0x4ca5ab(0x151)]=-attdown);'AttackShot'in _0x4fb955&&(gained['AttackShot']=-attdown);_0x5858e7==='Elemental'&&(gained[_0x4ca5ab(0xea)]=_0x538795>=0x32?-0x2:_0x538795>=0x19?-0x1:0x0,gained[_0x4ca5ab(0xe4)]=-Math['round'](_0x538795/0xa));break;case _0x4ca5ab(0xda):case _0x4ca5ab(0x134):gained[_0x4ca5ab(0xf2)]=!![],defup=Math[_0x4ca5ab(0x132)](_0x4e5d2d[_0x4ca5ab(0x10e)]*0.34),gained['DefenceBlow']=defup,gained[_0x4ca5ab(0x121)]=defup,attup=Math[_0x4ca5ab(0x132)](_0x4e5d2d[_0x4ca5ab(0x10e)]*0.2);_0x4ca5ab(0x151)in _0x4fb955&&(gained[_0x4ca5ab(0x151)]=attup);_0x4ca5ab(0xb8)in _0x4fb955&&(gained['AttackShot']=attup);break;case _0x4ca5ab(0x107):let _0x110fd=0x1;_0x5858e7=_0x4e5d2d[_0x4ca5ab(0x15f)][_0x4ca5ab(0xd9)](0x0,-0x5),restype=_0x4ca5ab(0x144)+_0x5858e7;restype in _0x4fb955&&(_0x110fd-=_0x4fb955[restype]/0x64);let _0x1fef34=0x1;_0x4fb955[_0x4ca5ab(0xfc)]===_0x4ca5ab(0x162)&&_0x5858e7===_0x4ca5ab(0xc7)&&(_0x1fef34=0x2);gained[_0x4ca5ab(0x105)]=-(_0x4e5d2d[_0x4ca5ab(0x10e)]*_0x110fd*_0x1fef34);break;case _0x4ca5ab(0xc8):gained[_0x4ca5ab(0x105)]=-_0x4fb955[_0x4ca5ab(0x105)];break;default:break;}return gained;}function _0xab63(){const _0x1ccb22=['Heal','Army\x20identificator\x20is\x20not\x20valid:\x20\x22','DefenceShot','InitialState','Lose','Start','Death','<span\x20style=\x22float:right;color:blue;\x22>','108','background-size','splice','player','Loyal','LifeMagic','length','üó°Ô∏è\x20','includes','üõ°Ô∏è\x20','ü•≤\x20','round','target','Bless','üíÄ\x20','width','right','Rogue','setAttribute','stats','src','orange','bottom','aliveunit','projectile.png','preventDefault','pri','type','2726214nxSOXU','Protect','each\x20turn','sfx/heal.wav','div','red','sfx/dtbless.wav','tPos','Bonus','skull.gif','icons','img','blue','Not\x20equal\x20groups\x20of\x20units\x20are\x20being\x20swaped!','AttackBlow','</span><br>','top','Action','string','%,\x20transparent\x200%),\x20url(','Defence','contextmenu','getBoundingClientRect','&nbsp;','DefenceBlow','click','innerHTML','sqrt','Magic','sfx/unholybless.wav','left','Undead','object','Attack','--x','ü™Ñ\x20','abs','ToAlly','url(','steelblue','slot-','atype','<span\x20style=\x22float:right;color:','contains','The\x20army\x20is\x20at\x20capacity','sufferers','sfx/swordblow.wav','frequency','cover','<span\x20style=\x22position:absolute;top:calc(100%\x20-\x202.4em);left:\x20calc(100%\x20-\x202.4em);\x22>','card','Resources\x20haven\x27t\x20been\x20uploaded,\x20make\x20sure\x20you\x20called\x20the\x20function\x20DT_UploadResources()','<br>','AttackShot','Win','Pass','green','number','720BOXNrn','background-repeat','aPos','725092PLkthC','toggle','setProperty','Curse\x20of\x20Death','activeunit','Name','ProtectLife','Life','Banish','7427yFGfuy','currentTime','priority','dispatchEvent','cursed','626736lXSNVo','üôè\x20','DiscordTimesJS/','addEventListener','<br>&nbsp;<span\x20style=\x22text-align:right;font-size:1.3em;color:','icon','.png','MagicDirection','1539245mroJvU','</span>','appendChild','slice','Unholy\x20Bless','background-image','push','),\x20','sfx/dtcurse.wav','New\x20Turn','style','add','removeEventListener','<span\x20style=\x22color:','Initiative','Blow','Position','black','Move','--y','Manevres','floor','sfx/strike.wav','Shot','ProtectElemental','sfx','Specify\x20a\x20parent\x20node\x20to\x20attach','Strike','Blessed','target-bless','target-shot','Cursed','remove','Curse','key','assign',';\x22>','forEach','Nature','48px,\x20contain,\x20','26918dYEbrB','Activate','classList','each\x20move','#FFD700','mediumseagreen','ProtectDeath','Hits','dtgrid','Draining\x20Life','card-back','createElement','attacker','play','<span\x20style=\x22position:absolute;top:calc(100%\x20-\x202.4em);\x22>üí®\x20','log','MagicPower','height','deadunit','Hit','detail','target-move','emptyslot','descr','219750AwOWTc','108px','icons/img_','enemy','attacktype','GlobalIndex','üèπ\x20','sfx/curseofdeath.wav','linear-gradient(to\x20top,\x20var(--bloodcoloralpha)\x20'];_0xab63=function(){return _0x1ccb22;};return _0xab63();}function DT_CheckStates(_0x3aa83d){const _0xc68675=_0x4be2dd;for(const _0x74c98c in DT_ActiveStates){if(DT_ActiveStates[_0x74c98c][_0xc68675(0x172)]===_0x3aa83d)for(const _0x40099b of DT_ActiveStates[_0x74c98c][_0xc68675(0x170)]){DT_ActiveStates[_0x74c98c]['f'](_0x40099b),DT_RefreshElement(_0x40099b['Position']);}}}function DT_SwapUnits(_0x122781,_0x241b89,_0x17349e=![]){const _0x12ebee=_0x4be2dd;_0x122781[_0x12ebee(0x12d)]!==_0x241b89[_0x12ebee(0x12d)]&&console[_0x12ebee(0x10d)](_0x12ebee(0x150));for(let _0x5449a0=0x0;_0x5449a0<_0x122781[_0x12ebee(0x12d)];_0x5449a0++){let _0x16367d=_0x241b89[_0x5449a0],_0x339c89=_0x122781[_0x5449a0],_0x4cf617=DT_Armies[_0x16367d];DT_Armies[_0x16367d]=DT_Armies[_0x339c89],DT_Armies[_0x339c89]=_0x4cf617,DT_Armies[_0x16367d]!==null&&(DT_Armies[_0x16367d][_0x12ebee(0xe6)]=_0x16367d,_0x17349e===!![]&&(DT_Armies[_0x16367d]['InitialState'][_0x12ebee(0xe6)]=_0x16367d)),DT_Armies[_0x339c89]!==null&&(DT_Armies[_0x339c89][_0x12ebee(0xe6)]=_0x339c89,_0x17349e===!![]&&(DT_Armies[_0x339c89][_0x12ebee(0x122)][_0x12ebee(0xe6)]=_0x339c89)),DT_RefreshElement(_0x339c89),DT_RefreshElement(_0x16367d);}}function DT_GiveMoveTo(_0x958410){const _0x4a19f1=_0x4be2dd;DT_ActiveUnit=_0x958410;const _0x1aae68={'Blow':_0x4a19f1(0xf4),'Shot':_0x4a19f1(0xf4),'Curse':'target-shot','Curse\x20of\x20Death':'target-shot','Draining\x20Life':'target-shot','Strike':_0x4a19f1(0xf4),'Heal':'target-bless','Unholy\x20Bless':'target-bless','Bless':_0x4a19f1(0xf3),'Move':_0x4a19f1(0x113)};for(let _0x2e4fed=0x0;_0x2e4fed<DT_CSSCards[_0x4a19f1(0x12d)];_0x2e4fed++){attacktype=DT_GetPossibleAttack(DT_ActiveUnit['Position'],_0x2e4fed);let _0x37fc7e=DT_CSSCards[_0x2e4fed][_0x4a19f1(0xb5)]['classList'];_0x37fc7e[_0x4a19f1(0xf6)](_0x4a19f1(0xf4),'target-bless',_0x4a19f1(0x113),'activeunit'),attacktype!==null&&DT_IsPlayersUnit(DT_ActiveUnit)&&_0x37fc7e[_0x4a19f1(0xe1)](_0x1aae68[attacktype]);}DT_CSSCards[DT_ActiveUnit[_0x4a19f1(0xe6)]][_0x4a19f1(0xb5)][_0x4a19f1(0x100)][_0x4a19f1(0xf6)]('flipped'),DT_CSSCards[DT_ActiveUnit[_0x4a19f1(0xe6)]][_0x4a19f1(0xb5)][_0x4a19f1(0x100)]['add']('activeunit');}function DT_BattleIsOver(){const _0x8b3145=_0x4be2dd;if(DT_BattleIsOverCalled===!![])return;DT_BattleIsOverCalled=!![];if(DT_PlayerWon===!![])DT_PlaySFX(_0x8b3145(0xb9));else DT_PlaySFX(_0x8b3145(0x123));for(const _0x4ebce2 of DT_CSSCards){_0x4ebce2[_0x8b3145(0xb5)][_0x8b3145(0x100)][_0x8b3145(0xf6)](_0x8b3145(0xc4));}DT_DeleteListeners();}function DT_RemoveUnit(_0x445b73){const _0x2d1010=_0x4be2dd;_0x445b73!==null&&(DT_Armies[_0x445b73[_0x2d1010(0xe6)]]=null);}function DT_AddUnit(_0x5cba64,_0x47c3ca){const _0x355e1c=_0x4be2dd;if(!(_0x47c3ca in DT_Units))return console[_0x355e1c(0x10d)]('There\x20is\x20no\x20unit\x20with\x20the\x20name:\x20'+_0x47c3ca),null;let _0x177af3=[];if(_0x5cba64===_0x355e1c(0x12a))_0x177af3=[...DT_PlayerForward,...DT_PlayerRear];else{if(_0x5cba64===_0x355e1c(0x119))_0x177af3=[...DT_EnemyForward,...DT_EnemyRear];else return console[_0x355e1c(0x10d)](_0x355e1c(0x120)+_0x5cba64+'\x22'),null;}for(const _0x49893e of _0x177af3){if(DT_Armies[_0x49893e]===null)return DT_Armies[_0x49893e]=Object['assign']({},DT_Units[_0x47c3ca]),DT_Armies[_0x49893e]['Blessed']=![],DT_Armies[_0x49893e][_0x355e1c(0xf5)]=![],DT_Armies[_0x49893e][_0x355e1c(0xe6)]=_0x49893e,!('Nature'in DT_Armies[_0x49893e])&&(DT_Armies[_0x49893e][_0x355e1c(0xfc)]=_0x355e1c(0x12b)),DT_ArmiesInitialState[_0x49893e]=Object['assign']({},DT_Armies[_0x49893e]),DT_Armies[_0x49893e][_0x355e1c(0x122)]=DT_ArmiesInitialState[_0x49893e],_0x49893e;}return console[_0x355e1c(0x10d)](_0x355e1c(0x16f)),null;}function DT_ResurrectArmy(_0x18dbc0){const _0x210217=_0x4be2dd;let _0x47f6af=_0x18dbc0===_0x210217(0x12a)?[...DT_PlayerForward,...DT_PlayerRear]:[...DT_EnemyForward,...DT_EnemyRear];for(const _0x25cd3d of _0x47f6af){DT_Armies[_0x25cd3d]!==null&&(uinit=DT_Armies[_0x25cd3d][_0x210217(0x122)],initpos=uinit[_0x210217(0xe6)],DT_Armies[_0x25cd3d]=Object[_0x210217(0xf9)]({},uinit),DT_Armies[_0x25cd3d][_0x210217(0x122)]=uinit,_0x25cd3d!==initpos&&DT_SwapUnits([_0x25cd3d],[initpos]));}}function DT_CreateArmy(_0x1a7bcf,_0x2a9ced){const _0x2ba64f=_0x4be2dd;let _0x1bd52d=_0x1a7bcf===_0x2ba64f(0x12a)?[...DT_PlayerForward,...DT_PlayerRear]:[...DT_EnemyForward,...DT_EnemyRear];for(const _0x33a19e of _0x1bd52d){naming=_0x2a9ced['shift']();if(!(naming in DT_Units)){DT_Armies[_0x33a19e]=null;continue;}DT_Armies[_0x33a19e]=Object[_0x2ba64f(0xf9)]({},DT_Units[naming]),DT_Armies[_0x33a19e][_0x2ba64f(0xf2)]=![],DT_Armies[_0x33a19e][_0x2ba64f(0xf5)]=![],DT_Armies[_0x33a19e][_0x2ba64f(0xe6)]=_0x33a19e,!('Nature'in DT_Armies[_0x33a19e])&&(DT_Armies[_0x33a19e][_0x2ba64f(0xfc)]=_0x2ba64f(0x12b)),DT_ArmiesInitialState[_0x33a19e]=Object[_0x2ba64f(0xf9)]({},DT_Armies[_0x33a19e]),DT_Armies[_0x33a19e][_0x2ba64f(0x122)]=DT_ArmiesInitialState[_0x33a19e];}}function DT_SetUpRelics(_0xba0a8b,_0x3f3a57){const _0x369a71=_0x4be2dd;if(_0xba0a8b===_0x369a71(0x12a))for(let _0xac47e5=0x0;_0xac47e5<ARMY_SIZE;_0xac47e5++){typeof _0x3f3a57[_0xac47e5]==='string'?DT_RelicsInUse[_0xac47e5]=Object[_0x369a71(0xf9)]({},DT_Relics[_0x3f3a57[_0xac47e5]]):DT_RelicsInUse[_0xac47e5]=0x0;}else{if(_0xba0a8b===_0x369a71(0x119))for(let _0x22b8a1=ARMY_SIZE;_0x22b8a1<ARMY_SIZE*0x2;_0x22b8a1++){typeof _0x3f3a57[_0x22b8a1-ARMY_SIZE]===_0x369a71(0x155)?DT_RelicsInUse[_0x22b8a1]=Object[_0x369a71(0xf9)]({},DT_Relics[_0x3f3a57[_0x22b8a1-ARMY_SIZE]]):DT_RelicsInUse[_0x22b8a1]=0x0;}}for(let _0x5ed6df=0x0;_0x5ed6df<DT_CSSCards['length'];++_0x5ed6df){}}function DT_CreateElements(){const _0x2066ec=_0x4be2dd;function _0x13234a(_0x1a3977){const _0x5648f3=_0x390e;img=document[_0x5648f3(0x109)](_0x5648f3(0x14e)),img[_0x5648f3(0x100)][_0x5648f3(0xe1)](_0x5648f3(0xd3)),stats=document['createElement'](_0x5648f3(0x147)),stats[_0x5648f3(0x100)]['add'](_0x5648f3(0x13a)),descr=document[_0x5648f3(0x109)](_0x5648f3(0x147)),descr[_0x5648f3(0x100)]['add'](_0x5648f3(0x115));let _0x573728=document['createElement']('div'),_0xad58ca=document['createElement']('div');_0xad58ca['classList'][_0x5648f3(0xe1)]('card-front');let _0x4eaab2=document[_0x5648f3(0x109)](_0x5648f3(0x147));return _0x4eaab2[_0x5648f3(0x100)][_0x5648f3(0xe1)](_0x5648f3(0x108)),_0xad58ca[_0x5648f3(0xd8)](img),_0xad58ca['appendChild'](stats),_0x4eaab2[_0x5648f3(0xd8)](descr),_0x573728['appendChild'](_0xad58ca),_0x573728[_0x5648f3(0xd8)](_0x4eaab2),_0x573728[_0x5648f3(0x139)]('id',_0x5648f3(0x16b)+_0x1a3977),_0x573728[_0x5648f3(0x100)][_0x5648f3(0xe1)]('card'),{'card':_0x573728,'img':img,'stats':stats,'descr':descr};}grid=document[_0x2066ec(0x109)](_0x2066ec(0x147)),grid[_0x2066ec(0x100)]['add'](_0x2066ec(0x106)),orderedArmy=[...DT_EnemyRear,...DT_EnemyForward,...DT_PlayerForward,...DT_PlayerRear];for(let _0x2ad563=0x0;_0x2ad563<ARMY_SIZE*0x2;_0x2ad563++){cw=_0x13234a(orderedArmy[_0x2ad563]),grid['appendChild'](cw[_0x2066ec(0xb5)]),DT_CSSCards[orderedArmy[_0x2ad563]]=cw,DT_RefreshElement(orderedArmy[_0x2ad563]);}DT_Grid=grid,DT_Parent['appendChild'](grid);}function DT_AddListeners(){const _0x27037f=_0x4be2dd;DT_Parent[_0x27037f(0xd1)]('keyup',DT_CallbackSpace),DT_CSSCards[_0x27037f(0xfb)](_0xfd3d1f=>{const _0x1c6e9e=_0x27037f;_0xfd3d1f[_0x1c6e9e(0xb5)][_0x1c6e9e(0xd1)](_0x1c6e9e(0x15c),DT_Callback),_0xfd3d1f[_0x1c6e9e(0xb5)][_0x1c6e9e(0xd1)](_0x1c6e9e(0x154),DT_CallbackAction),_0xfd3d1f[_0x1c6e9e(0xb5)][_0x1c6e9e(0xd1)](_0x1c6e9e(0x158),DT_CallbackFlipCard);});}function DT_DeleteListeners(){const _0x39a6a0=_0x4be2dd;DT_Parent!==null&&DT_Parent['removeEventListener']('keyup',DT_CallbackSpace),DT_CSSCards[_0x39a6a0(0xfb)](_0x42c745=>{const _0x10f634=_0x39a6a0;_0x42c745[_0x10f634(0xb5)][_0x10f634(0xe2)](_0x10f634(0x15c),DT_Callback),_0x42c745[_0x10f634(0xb5)][_0x10f634(0xe2)](_0x10f634(0x154),DT_CallbackAction),_0x42c745['card']['removeEventListener'](_0x10f634(0x158),DT_CallbackFlipCard);});}function DT_RefreshElement(_0x2b61ee){const _0x108e05=_0x4be2dd;cardwr=DT_CSSCards[_0x2b61ee],u=DT_Armies[_0x2b61ee];let _0xac7d2a=null;if(typeof cardwr===_0x108e05(0x163))_0xac7d2a=cardwr[_0x108e05(0xb5)][_0x108e05(0x100)];else return;if(DT_IsThereUnit(u))_0xac7d2a[_0x108e05(0xe1)](_0x108e05(0x13e)),_0xac7d2a['remove'](_0x108e05(0x114));else{_0xac7d2a['remove'](_0x108e05(0x13e)),_0xac7d2a[_0x108e05(0xe1)](_0x108e05(0x114)),cardwr[_0x108e05(0x14e)]['style'][_0x108e05(0x136)]=DT_ImgWidthPx,cardwr[_0x108e05(0x14e)]['style'][_0x108e05(0x10f)]=DT_ImgHeightPx;return;}let _0x1d0b80=u[_0x108e05(0xfc)]===_0x108e05(0x138)?_0x108e05(0x103):u['Nature']==='Undead'?'crimson':u['Nature']==='People'?'dimgrey':_0x108e05(0x16a);cardwr['descr'][_0x108e05(0x15d)]=_0x108e05(0xd2)+_0x1d0b80+';\x22>'+u[_0x108e05(0xc5)]+_0x108e05(0x152);'ProtectLife'in u&&(cardwr[_0x108e05(0x115)][_0x108e05(0x15d)]+='<br>',cardwr[_0x108e05(0x115)][_0x108e05(0x15d)]+=_0x108e05(0xcf)+u[_0x108e05(0xc6)]+'%');_0x108e05(0x104)in u&&(cardwr[_0x108e05(0x115)][_0x108e05(0x15d)]+=_0x108e05(0xb7),cardwr[_0x108e05(0x115)]['innerHTML']+=_0x108e05(0x135)+u[_0x108e05(0x104)]+'%');_0x108e05(0xee)in u&&(cardwr['descr'][_0x108e05(0x15d)]+=_0x108e05(0xb7),cardwr[_0x108e05(0x115)][_0x108e05(0x15d)]+=_0x108e05(0x166)+u['ProtectElemental']+'%');cardwr[_0x108e05(0x115)][_0x108e05(0x15d)]+=_0x108e05(0xb7),cardwr[_0x108e05(0x115)][_0x108e05(0x15d)]+=_0x108e05(0x10c)+u[_0x108e05(0xe4)]+'</span>';_0x108e05(0x14b)in u&&(emoji=u[_0x108e05(0x14b)]in DT_BonusEmojis?DT_BonusEmojis[u['Bonus']]:'‚ùì',cardwr['descr'][_0x108e05(0x15d)]+=_0x108e05(0xb4)+emoji+'</span>');let _0x1e6b7f=DT_Resources[_0x108e05(0x14d)][u[_0x108e05(0x11b)]]['src'],_0x3faa68=Math['round']((u['InitialState'][_0x108e05(0x105)]-u[_0x108e05(0x105)])*0x64/u['InitialState'][_0x108e05(0x105)]);const _0x20dbd8=_0x3faa68<0x1e?_0x108e05(0xbb):_0x3faa68<0x32?_0x108e05(0x102):_0x3faa68<0x4b?_0x108e05(0x13c):_0x108e05(0x148);let _0x2eaeb1=![],_0x484c68='black',_0x15382a='0';if(_0x108e05(0x151)in u)_0x484c68=u['AttackBlow']>u['InitialState'][_0x108e05(0x151)]?_0x108e05(0x14f):'black',_0x15382a=u['AttackBlow'];else{if(_0x108e05(0xb8)in u)_0x484c68=u[_0x108e05(0xb8)]>u[_0x108e05(0x122)][_0x108e05(0xb8)]?_0x108e05(0x14f):_0x108e05(0xe7),_0x15382a=u[_0x108e05(0xb8)];else'MagicPower'in u&&(_0x2eaeb1=!![]);}let _0x2cfd53=_0x108e05(0xe7),_0x2986f6='0';_0x108e05(0x15b)in u&&(initialDef=_0x108e05(0x15b)in u[_0x108e05(0x122)]?u[_0x108e05(0x122)]['DefenceBlow']:0x0,_0x2cfd53=u[_0x108e05(0x15b)]>initialDef?_0x108e05(0x14f):_0x108e05(0xe7),_0x2986f6=u[_0x108e05(0x15b)]);let _0x13cb20=_0x108e05(0xe7),_0x42cf7f='0';'DefenceShot'in u&&(initialDef=_0x108e05(0x121)in u[_0x108e05(0x122)]?u[_0x108e05(0x122)]['DefenceShot']:0x0,_0x13cb20=u['DefenceShot']>initialDef?_0x108e05(0x14f):_0x108e05(0xe7),_0x42cf7f=u[_0x108e05(0x121)]);if(_0x2eaeb1)cardwr[_0x108e05(0x13a)][_0x108e05(0x15d)]=(u[_0x108e05(0x15f)]==='DeathMagic'?'üíÄ':u[_0x108e05(0x15f)]===_0x108e05(0x12c)?'üôè':'ü™Ñ')+'\x20'+u[_0x108e05(0x10e)];else{if(_0x108e05(0x151)in u)cardwr[_0x108e05(0x13a)][_0x108e05(0x15d)]=_0x108e05(0x12e)+(_0x108e05(0xe3)+_0x484c68+_0x108e05(0xfa)+_0x15382a+'</span>');else _0x108e05(0xb8)in u?cardwr['stats'][_0x108e05(0x15d)]=_0x108e05(0x11c)+(_0x108e05(0xe3)+_0x484c68+';\x22>'+_0x15382a+_0x108e05(0xd7)):cardwr[_0x108e05(0x13a)][_0x108e05(0x15d)]=_0x108e05(0x131);}for(const _0x2cdfd3 in DT_ActiveStates){DT_ActiveStates[_0x2cdfd3][_0x108e05(0x170)]['includes'](u)&&(cardwr[_0x108e05(0x13a)][_0x108e05(0x15d)]+='<span\x20style=\x22position:absolute\x22>'+DT_ActiveStates[_0x2cdfd3]['emoji']+_0x108e05(0xd7));}cardwr[_0x108e05(0x13a)][_0x108e05(0x15d)]+=_0x108e05(0x15a),cardwr[_0x108e05(0x13a)][_0x108e05(0x15d)]+=_0x108e05(0x16d)+_0x20dbd8+_0x108e05(0xfa)+u[_0x108e05(0x105)]+'/'+u[_0x108e05(0x122)][_0x108e05(0x105)]+_0x108e05(0xd7),cardwr['stats'][_0x108e05(0x15d)]+=_0x108e05(0xb7),cardwr[_0x108e05(0x13a)]['innerHTML']+=_0x108e05(0x130)+(_0x108e05(0xe3)+_0x2cfd53+_0x108e05(0xfa)+_0x2986f6+_0x108e05(0xd7))+'/'+(_0x108e05(0xe3)+_0x13cb20+_0x108e05(0xfa)+_0x42cf7f+_0x108e05(0xd7)),cardwr['stats'][_0x108e05(0x15d)]+=_0x108e05(0x15a),cardwr['stats'][_0x108e05(0x15d)]+=_0x108e05(0x126)+u[_0x108e05(0xea)]+'</span>',cardwr[_0x108e05(0x14e)][_0x108e05(0xe0)][_0x108e05(0x136)]=DT_ImgWidthPx,cardwr[_0x108e05(0x14e)]['style']['height']=DT_ImgHeightPx,cardwr[_0x108e05(0x14e)][_0x108e05(0xe0)][_0x108e05(0xc2)](_0x108e05(0xbe),'no-repeat');let _0x5a32ce='',_0x5007fa='';u['Cursed']===!![]&&(_0x5a32ce=_0x108e05(0x169)+DT_Resources[_0x108e05(0xcd)][_0x108e05(0x13b)]+_0x108e05(0xdd),_0x5007fa=_0x108e05(0xfd)),cardwr[_0x108e05(0x14e)][_0x108e05(0xe0)][_0x108e05(0xc2)](_0x108e05(0x128),_0x5007fa+_0x108e05(0x173)),cardwr[_0x108e05(0x14e)]['style'][_0x108e05(0xc2)](_0x108e05(0xdb),_0x5a32ce+(_0x108e05(0x11e)+_0x3faa68+_0x108e05(0x156)+_0x1e6b7f+')'));}function DT_UploadResources(){DT_UploadImages(),DT_UploadSounds();}function DT_UploadImages(){const _0x4ef9c7=_0x4be2dd;for(const _0x39ca4c in DT_Units){let _0x2fb95f=new Image();_0x2fb95f[_0x4ef9c7(0x13b)]=BASE_PATH+_0x4ef9c7(0x118)+(DT_Units[_0x39ca4c][_0x4ef9c7(0x11b)]-0x1)+_0x4ef9c7(0xd4),DT_Resources['icons'][DT_Units[_0x39ca4c][_0x4ef9c7(0x11b)]]=_0x2fb95f;}let _0x194e16=new Image();_0x194e16['src']=BASE_PATH+_0x4ef9c7(0x13f),DT_Resources['projectile']=_0x194e16;let _0x46ee64=new Image();_0x46ee64[_0x4ef9c7(0x13b)]=BASE_PATH+_0x4ef9c7(0x14c),DT_Resources[_0x4ef9c7(0xcd)]=_0x46ee64;}function DT_UploadSounds(){const _0xea4035=_0x4be2dd;function _0x1488fe(_0x2655bb,_0x2c7c07){if(!(_0x2c7c07 in DT_Resources['sfx'])){let _0x341235=new Audio(BASE_PATH+_0x2655bb);DT_Resources['sfx'][_0x2c7c07]=_0x341235;}}_0x1488fe(_0xea4035(0xde),_0xea4035(0xf7)),_0x1488fe(_0xea4035(0x11d),_0xea4035(0xc3)),_0x1488fe(_0xea4035(0xde),'Draining\x20Life'),_0x1488fe('sfx/shot.wav',_0xea4035(0xed)),_0x1488fe(_0xea4035(0x171),'Blow'),_0x1488fe(_0xea4035(0x146),_0xea4035(0x11f)),_0x1488fe(_0xea4035(0x149),_0xea4035(0x134)),_0x1488fe(_0xea4035(0xec),'Strike'),_0x1488fe('sfx/dtmove.wav',_0xea4035(0xe8)),_0x1488fe('sfx/curseofdeath.wav','Banish'),_0x1488fe('sfx/wintheme.wav',_0xea4035(0xb9)),_0x1488fe('sfx/losetheme.mp3',_0xea4035(0x123)),_0x1488fe(_0xea4035(0x160),_0xea4035(0xda));}function DT_ClearArmies(){DT_Armies=[],DT_ArmiesInitialState=[],DT_RelicsInUse=[];}function DT_ClearElements(){const _0x83d5a6=_0x4be2dd;DT_DeleteListeners();for(const _0x5366c4 of DT_CSSCards){_0x5366c4[_0x83d5a6(0xb5)][_0x83d5a6(0xf6)]();}DT_CSSCards=[];if(DT_Grid!==null)DT_Grid[_0x83d5a6(0xf6)]();DT_Grid=null;}function DT_StartTheBattle(){const _0x2f5f0f=_0x4be2dd;if(DT_Parent===null){console['log'](_0x2f5f0f(0xf0));return;}else DT_Units===null&&console[_0x2f5f0f(0x10d)](_0x2f5f0f(0xb6));DT_PlayerWon=![],DT_EnemyWon=![],DT_BattleIsOverCalled=![],TurnCounter=0x0,DT_ClearElements(),DT_CreateElements(),DT_AddListeners(),DT_CSSCards[0x0][_0x2f5f0f(0xb5)][_0x2f5f0f(0xcc)](new CustomEvent('Action',{'detail':{'type':_0x2f5f0f(0xdf),'target':0x0}}));}