const _0x2c3519=_0xd30a;(function(_0x122a5a,_0x4d3bdb){const _0x36472e=_0xd30a,_0x4b7b05=_0x122a5a();while(!![]){try{const _0x3c1fe2=-parseInt(_0x36472e(0xbb))/0x1*(parseInt(_0x36472e(0xf0))/0x2)+parseInt(_0x36472e(0xa3))/0x3+parseInt(_0x36472e(0x72))/0x4*(-parseInt(_0x36472e(0x89))/0x5)+parseInt(_0x36472e(0x8b))/0x6+-parseInt(_0x36472e(0xf4))/0x7+parseInt(_0x36472e(0x83))/0x8*(-parseInt(_0x36472e(0xe6))/0x9)+parseInt(_0x36472e(0x7f))/0xa;if(_0x3c1fe2===_0x4d3bdb)break;else _0x4b7b05['push'](_0x4b7b05['shift']());}catch(_0x402133){_0x4b7b05['push'](_0x4b7b05['shift']());}}}(_0x5f0f,0x8ce5b));const ARMY_SIZE=0xc;let BASE_PATH=_0x2c3519(0xaf);const DT_Bonuses={'Attack':[],'Defence':[],'Turn':[],'Start':[],'Ability':[],'Map':[]},DT_BonusCallbacks={},DT_BonusEmojis={},DT_RestorableCharacteristics=[_0x2c3519(0x133),_0x2c3519(0x76),'DefenceBlow',_0x2c3519(0xbf),_0x2c3519(0x6e),_0x2c3519(0x103),_0x2c3519(0xe1),'Manevres'];let DT_ArmiesInitialState=[],DT_Armies=[],DT_RelicsInUse=[];const DT_EnemyRear=[0x17,0x16,0x15,0x14,0x13,0x12],DT_EnemyForward=[0x11,0x10,0xf,0xe,0xd,0xc],DT_PlayerForward=[0x0,0x1,0x2,0x3,0x4,0x5],DT_PlayerRear=[0x6,0x7,0x8,0x9,0xa,0xb],DT_LineLength=0x6;let DT_Parent=null,DT_Resources={'icons':{},'sfx':{'Pre':{},'Post':{},'Simple':{}},'projectile':null,'cursed':null},DT_Grid=null,DT_CSSCards=[],DT_ImgWidth=_0x2c3519(0x102),DT_ImgHeight=_0x2c3519(0x102),DT_ImgWidthPx='108px',DT_ImgHeightPx=_0x2c3519(0x110),DT_ActiveUnit=null,DT_PlayerWon=![],DT_EnemyWon=![],DT_LockCallback=![],DT_BattleIsOverCalled=![],DT_ActiveStates=[],TurnCounter=0x0;function CreateBonus(_0x57b461,_0x516da3,_0x581af7,_0x43a7eb){const _0x12bfb9=_0x2c3519;DT_BonusCallbacks[_0x57b461]=_0x43a7eb,DT_BonusEmojis[_0x57b461]=_0x516da3;for(const _0x1c8f26 of _0x581af7){DT_Bonuses[_0x1c8f26][_0x12bfb9(0xd2)](_0x57b461);}}function GetProperty(_0x1d2b59,_0x4b156f){const _0x466a03=_0x2c3519;return pos=Math[_0x466a03(0xd6)](_0x1d2b59),_0x4b156f in DT_Armies[pos]?DT_Armies[pos][_0x4b156f]:null;}function SetState(_0x5583db,_0x5dc933,_0x9ec78f,_0x190f1a,_0x22bc45){const _0x34fbf9=_0x2c3519;if(_0x5583db<0x0)return;t=DT_Armies[_0x5583db];if(!(_0x5dc933 in DT_ActiveStates))DT_ActiveStates[_0x5dc933]={'emoji':_0x9ec78f,'frequency':_0x190f1a,'f':_0x22bc45,'sufferers':[t]};else!DT_ActiveStates[_0x5dc933][_0x34fbf9(0xb7)][_0x34fbf9(0xd4)](t)&&DT_ActiveStates[_0x5dc933][_0x34fbf9(0xb7)][_0x34fbf9(0xd2)](t);}function GoOff(_0x30693c,_0x4ffc07,_0xca4401,_0x22fb13){const _0x34f9f8=_0x2c3519;if(_0x4ffc07<0x0||_0xca4401<0x0)return;if(_0x30693c===_0x34f9f8(0x124))DT_CSSCards[_0xca4401]['card']['dispatchEvent'](new CustomEvent('Action',{'detail':{'type':_0x34f9f8(0x124),'attacker':DT_Armies[_0x4ffc07],'target':DT_Armies[_0xca4401],'attacktype':_0x22fb13}}));else _0x30693c==='Pass'&&DT_CSSCards[_0xca4401][_0x34f9f8(0xdb)][_0x34f9f8(0x9f)](new CustomEvent('Action',{'detail':{'type':'Pass','target':DT_Armies[_0xca4401]}}));}function getRandomInt(_0x3afeda){const _0xcda944=_0x2c3519;return Math[_0xcda944(0x8a)](Math[_0xcda944(0x104)]()*_0x3afeda);}function DT_GetUnitNumber(_0x2ff51d){const _0x2642f7=_0x2c3519;for(let _0xaf0f8f=0x0;_0xaf0f8f<DT_CSSCards[_0x2642f7(0x78)];_0xaf0f8f++){if(DT_Armies[_0xaf0f8f]===_0x2ff51d)return _0xaf0f8f;}return null;}function DT_GetElementID(_0x1e9647){const _0x4c484f=_0x2c3519;for(let _0xda7254=0x0;_0xda7254<DT_CSSCards[_0x4c484f(0x78)];_0xda7254++){if(DT_CSSCards[_0xda7254]['card']===_0x1e9647)return _0xda7254;}return null;}function DT_ApplyBonus(_0xd02052,_0x2db766,_0x4b5a8f=null,_0x8ba57d=null,_0x1b705b=null){const _0x15f6d3=_0x2c3519;let _0x5a855d=DT_Armies[Math[_0x15f6d3(0xd6)](_0x2db766)],_0x279dea=DT_Armies[Math['abs'](_0x8ba57d)];if(_0xd02052===_0x15f6d3(0xa8)){if(_0x279dea===null)return _0x4b5a8f;bonus=_0x279dea['Bonus'];}else{if(_0x5a855d===null)return _0x4b5a8f;bonus=_0x5a855d[_0x15f6d3(0xc6)];}if(DT_Bonuses[_0xd02052][_0x15f6d3(0xd4)](bonus)&&DT_BonusCallbacks[bonus]!==null)return DT_BonusCallbacks[bonus](_0xd02052,_0x2db766,_0x8ba57d,_0x1b705b,_0x4b5a8f);return _0x4b5a8f;}function DT_AttachHit(_0x34295a,_0x1f0de1){const _0x541f4c=_0x2c3519;if(_0x1f0de1===null)return;DT_NormalizeHit(_0x34295a,_0x1f0de1);for(const _0x1970fa in _0x1f0de1){if(typeof _0x1f0de1[_0x1970fa]==='number'&&_0x1970fa in _0x34295a)_0x34295a[_0x1970fa]+=_0x1f0de1[_0x1970fa];else _0x34295a[_0x1970fa]=_0x1f0de1[_0x1970fa];}DT_RefreshElement(_0x34295a[_0x541f4c(0x86)]);}function DT_NormalizeHit(_0x4dce9b,_0x252d39){const _0x1e39a9=_0x2c3519;if(_0x252d39===null)return;for(const _0x1d5586 in _0x252d39){if(typeof _0x252d39[_0x1d5586]===_0x1e39a9(0x8f)&&_0x252d39[_0x1d5586]<0x0&&_0x4dce9b[_0x1d5586]+_0x252d39[_0x1d5586]<0x0)_0x252d39[_0x1d5586]=-_0x4dce9b[_0x1d5586];}_0x1e39a9(0xfe)in _0x252d39&&(_0x252d39[_0x1e39a9(0xfe)]+_0x4dce9b[_0x1e39a9(0xfe)]>_0x4dce9b[_0x1e39a9(0xe0)]['Hits']&&(_0x252d39[_0x1e39a9(0xfe)]=_0x4dce9b[_0x1e39a9(0xe0)][_0x1e39a9(0xfe)]-_0x4dce9b[_0x1e39a9(0xfe)]),_0x252d39[_0x1e39a9(0xfe)]=Math[_0x1e39a9(0xf2)](_0x252d39[_0x1e39a9(0xfe)]));}function DT_ComputeUnitValue(_0x3fdbb6){const _0x253f1e=_0x2c3519;if(!DT_IsThereUnit(_0x3fdbb6))return 0x0;const _0x23a087=_0x3fdbb6['InitialState'];let _0x4d99fc=_0x23a087[_0x253f1e(0xfe)],_0x3ffab9=_0x23a087[_0x253f1e(0x87)],_0x3cef13=_0x23a087['Initiative'],_0x46dada=_0x253f1e(0xf7)in _0x23a087?_0x23a087[_0x253f1e(0xf7)]:0x0,_0x411b9f=_0x253f1e(0xbf)in _0x23a087?_0x23a087[_0x253f1e(0xbf)]:0x0,_0x1e8871=_0x253f1e(0x82)in _0x23a087?_0x23a087[_0x253f1e(0x82)]:0x0,_0x10c9f9=_0x253f1e(0xea)in _0x23a087?_0x23a087[_0x253f1e(0xea)]:0x0,_0x2a397e=_0x253f1e(0x79)in _0x23a087?_0x23a087[_0x253f1e(0x79)]:0x0,_0x438e9e=_0x253f1e(0x76)in _0x23a087?_0x23a087[_0x253f1e(0x76)]:0x0,_0x58b123=_0x253f1e(0x133)in _0x23a087?_0x23a087[_0x253f1e(0x133)]:0x0,_0x209c1e=_0x253f1e(0x106)in _0x23a087?_0x23a087[_0x253f1e(0x106)]:0x0;return _0x4d99fc*(0x1+(_0x46dada+_0x411b9f)/0x64+(_0x10c9f9+_0x1e8871+_0x2a397e)/0x12c)+(_0x438e9e+_0x58b123+_0x209c1e)*(0x2+_0x3cef13/0xa)*_0x3ffab9;}function DT_ComputeUnitsPriority(_0x5c7478,_0x367f74){const _0x66e2d9=_0x2c3519;let _0x48d05d=DT_Armies[_0x5c7478],_0x1d57fb=DT_Armies[_0x367f74],_0x56884d=DT_GetPossibleAttack(_0x5c7478,_0x367f74),_0x74d9cd={'priority':0x0,'attacktype':_0x56884d};if(_0x56884d===null)return _0x74d9cd;let _0x471b20=DT_IsPlayersUnit(_0x48d05d)?DT_PlayerForward[_0x66e2d9(0xc9)]():DT_EnemyForward[_0x66e2d9(0xc9)]();_0x471b20['splice'](DT_GetUnitNumberInLine(_0x5c7478),0x1);if(_0x56884d!==null&&_0x56884d!==_0x66e2d9(0x112)){_0x74d9cd[_0x66e2d9(0xcc)]=0x64,_0x74d9cd[_0x66e2d9(0x96)]=_0x56884d;let _0x25f90e=DT_ComputeUnitValue(_0x1d57fb);_0x74d9cd[_0x66e2d9(0xcc)]+=_0x25f90e;let _0x4477de=DT_CalculateHit(_0x48d05d,_0x1d57fb,_0x56884d);_0x4477de=DT_ApplyBonus(_0x66e2d9(0xb8),-_0x5c7478,_0x4477de,-_0x367f74,_0x56884d),_0x4477de=DT_ApplyBonus(_0x66e2d9(0xa8),-_0x5c7478,_0x4477de,-_0x367f74,_0x56884d),DT_NormalizeHit(_0x1d57fb,_0x4477de),_0x1d57fb[_0x66e2d9(0xfe)]+_0x4477de['Hits']===0x0&&(_0x74d9cd[_0x66e2d9(0xcc)]+=0x3e8),actual=_0x5e0e59=>_0x5e0e59 in _0x4477de?Math[_0x66e2d9(0xd6)](_0x4477de[_0x5e0e59]):0x0,_0x74d9cd[_0x66e2d9(0xcc)]+=(actual(_0x66e2d9(0xfe))+actual(_0x66e2d9(0xbf))/0x2+actual('DefenceBlow')/0x2+actual('AttackBlow')/0x2+actual(_0x66e2d9(0x133))/0x2)*(_0x25f90e/0xa)+actual('Manevres')*_0x25f90e+0x64*actual(_0x66e2d9(0xe1));}else{if(_0x56884d===_0x66e2d9(0x112)){if(_0x66e2d9(0x76)in _0x48d05d&&DT_IsRearPosition(_0x5c7478))_0x74d9cd['priority']+=DT_IsForwardPosition(_0x367f74)?0xc8:-0xc8;else(_0x66e2d9(0x133)in _0x48d05d||_0x66e2d9(0x106)in _0x48d05d)&&DT_IsForwardPosition(_0x5c7478)&&DT_AreThereOccupiedPosition(_0x471b20)&&(_0x74d9cd[_0x66e2d9(0xcc)]+=DT_IsRearPosition(_0x367f74)?0x320:-0x320);}}return _0x74d9cd;}function DT_GetUnitNumberInLine(_0x5e80e1){return _0x5e80e1<ARMY_SIZE?_0x5e80e1%DT_LineLength:DT_LineLength-0x1-_0x5e80e1%DT_LineLength;}function DT_PlaySFX(_0x588580,_0x56a6a9=_0x2c3519(0xa1)){const _0x156ea4=_0x2c3519;if(!(_0x588580 in DT_Resources[_0x156ea4(0xdf)][_0x56a6a9]))return;DT_Resources[_0x156ea4(0xdf)][_0x56a6a9][_0x588580][_0x156ea4(0x130)](),DT_Resources['sfx'][_0x56a6a9][_0x588580][_0x156ea4(0x113)]=0x0,DT_Resources[_0x156ea4(0xdf)][_0x56a6a9][_0x588580]['play']();}function _0x5f0f(){const _0x2000df=['Fist','Curse','AttackBlow','Nature','length','ProtectElemental','Loyal','48px,\x20contain,\x20','mediumseagreen','aliveunit','),\x20','3487710yvnSiw','height','.png','ProtectDeath','3614584gGDXTc','<br>','sfx/dtmove.wav','Position','Manevres','player','10PkgoqJ','floor','5908428AJvprM','classList','<span\x20style=\x22float:right;color:blue;\x22>','setProperty','number','target-move','Activate','üó°Ô∏è\x20','Bless','sfx/curseofdeath.wav','stats','attacktype','target','width','slot-','Start','ü™Ñ\x20','detail','Rogue','tPos','dispatchEvent','<span\x20style=\x22position:absolute;top:calc(100%\x20-\x202.4em);\x22>üí®\x20','Simple','url(','2348955JZoBKm','getBoundingClientRect','top','sfx/drain.wav','projectile','Defence','<span\x20style=\x22color:','sfx/strike.wav','innerHTML','<span\x20style=\x22position:absolute\x22>','--y','Protect','DiscordTimesJS/','remove','background-repeat','cursed','üõ°Ô∏è\x20','GlobalIndex','appendChild','card-front','sufferers','Attack','MagicDirection','black','39845sAwImp','cover','no-repeat','log','DefenceShot','sfx/heal.wav','src','descr','sfx/shot.wav','contextmenu',';\x22>','Bonus','img','üôè\x20','slice','style','key','priority','Pass','People','sfx/pick.wav','assign','aPos','push','target-bless','includes','addEventListener','abs','flipped','both','type','keyup','card','sfx/slide.wav','Button','Post','sfx','InitialState','Cursed','#FFD700','Heal','deadunit','ToAll','9TnbPjk','each\x20turn','Elemental','red','ProtectLife','forEach','right','removeEventListener','Shot','Life','14rJMEPz','%,\x20transparent\x200%),\x20url(','round','blue','333389SOJJgo','frequency','Pre','DefenceBlow','emoji','bottom','ToEnemy','Action','<span\x20style=\x22float:right;color:','emptyslot','Hits','sfx/unholybless.wav','add','sfx/whoosh.wav','108','Blessed','random','sfx/losetheme.mp3','MagicPower','left','Death','card-back','<br>&nbsp;<span\x20style=\x22text-align:right;font-size:1.3em;color:','skull.gif','üíÄ\x20','activeunit','Army\x20identificator\x20is\x20not\x20valid:\x20\x22','DeathMagic','108px','Magic','Move','currentTime','sfx/curse.wav','enemy','click','Curse\x20of\x20Death','Specify\x20a\x20parent\x20node\x20to\x20attach','div','background-image','each\x20move','The\x20DT_IsReachableFor\x20hasn\x27t\x20been\x20adapted\x20for\x20this\x20army\x20size','attacker','üèπ\x20','sfx/wintheme.mp3','dtgrid','Unholy\x20Bless','Name','sfx/bless.wav','Hit','Undead','</span>','setAttribute','Blow','--x','background-size','createElement','target-shot','Win','There\x20is\x20no\x20unit\x20with\x20the\x20name:\x20','Banish','pause','orange','Strike','AttackShot','icons','New\x20Turn','shift','string','object','ü•≤\x20','Initiative','crimson','The\x20army\x20is\x20at\x20capacity','pri','1522028tamIsg','sfx/fist.wav'];_0x5f0f=function(){return _0x2000df;};return _0x5f0f();}function DT_AnimationDeath(_0x4099a3){const _0x2abae2=_0x2c3519;DT_CSSCards[_0x4099a3][_0x2abae2(0xdb)][_0x2abae2(0x8c)][_0x2abae2(0x100)](_0x2abae2(0xe4)),setTimeout(function(){const _0x3ef03f=_0x2abae2;DT_CSSCards[_0x4099a3][_0x3ef03f(0xdb)][_0x3ef03f(0x8c)][_0x3ef03f(0xb0)](_0x3ef03f(0xe4));},0x1f4);}function DT_AnimationHit(_0x1f060e,_0x26f150,_0x26f534){const _0x52b596=_0x2c3519;let _0x21c724=1.5,_0x5f3597=new Image();const _0x26f57a=DT_CSSCards[_0x26f150][_0x52b596(0xc7)][_0x52b596(0xa4)](),_0x427bd9=DT_CSSCards[_0x1f060e][_0x52b596(0xc7)]['getBoundingClientRect'](),_0x1d044c=0x40,_0x45b7cb={'left':(_0x427bd9[_0x52b596(0x107)]+_0x427bd9[_0x52b596(0xec)]-_0x1d044c)/0x2,'top':(_0x427bd9[_0x52b596(0xa5)]+_0x427bd9[_0x52b596(0xf9)]-_0x1d044c)/0x2},_0x5d6276={'left':(_0x26f57a[_0x52b596(0x107)]+_0x26f57a[_0x52b596(0xec)]-_0x1d044c)/0x2,'top':(_0x26f57a['top']+_0x26f57a[_0x52b596(0xf9)]-_0x1d044c)/0x2};let _0x48f1bb=_0x5d6276['left']-_0x45b7cb[_0x52b596(0x107)],_0x377477=_0x5d6276[_0x52b596(0xa5)]-_0x45b7cb[_0x52b596(0xa5)];const _0x498982=Math['sqrt'](_0x48f1bb*_0x48f1bb+_0x377477*_0x377477);let _0x16ab0e=_0x498982/_0x21c724;return _0x5f3597[_0x52b596(0xc1)]=DT_Resources[_0x52b596(0xa7)][_0x52b596(0xc1)],_0x5f3597['style'][_0x52b596(0x107)]=_0x45b7cb[_0x52b596(0x107)]+'px',_0x5f3597[_0x52b596(0xca)][_0x52b596(0xa5)]=_0x45b7cb[_0x52b596(0xa5)]+'px',_0x5f3597[_0x52b596(0xca)][_0x52b596(0x8e)](_0x52b596(0x129),_0x48f1bb+'px'),_0x5f3597['style'][_0x52b596(0x8e)](_0x52b596(0xad),_0x377477+'px'),_0x5f3597['style'][_0x52b596(0x8e)]('--timeout',_0x16ab0e+'ms'),_0x5f3597['classList'][_0x52b596(0x100)](_0x52b596(0xa7)),DT_Parent[_0x52b596(0xb5)](_0x5f3597),DT_PlaySFX(_0x26f534,_0x52b596(0xf6)),setTimeout(()=>{const _0x49cfb6=_0x52b596;DT_PlaySFX(_0x26f534,_0x49cfb6(0xde)),_0x5f3597[_0x49cfb6(0xb0)]();},_0x16ab0e),_0x16ab0e;}function getCellsBetweenPoints(_0x2d3c69,_0x33c673){const _0x1e1495=_0x2c3519;var _0x2ac684=[],_0x400f75=_0x2d3c69['x'],_0x14f28f=_0x2d3c69['y'],_0x5ba810=_0x33c673['x'],_0x4cc69a=_0x33c673['y'],_0x510062=Math[_0x1e1495(0xd6)](_0x5ba810-_0x400f75),_0x52f5be=Math[_0x1e1495(0xd6)](_0x4cc69a-_0x14f28f),_0x2883c1=_0x400f75<_0x5ba810?0x1:-0x1,_0xcf20b7=_0x14f28f<_0x4cc69a?0x1:-0x1,_0x478564=_0x510062-_0x52f5be;_0x2ac684[_0x1e1495(0xd2)]({'y':_0x14f28f,'x':_0x400f75});while(!(_0x400f75===_0x5ba810&&_0x14f28f===_0x4cc69a)){var _0xa2f659=_0x478564<<0x1;_0xa2f659>-_0x52f5be&&(_0x478564-=_0x52f5be,_0x400f75+=_0x2883c1),_0xa2f659<_0x510062&&(_0x478564+=_0x510062,_0x14f28f+=_0xcf20b7),_0x2ac684['push']({'y':_0x14f28f,'x':_0x400f75});}return _0x2ac684;}function DT_IsBattleOver(){return DT_EnemyWon=!DT_AreThereOccupiedPosition(DT_PlayerForward)&&!DT_AreThereOccupiedPosition(DT_PlayerRear),DT_PlayerWon=!DT_AreThereOccupiedPosition(DT_EnemyForward)&&!DT_AreThereOccupiedPosition(DT_EnemyRear),DT_EnemyWon||DT_PlayerWon;}function DT_AIMove(){const _0x302f76=_0x2c3519;!DT_IsPlayersUnit(DT_ActiveUnit)&&(DT_AIPerformAction(),DT_ActiveUnit['Manevres']-=0x1,DT_RefreshElement(DT_ActiveUnit[_0x302f76(0x86)]));}function DT_AIPerformAction(){const _0x11b7e7=_0x2c3519;let _0x92d1f8=null;for(let _0x2d521f=0x0;_0x2d521f<DT_CSSCards[_0x11b7e7(0x78)];_0x2d521f++){pri=DT_ComputeUnitsPriority(DT_ActiveUnit[_0x11b7e7(0x86)],_0x2d521f),pri[_0x11b7e7(0x96)]!==null&&(_0x92d1f8===null||pri[_0x11b7e7(0xcc)]>_0x92d1f8[_0x11b7e7(0x71)])&&(_0x92d1f8={'pri':pri[_0x11b7e7(0xcc)],'tPos':_0x2d521f,'atype':pri[_0x11b7e7(0x96)]});}_0x92d1f8!==null?DT_CSSCards[_0x92d1f8[_0x11b7e7(0x9e)]][_0x11b7e7(0xdb)][_0x11b7e7(0x9f)](new CustomEvent(_0x11b7e7(0xfb),{'detail':{'type':_0x11b7e7(0x124),'attacker':DT_ActiveUnit,'target':DT_Armies[_0x92d1f8[_0x11b7e7(0x9e)]],'attacktype':_0x92d1f8['atype']}})):DT_CSSCards[DT_ActiveUnit[_0x11b7e7(0x86)]][_0x11b7e7(0xdb)][_0x11b7e7(0x9f)](new CustomEvent('Action',{'detail':{'type':_0x11b7e7(0xcd),'target':DT_ActiveUnit}}));}function findNextLowerInitiative(_0x4062fc){const _0x4eee0e=_0x2c3519;let _0x2926f7=null;for(const _0xa964b6 of DT_Armies){DT_IsUnitEngaged(_0xa964b6)&&_0xa964b6['Initiative']<=_0x4062fc&&(_0x2926f7===null||_0xa964b6[_0x4eee0e(0x6e)]>=_0x2926f7['Initiative'])&&(_0x2926f7=_0xa964b6);}return _0x2926f7;}function DT_ArePositionAllies(_0x46dac9,_0x9daa01){return _0x46dac9<ARMY_SIZE&&_0x9daa01<ARMY_SIZE||_0x46dac9>=ARMY_SIZE&&_0x9daa01>=ARMY_SIZE;}function DT_IsForwardPosition(_0x176ea9){const _0xeb3360=_0x2c3519;return DT_EnemyForward[_0xeb3360(0xd4)](_0x176ea9)||DT_PlayerForward['includes'](_0x176ea9);}function _0xd30a(_0x2d305a,_0x12bd23){const _0x5f0f6a=_0x5f0f();return _0xd30a=function(_0xd30ac,_0x5f5430){_0xd30ac=_0xd30ac-0x6e;let _0x2203e2=_0x5f0f6a[_0xd30ac];return _0x2203e2;},_0xd30a(_0x2d305a,_0x12bd23);}function DT_IsRearPosition(_0x24adef){const _0x3bab1a=_0x2c3519;return DT_EnemyRear[_0x3bab1a(0xd4)](_0x24adef)||DT_PlayerRear[_0x3bab1a(0xd4)](_0x24adef);}function DT_AreThereOccupiedPosition(_0x59eeb8){for(const _0x4b781a of _0x59eeb8){if(_0x4b781a!==null&&DT_IsThereUnit(DT_Armies[_0x4b781a]))return!![];}return![];}function DT_DoesMagicAffect(_0x4193eb,_0x20e3ac){const _0x1051a9=_0x2c3519;return DT_ArePositionAllies(_0x4193eb['Position'],_0x20e3ac['Position'])?(magictype=_0x4193eb[_0x1051a9(0x111)][_0x1051a9(0xc9)](0x0,-0x5),magictype===_0x1051a9(0x108)&&_0x20e3ac['Nature']===_0x1051a9(0x125)||magictype!==_0x1051a9(0x108)&&_0x20e3ac[_0x1051a9(0x77)]!==_0x1051a9(0x125)):!![];}function DT_IsThereUnit(_0x167827){const _0x496901=_0x2c3519;return _0x167827!==null&&_0x167827[_0x496901(0xfe)]>0x0;}function DT_IsPlayersUnit(_0x1e7138){const _0x21c1f8=_0x2c3519;return _0x1e7138[_0x21c1f8(0x86)]<ARMY_SIZE;}function DT_IsUnitEngaged(_0x290f34){const _0x1d7dfe=_0x2c3519;return _0x290f34!==null&&_0x290f34[_0x1d7dfe(0x87)]>0x0&&_0x290f34[_0x1d7dfe(0xfe)]>0x0;}function DT_GetPossibleAttack(_0x3d80b4,_0x55cab1){const _0x2c2729=_0x2c3519;a=DT_Armies[_0x3d80b4],t=DT_Armies[_0x55cab1];let _0x36c13e=null;if(DT_IsThereUnit(a)&&DT_IsThereUnit(t)&&typeof DT_CSSCards[_0x3d80b4]===_0x2c2729(0x138)){hitPath=DT_GetPossiblePath(_0x3d80b4,_0x55cab1);if(hitPath['length']===0x0)return null;let _0x3d8df4=DT_IsPlayersUnit(a)?DT_EnemyForward[_0x2c2729(0xc9)]():DT_PlayerForward['slice'](),_0x2e8f35=0x0;for(const _0xe95be1 of hitPath){if(DT_IsThereUnit(DT_Armies[_0xe95be1])&&!DT_ArePositionAllies(_0x3d80b4,_0xe95be1))_0x2e8f35++;}let _0x1be01f=DT_GetUnitNumberInLine(_0x3d80b4),_0x4dfb9c=_0x1be01f-0x1<0x0?null:_0x3d8df4[_0x1be01f-0x1],_0x29f487=_0x3d8df4[_0x1be01f],_0x5b3b02=_0x1be01f+0x1>=_0x3d8df4['length']?null:_0x3d8df4[_0x1be01f+0x1],_0x2273e5=DT_IsForwardPosition(_0x3d80b4)&&DT_AreThereOccupiedPosition([_0x4dfb9c,_0x29f487,_0x5b3b02]),_0x55c288=Math[_0x2c2729(0xd6)](_0x1be01f-DT_GetUnitNumberInLine(_0x55cab1))<0x2&&DT_IsForwardPosition(_0x55cab1)&&_0x2273e5;if(!DT_ArePositionAllies(_0x3d80b4,_0x55cab1)){if('AttackBlow'in a&&DT_IsForwardPosition(_0x3d80b4)){if(_0x55c288===!![])_0x36c13e=a['AttackBlow']>0xf?_0x2c2729(0x128):_0x2c2729(0x74);else!_0x2273e5&&DT_IsForwardPosition(_0x55cab1)&&_0x2e8f35<0x2&&(_0x36c13e=a['AttackBlow']>0xf?'Blow':_0x2c2729(0x74));}else{if(_0x2c2729(0x133)in a){if(DT_IsRearPosition(_0x3d80b4))_0x36c13e=a['GlobalIndex']===0x18||a[_0x2c2729(0xb4)]===0x19?'Strike':'Shot';else{if(_0x55c288===!![])_0x36c13e=a[_0x2c2729(0xb4)]===0x18||a[_0x2c2729(0xb4)]===0x19?_0x2c2729(0x132):_0x2c2729(0xee);else!_0x2273e5&&_0x2e8f35<0x2&&(_0x36c13e=a[_0x2c2729(0xb4)]===0x18||a[_0x2c2729(0xb4)]===0x19?_0x2c2729(0x132):_0x2c2729(0xee));}}else{if(!_0x2273e5&&_0x2c2729(0x106)in a&&(a[_0x2c2729(0xb9)]===_0x2c2729(0xfa)||a['MagicDirection']===_0x2c2729(0xe5))&&DT_DoesMagicAffect(a,t)){if(t[_0x2c2729(0xe1)]===!![])_0x36c13e='Draining\x20Life';else a[_0x2c2729(0x77)]===_0x2c2729(0x125)?_0x36c13e='Curse\x20of\x20Death':_0x36c13e=_0x2c2729(0x75);}}}}else{if(_0x2c2729(0x106)in a&&(a['MagicDirection']==='ToAlly'||a[_0x2c2729(0xb9)]==='ToAll')&&DT_DoesMagicAffect(a,t)){if(t[_0x2c2729(0xfe)]<t[_0x2c2729(0xe0)][_0x2c2729(0xfe)])_0x36c13e=_0x2c2729(0xe3);else t['Blessed']===![]&&(_0x36c13e=t['Nature']===_0x2c2729(0x125)?'Unholy\x20Bless':_0x2c2729(0x93));}}}else DT_IsThereUnit(a)&&DT_ArePositionAllies(_0x3d80b4,_0x55cab1)&&typeof DT_CSSCards[_0x3d80b4]===_0x2c2729(0x138)&&(_0x36c13e=_0x2c2729(0x112));return _0x36c13e;}function DT_GetPossiblePath(_0xeb7c3a,_0x5acf4a){const _0x4e7e68=_0x2c3519;table=[DT_EnemyRear,DT_EnemyForward,DT_PlayerForward,DT_PlayerRear];if(ARMY_SIZE!==0xc)return console[_0x4e7e68(0xbe)](_0x4e7e68(0x11c)),[];const _0x2c7f04={'aPos':{'x':null,'y':null},'tPos':{'x':null,'y':null}};for(let _0x37b13d=0x0;_0x37b13d<table[_0x4e7e68(0x78)];_0x37b13d++){for(let _0x2d5f62=0x0;_0x2d5f62<table[_0x37b13d][_0x4e7e68(0x78)];_0x2d5f62++){table[_0x37b13d][_0x2d5f62]===_0xeb7c3a&&(_0x2c7f04[_0x4e7e68(0xd1)]['x']=_0x2d5f62,_0x2c7f04['aPos']['y']=_0x37b13d),table[_0x37b13d][_0x2d5f62]===_0x5acf4a&&(_0x2c7f04[_0x4e7e68(0x9e)]['x']=_0x2d5f62,_0x2c7f04['tPos']['y']=_0x37b13d);}}let _0x177d63=[],_0x277fc7=getCellsBetweenPoints(_0x2c7f04[_0x4e7e68(0xd1)],_0x2c7f04[_0x4e7e68(0x9e)]);for(const _0x43b270 of _0x277fc7){_0x177d63[_0x4e7e68(0xd2)](table[_0x43b270['y']][_0x43b270['x']]);}return _0x177d63;}function DT_CallbackFlipCard(_0x398225){const _0x11a425=_0x2c3519;_0x398225['preventDefault']();if(!this[_0x11a425(0x8c)]['contains'](_0x11a425(0x10d)))this[_0x11a425(0x8c)]['toggle']('flipped');}function DT_CallbackAction(_0x41d747){const _0x3bc76c=_0x2c3519;let _0x43f7b9=_0x3bc76c(0x11d)in _0x41d747[_0x3bc76c(0x9c)]?_0x41d747[_0x3bc76c(0x9c)]['attacker']:null,_0x33d39a=_0x3bc76c(0x97)in _0x41d747[_0x3bc76c(0x9c)]?_0x41d747[_0x3bc76c(0x9c)][_0x3bc76c(0x97)]:null,_0x560acb=_0x33d39a===null?DT_GetElementID(this):_0x33d39a[_0x3bc76c(0x86)],_0x4ea35a=_0x41d747['detail'][_0x3bc76c(0x96)],_0xa08b2d=0x0,_0x4dfcb3=![],_0x2724f0=function(){};if(DT_IsBattleOver()){DT_BattleIsOver();return;}if(_0x41d747[_0x3bc76c(0x9c)][_0x3bc76c(0xd9)]===_0x3bc76c(0x91)){DT_GiveMoveTo(_0x33d39a),DT_LockCallback=![];if(!DT_IsPlayersUnit(DT_ActiveUnit))DT_AIMove();return;}if(_0x41d747[_0x3bc76c(0x9c)]['type']===_0x3bc76c(0x124)&&DT_IsThereUnit(_0x43f7b9))_0x2724f0=function(){const _0x164dc2=_0x3bc76c;_0x4ea35a===_0x164dc2(0x112)?DT_SwapUnits([_0x43f7b9[_0x164dc2(0x86)]],[_0x560acb],DT_Armies):(hit=DT_CalculateHit(_0x43f7b9,_0x33d39a,_0x4ea35a),hit=DT_ApplyBonus('Attack',_0x43f7b9['Position'],hit,_0x560acb,_0x4ea35a),hit=DT_ApplyBonus('Defence',_0x43f7b9[_0x164dc2(0x86)],hit,_0x560acb,_0x4ea35a),DT_AttachHit(_0x33d39a,hit));if(!DT_AreThereOccupiedPosition(DT_PlayerForward))DT_SwapUnits(DT_PlayerForward,DT_PlayerRear);else!DT_AreThereOccupiedPosition(DT_EnemyForward)&&DT_SwapUnits(DT_EnemyForward,DT_EnemyRear);},_0xa08b2d=DT_AnimationHit(_0x43f7b9[_0x3bc76c(0x86)],_0x560acb,_0x4ea35a);else{if(_0x41d747[_0x3bc76c(0x9c)][_0x3bc76c(0xd9)]==='New\x20Turn')_0x2724f0=function(){const _0x2dfd8e=_0x3bc76c;_0x4dfcb3=!![],TurnCounter++,DT_CheckStates(_0x2dfd8e(0xe7));for(const _0x1d7049 of DT_Armies){if(DT_IsThereUnit(_0x1d7049)){for(const _0x3f966d of DT_RestorableCharacteristics){if(_0x3f966d in _0x1d7049['InitialState'])_0x1d7049[_0x3f966d]=_0x1d7049[_0x2dfd8e(0xe0)][_0x3f966d];else delete _0x1d7049[_0x3f966d];}TurnCounter===0x1&&(hit=DT_ApplyBonus(_0x2dfd8e(0x9a),_0x1d7049[_0x2dfd8e(0x86)]),DT_AttachHit(_0x1d7049,hit)),TurnCounter>0x3&&'MagicPower'in _0x1d7049&&_0x1d7049[_0x2dfd8e(0x106)]>0xf&&(_0x1d7049[_0x2dfd8e(0x106)]=_0x1d7049[_0x2dfd8e(0x106)]-0x2<0xf?0xf:_0x1d7049['MagicPower']-0x2),DT_RefreshElement(_0x1d7049['Position']);}}};else{}}setTimeout(function(){const _0x13b868=_0x3bc76c;_0x2724f0(),DT_CheckStates(_0x13b868(0x11b));let _0x47698a=DT_ActiveUnit;(!DT_IsUnitEngaged(_0x47698a)||_0x4dfcb3)&&(_0x47698a=findNextLowerInitiative(Infinity)),_0x47698a!==null?DT_CSSCards[_0x47698a[_0x13b868(0x86)]][_0x13b868(0xdb)]['dispatchEvent'](new CustomEvent(_0x13b868(0xfb),{'detail':{'type':'Activate','target':_0x47698a}})):DT_CSSCards[0x0][_0x13b868(0xdb)][_0x13b868(0x9f)](new CustomEvent(_0x13b868(0xfb),{'detail':{'type':_0x13b868(0x135),'target':0x0}}));},_0xa08b2d);}function DT_Callback(){const _0x95c03f=_0x2c3519;if(DT_LockCallback===!![]||!DT_IsPlayersUnit(DT_ActiveUnit))return;let _0x1ac846=DT_GetElementID(this),_0x1abbc9=DT_Armies[_0x1ac846];attacktype=DT_GetPossibleAttack(DT_ActiveUnit[_0x95c03f(0x86)],_0x1ac846);if(attacktype!==null&&DT_ActiveUnit[_0x95c03f(0x87)]>0x0)DT_LockCallback=!![],DT_ActiveUnit['Manevres']-=0x1,DT_RefreshElement(DT_ActiveUnit[_0x95c03f(0x86)]),DT_CSSCards[_0x1ac846][_0x95c03f(0xdb)][_0x95c03f(0x9f)](new CustomEvent(_0x95c03f(0xfb),{'detail':{'type':'Hit','attacker':DT_ActiveUnit,'target':_0x1abbc9,'attacktype':attacktype}}));else DT_ActiveUnit===_0x1abbc9&&(DT_LockCallback=!![],DT_ActiveUnit['Manevres']-=0x1,DT_RefreshElement(DT_ActiveUnit[_0x95c03f(0x86)]),DT_CSSCards[DT_ActiveUnit['Position']][_0x95c03f(0xdb)]['dispatchEvent'](new CustomEvent(_0x95c03f(0xfb),{'detail':{'type':_0x95c03f(0xcd),'target':DT_ActiveUnit}})));}function DT_CallbackSpace(_0x1cc7d2){const _0x346a32=_0x2c3519;if(DT_LockCallback===!![]||!DT_IsPlayersUnit(DT_ActiveUnit))return;_0x1cc7d2[_0x346a32(0xcb)]==='\x20'&&(DT_LockCallback=!![],DT_ActiveUnit['Manevres']-=0x1,DT_RefreshElement(DT_ActiveUnit[_0x346a32(0x86)]),DT_CSSCards[DT_ActiveUnit[_0x346a32(0x86)]][_0x346a32(0xdb)][_0x346a32(0x9f)](new CustomEvent(_0x346a32(0xfb),{'detail':{'type':_0x346a32(0xcd),'target':DT_ActiveUnit}})));}function DT_CalculateHit(_0x4ed822,_0x20250b,_0x50a563){const _0x1e6bc7=_0x2c3519;gained={'Hits':0x0};let _0x293f41;switch(_0x50a563){case _0x1e6bc7(0x74):case _0x1e6bc7(0x128):def='DefenceBlow'in _0x20250b?_0x20250b[_0x1e6bc7(0xf7)]:0x0,dmg=_0x4ed822[_0x1e6bc7(0x76)]-def>0x0?_0x4ed822[_0x1e6bc7(0x76)]-def:0x1,gained[_0x1e6bc7(0xfe)]-=dmg;break;case _0x1e6bc7(0x132):case _0x1e6bc7(0xee):def=_0x1e6bc7(0xbf)in _0x20250b?_0x20250b[_0x1e6bc7(0xbf)]:0x0,dmg=_0x4ed822[_0x1e6bc7(0x133)]-def>0x0?_0x4ed822[_0x1e6bc7(0x133)]-def:0x1,gained[_0x1e6bc7(0xfe)]-=dmg;break;case _0x1e6bc7(0xe3):gained[_0x1e6bc7(0xfe)]+=_0x4ed822[_0x1e6bc7(0x106)];break;case'Curse\x20of\x20Death':case _0x1e6bc7(0x75):gained[_0x1e6bc7(0xe1)]=!![],_0x293f41=_0x4ed822['Magic'][_0x1e6bc7(0xc9)](0x0,-0x5),restype=_0x1e6bc7(0xae)+_0x293f41;let _0x5609f5=_0x4ed822[_0x1e6bc7(0x106)];restype in _0x20250b&&(_0x5609f5=Math[_0x1e6bc7(0xf2)](_0x4ed822[_0x1e6bc7(0x106)]*(0x1-_0x20250b[restype]/0x64)));defdown=Math[_0x1e6bc7(0xf2)](_0x5609f5*0.2);'DefenceBlow'in _0x20250b&&(gained['DefenceBlow']=-defdown);_0x1e6bc7(0xbf)in _0x20250b&&(gained[_0x1e6bc7(0xbf)]=-defdown);attdown=Math['round'](_0x5609f5*0.1);_0x1e6bc7(0x76)in _0x20250b&&(gained[_0x1e6bc7(0x76)]=-attdown);_0x1e6bc7(0x133)in _0x20250b&&(gained['AttackShot']=-attdown);_0x293f41===_0x1e6bc7(0xe8)&&(gained['Manevres']=_0x5609f5>=0x32?-0x2:_0x5609f5>=0x19?-0x1:0x0,gained['Initiative']=-Math[_0x1e6bc7(0xf2)](_0x5609f5/0xa));break;case'Unholy\x20Bless':case _0x1e6bc7(0x93):gained[_0x1e6bc7(0x103)]=!![],defup=Math[_0x1e6bc7(0xf2)](_0x4ed822['MagicPower']*0.34),gained[_0x1e6bc7(0xf7)]=defup,gained[_0x1e6bc7(0xbf)]=defup,attup=Math['round'](_0x4ed822[_0x1e6bc7(0x106)]*0.2);_0x1e6bc7(0x76)in _0x20250b&&(gained[_0x1e6bc7(0x76)]=attup);_0x1e6bc7(0x133)in _0x20250b&&(gained['AttackShot']=attup);break;case'Draining\x20Life':let _0x20c637=0x1;_0x293f41=_0x4ed822[_0x1e6bc7(0x111)][_0x1e6bc7(0xc9)](0x0,-0x5),restype=_0x1e6bc7(0xae)+_0x293f41;restype in _0x20250b&&(_0x20c637-=_0x20250b[restype]/0x64);let _0x475658=0x1;_0x20250b['Nature']===_0x1e6bc7(0x125)&&_0x293f41===_0x1e6bc7(0xef)&&(_0x475658=0x2);gained[_0x1e6bc7(0xfe)]=-(_0x4ed822[_0x1e6bc7(0x106)]*_0x20c637*_0x475658);break;case _0x1e6bc7(0x12f):gained['Hits']=-_0x20250b[_0x1e6bc7(0xfe)];break;default:break;}return gained;}function DT_CheckStates(_0x4a10d8){const _0x389c05=_0x2c3519;for(const _0x45db91 in DT_ActiveStates){if(DT_ActiveStates[_0x45db91][_0x389c05(0xf5)]===_0x4a10d8)for(const _0x26142b of DT_ActiveStates[_0x45db91]['sufferers']){DT_ActiveStates[_0x45db91]['f'](_0x26142b),DT_RefreshElement(_0x26142b['Position']);}}}function DT_SwapUnits(_0x4da240,_0x3e3437,_0x12a9f7=![]){const _0x26de6c=_0x2c3519;_0x4da240[_0x26de6c(0x78)]!==_0x3e3437[_0x26de6c(0x78)]&&console[_0x26de6c(0xbe)]('Not\x20equal\x20groups\x20of\x20units\x20are\x20being\x20swaped!');for(let _0x3b5e12=0x0;_0x3b5e12<_0x4da240[_0x26de6c(0x78)];_0x3b5e12++){let _0x4a110c=_0x3e3437[_0x3b5e12],_0x56d971=_0x4da240[_0x3b5e12],_0x1ba4d4=DT_Armies[_0x4a110c];DT_Armies[_0x4a110c]=DT_Armies[_0x56d971],DT_Armies[_0x56d971]=_0x1ba4d4,DT_Armies[_0x4a110c]!==null&&(DT_Armies[_0x4a110c][_0x26de6c(0x86)]=_0x4a110c,_0x12a9f7===!![]&&(DT_Armies[_0x4a110c][_0x26de6c(0xe0)][_0x26de6c(0x86)]=_0x4a110c)),DT_Armies[_0x56d971]!==null&&(DT_Armies[_0x56d971][_0x26de6c(0x86)]=_0x56d971,_0x12a9f7===!![]&&(DT_Armies[_0x56d971][_0x26de6c(0xe0)][_0x26de6c(0x86)]=_0x56d971)),DT_RefreshElement(_0x56d971),DT_RefreshElement(_0x4a110c);}}function DT_GiveMoveTo(_0x255a0d){const _0x394b8f=_0x2c3519;DT_ActiveUnit=_0x255a0d;const _0x20f882={'Fist':'target-shot','Blow':_0x394b8f(0x12c),'Shot':_0x394b8f(0x12c),'Curse':_0x394b8f(0x12c),'Curse\x20of\x20Death':'target-shot','Draining\x20Life':_0x394b8f(0x12c),'Strike':_0x394b8f(0x12c),'Heal':_0x394b8f(0xd3),'Unholy\x20Bless':_0x394b8f(0xd3),'Bless':_0x394b8f(0xd3),'Move':'target-move'};for(let _0x1be26f=0x0;_0x1be26f<DT_CSSCards['length'];_0x1be26f++){attacktype=DT_GetPossibleAttack(DT_ActiveUnit['Position'],_0x1be26f);let _0xc09b12=DT_CSSCards[_0x1be26f][_0x394b8f(0xdb)][_0x394b8f(0x8c)];_0xc09b12['remove'](_0x394b8f(0x12c),_0x394b8f(0xd3),_0x394b8f(0x90),_0x394b8f(0x10d)),attacktype!==null&&DT_IsPlayersUnit(DT_ActiveUnit)&&_0xc09b12[_0x394b8f(0x100)](_0x20f882[attacktype]);}DT_CSSCards[DT_ActiveUnit[_0x394b8f(0x86)]][_0x394b8f(0xdb)][_0x394b8f(0x8c)][_0x394b8f(0xb0)](_0x394b8f(0xd7)),DT_CSSCards[DT_ActiveUnit[_0x394b8f(0x86)]]['card'][_0x394b8f(0x8c)][_0x394b8f(0x100)](_0x394b8f(0x10d));}function DT_BattleIsOver(){const _0x1a29d1=_0x2c3519;if(DT_BattleIsOverCalled===!![])return;DT_BattleIsOverCalled=!![];if(DT_PlayerWon===!![])DT_PlaySFX(_0x1a29d1(0x12d));else DT_PlaySFX('Lose');for(const _0x129ef4 of DT_CSSCards){_0x129ef4['card'][_0x1a29d1(0x8c)][_0x1a29d1(0xb0)](_0x1a29d1(0x10d));}DT_DeleteListeners();}function DT_RemoveUnit(_0x554163){const _0xfc027d=_0x2c3519;_0x554163!==null&&(DT_Armies[_0x554163[_0xfc027d(0x86)]]=null);}function DT_AddUnit(_0x20870a,_0x1c7818){const _0x56a64f=_0x2c3519;if(!(_0x1c7818 in DT_Units))return console[_0x56a64f(0xbe)](_0x56a64f(0x12e)+_0x1c7818),null;let _0x249c6a=[];if(_0x20870a==='player')_0x249c6a=[...DT_PlayerForward,...DT_PlayerRear];else{if(_0x20870a==='enemy')_0x249c6a=[...DT_EnemyForward,...DT_EnemyRear];else return console[_0x56a64f(0xbe)](_0x56a64f(0x10e)+_0x20870a+'\x22'),null;}for(const _0x1259c9 of _0x249c6a){if(!DT_Armies[_0x1259c9])return DT_Armies[_0x1259c9]=Object[_0x56a64f(0xd0)]({},DT_Units[_0x1c7818]),DT_Armies[_0x1259c9][_0x56a64f(0x103)]=![],DT_Armies[_0x1259c9][_0x56a64f(0xe1)]=![],DT_Armies[_0x1259c9][_0x56a64f(0x86)]=_0x1259c9,!(_0x56a64f(0x77)in DT_Armies[_0x1259c9])&&(DT_Armies[_0x1259c9][_0x56a64f(0x77)]='Loyal'),DT_ArmiesInitialState[_0x1259c9]=Object[_0x56a64f(0xd0)]({},DT_Armies[_0x1259c9]),DT_Armies[_0x1259c9][_0x56a64f(0xe0)]=DT_ArmiesInitialState[_0x1259c9],_0x1259c9;}return console[_0x56a64f(0xbe)](_0x56a64f(0x70)),null;}function DT_ResurrectArmy(_0x4b46e4){const _0x5a1cdc=_0x2c3519;let _0x10de3f=_0x4b46e4===_0x5a1cdc(0x88)?[...DT_PlayerForward,...DT_PlayerRear]:[...DT_EnemyForward,...DT_EnemyRear];for(const _0x457749 of _0x10de3f){DT_Armies[_0x457749]!==null&&(uinit=DT_Armies[_0x457749]['InitialState'],DT_Armies[_0x457749]=Object['assign']({},uinit),DT_Armies[_0x457749][_0x5a1cdc(0xe0)]=uinit);}for(const _0x3bd1de of _0x10de3f){DT_Armies[_0x3bd1de]!==null&&(initpos=DT_Armies[_0x3bd1de][_0x5a1cdc(0xe0)][_0x5a1cdc(0x86)],_0x3bd1de!==initpos&&DT_SwapUnits([_0x3bd1de],[initpos]));}}function DT_CreateArmy(_0x17216d,_0x102a3d){const _0xcd8572=_0x2c3519;let _0x477e0b=_0x17216d==='player'?[...DT_PlayerForward,...DT_PlayerRear]:[...DT_EnemyForward,...DT_EnemyRear];for(const _0x3f5e49 of _0x477e0b){naming=_0x102a3d[_0xcd8572(0x136)]();if(!(naming in DT_Units)){DT_Armies[_0x3f5e49]=null;continue;}DT_Armies[_0x3f5e49]=Object['assign']({},DT_Units[naming]),DT_Armies[_0x3f5e49][_0xcd8572(0x103)]=![],DT_Armies[_0x3f5e49][_0xcd8572(0xe1)]=![],DT_Armies[_0x3f5e49]['Position']=_0x3f5e49,!(_0xcd8572(0x77)in DT_Armies[_0x3f5e49])&&(DT_Armies[_0x3f5e49][_0xcd8572(0x77)]=_0xcd8572(0x7a)),DT_ArmiesInitialState[_0x3f5e49]=Object['assign']({},DT_Armies[_0x3f5e49]),DT_Armies[_0x3f5e49][_0xcd8572(0xe0)]=DT_ArmiesInitialState[_0x3f5e49];}}function DT_SetUpRelics(_0x121b80,_0xbecbb){const _0x560120=_0x2c3519;if(_0x121b80===_0x560120(0x88))for(let _0x9f6823=0x0;_0x9f6823<ARMY_SIZE;_0x9f6823++){typeof _0xbecbb[_0x9f6823]===_0x560120(0x137)?DT_RelicsInUse[_0x9f6823]=Object['assign']({},DT_Relics[_0xbecbb[_0x9f6823]]):DT_RelicsInUse[_0x9f6823]=0x0;}else{if(_0x121b80===_0x560120(0x115))for(let _0x40cea2=ARMY_SIZE;_0x40cea2<ARMY_SIZE*0x2;_0x40cea2++){typeof _0xbecbb[_0x40cea2-ARMY_SIZE]===_0x560120(0x137)?DT_RelicsInUse[_0x40cea2]=Object[_0x560120(0xd0)]({},DT_Relics[_0xbecbb[_0x40cea2-ARMY_SIZE]]):DT_RelicsInUse[_0x40cea2]=0x0;}}for(let _0x498e2f=0x0;_0x498e2f<DT_CSSCards[_0x560120(0x78)];++_0x498e2f){}}function DT_CreateElements(){const _0x342696=_0x2c3519;function _0x307281(_0x3aa90b){const _0x4af149=_0xd30a;img=document[_0x4af149(0x12b)]('img'),img[_0x4af149(0x8c)][_0x4af149(0x100)]('icon'),stats=document[_0x4af149(0x12b)](_0x4af149(0x119)),stats[_0x4af149(0x8c)][_0x4af149(0x100)]('stats'),descr=document['createElement'](_0x4af149(0x119)),descr[_0x4af149(0x8c)][_0x4af149(0x100)]('descr');let _0x505981=document[_0x4af149(0x12b)]('div'),_0x471f2e=document[_0x4af149(0x12b)](_0x4af149(0x119));_0x471f2e[_0x4af149(0x8c)][_0x4af149(0x100)](_0x4af149(0xb6));let _0xb8a518=document[_0x4af149(0x12b)](_0x4af149(0x119));return _0xb8a518[_0x4af149(0x8c)][_0x4af149(0x100)](_0x4af149(0x109)),_0x471f2e[_0x4af149(0xb5)](img),_0x471f2e[_0x4af149(0xb5)](stats),_0xb8a518[_0x4af149(0xb5)](descr),_0x505981[_0x4af149(0xb5)](_0x471f2e),_0x505981[_0x4af149(0xb5)](_0xb8a518),_0x505981[_0x4af149(0x127)]('id',_0x4af149(0x99)+_0x3aa90b),_0x505981[_0x4af149(0x8c)][_0x4af149(0x100)]('card'),{'card':_0x505981,'img':img,'stats':stats,'descr':descr};}grid=document['createElement'](_0x342696(0x119)),grid[_0x342696(0x8c)][_0x342696(0x100)](_0x342696(0x120)),orderedArmy=[...DT_EnemyRear,...DT_EnemyForward,...DT_PlayerForward,...DT_PlayerRear];for(let _0x518a21=0x0;_0x518a21<ARMY_SIZE*0x2;_0x518a21++){cw=_0x307281(orderedArmy[_0x518a21]),grid[_0x342696(0xb5)](cw[_0x342696(0xdb)]),DT_CSSCards[orderedArmy[_0x518a21]]=cw,DT_RefreshElement(orderedArmy[_0x518a21]);}DT_Grid=grid,DT_Parent[_0x342696(0xb5)](grid);}function DT_AddListeners(){const _0x14526d=_0x2c3519;DT_Parent[_0x14526d(0xd5)](_0x14526d(0xda),DT_CallbackSpace),DT_CSSCards[_0x14526d(0xeb)](_0x5eac12=>{const _0x33d522=_0x14526d;_0x5eac12['card'][_0x33d522(0xd5)]('click',DT_Callback),_0x5eac12[_0x33d522(0xdb)][_0x33d522(0xd5)](_0x33d522(0xfb),DT_CallbackAction),_0x5eac12[_0x33d522(0xdb)][_0x33d522(0xd5)](_0x33d522(0xc4),DT_CallbackFlipCard);});}function DT_DeleteListeners(){const _0x1d34be=_0x2c3519;DT_Parent!==null&&DT_Parent[_0x1d34be(0xed)](_0x1d34be(0xda),DT_CallbackSpace),DT_CSSCards['forEach'](_0x12382d=>{const _0x3b5d5d=_0x1d34be;_0x12382d['card'][_0x3b5d5d(0xed)](_0x3b5d5d(0x116),DT_Callback),_0x12382d[_0x3b5d5d(0xdb)][_0x3b5d5d(0xed)]('Action',DT_CallbackAction),_0x12382d[_0x3b5d5d(0xdb)][_0x3b5d5d(0xed)](_0x3b5d5d(0xc4),DT_CallbackFlipCard);});}function DT_RefreshElement(_0x2b9f35){const _0x2a6c78=_0x2c3519;cardwr=DT_CSSCards[_0x2b9f35],u=DT_Armies[_0x2b9f35];let _0x420183=null;if(typeof cardwr===_0x2a6c78(0x138))_0x420183=cardwr[_0x2a6c78(0xdb)][_0x2a6c78(0x8c)];else return;if(DT_IsThereUnit(u))_0x420183[_0x2a6c78(0x100)](_0x2a6c78(0x7d)),_0x420183['remove'](_0x2a6c78(0xfd));else{_0x420183[_0x2a6c78(0xb0)](_0x2a6c78(0x7d)),_0x420183[_0x2a6c78(0x100)]('emptyslot'),cardwr['img'][_0x2a6c78(0xca)][_0x2a6c78(0x98)]=DT_ImgWidthPx,cardwr[_0x2a6c78(0xc7)][_0x2a6c78(0xca)][_0x2a6c78(0x80)]=DT_ImgHeightPx;return;}let _0x36ccc4=u['Nature']===_0x2a6c78(0x9d)?_0x2a6c78(0x7c):u['Nature']===_0x2a6c78(0x125)?_0x2a6c78(0x6f):u[_0x2a6c78(0x77)]===_0x2a6c78(0xce)?'dimgrey':'steelblue';cardwr[_0x2a6c78(0xc2)][_0x2a6c78(0xab)]=_0x2a6c78(0x10a)+_0x36ccc4+';\x22>'+u[_0x2a6c78(0x122)]+'</span><br>';_0x2a6c78(0xea)in u&&(cardwr['descr']['innerHTML']+=_0x2a6c78(0x84),cardwr[_0x2a6c78(0xc2)][_0x2a6c78(0xab)]+=_0x2a6c78(0xc8)+u[_0x2a6c78(0xea)]+'%');_0x2a6c78(0x82)in u&&(cardwr[_0x2a6c78(0xc2)][_0x2a6c78(0xab)]+='<br>',cardwr['descr'][_0x2a6c78(0xab)]+=_0x2a6c78(0x10c)+u[_0x2a6c78(0x82)]+'%');_0x2a6c78(0x79)in u&&(cardwr['descr'][_0x2a6c78(0xab)]+=_0x2a6c78(0x84),cardwr[_0x2a6c78(0xc2)][_0x2a6c78(0xab)]+=_0x2a6c78(0x9b)+u[_0x2a6c78(0x79)]+'%');cardwr[_0x2a6c78(0xc2)][_0x2a6c78(0xab)]+=_0x2a6c78(0x84),cardwr[_0x2a6c78(0xc2)][_0x2a6c78(0xab)]+=_0x2a6c78(0xa0)+u[_0x2a6c78(0x6e)]+_0x2a6c78(0x126);_0x2a6c78(0xc6)in u&&(emoji=u[_0x2a6c78(0xc6)]in DT_BonusEmojis?DT_BonusEmojis[u[_0x2a6c78(0xc6)]]:'‚ùì',cardwr[_0x2a6c78(0xc2)][_0x2a6c78(0xab)]+='<span\x20style=\x22position:absolute;top:calc(100%\x20-\x202.4em);left:\x20calc(100%\x20-\x202.4em);\x22>'+emoji+_0x2a6c78(0x126));let _0x4ee162=DT_Resources[_0x2a6c78(0x134)][u[_0x2a6c78(0xb4)]][_0x2a6c78(0xc1)],_0x17b0de=Math[_0x2a6c78(0xf2)]((u[_0x2a6c78(0xe0)][_0x2a6c78(0xfe)]-u[_0x2a6c78(0xfe)])*0x64/u[_0x2a6c78(0xe0)][_0x2a6c78(0xfe)]);const _0x26c498=_0x17b0de<0x1e?'green':_0x17b0de<0x32?_0x2a6c78(0xe2):_0x17b0de<0x4b?_0x2a6c78(0x131):_0x2a6c78(0xe9);let _0x3c9795=![],_0x5e7ff4=_0x2a6c78(0xba),_0x327c98='0';if(_0x2a6c78(0x76)in u)_0x5e7ff4=u[_0x2a6c78(0x76)]>u[_0x2a6c78(0xe0)][_0x2a6c78(0x76)]?_0x2a6c78(0xf3):_0x2a6c78(0xba),_0x327c98=u[_0x2a6c78(0x76)];else{if(_0x2a6c78(0x133)in u)_0x5e7ff4=u[_0x2a6c78(0x133)]>u['InitialState'][_0x2a6c78(0x133)]?_0x2a6c78(0xf3):_0x2a6c78(0xba),_0x327c98=u[_0x2a6c78(0x133)];else'MagicPower'in u&&(_0x3c9795=!![]);}let _0x3221ae=_0x2a6c78(0xba),_0x247aa0='0';_0x2a6c78(0xf7)in u&&(initialDef=_0x2a6c78(0xf7)in u[_0x2a6c78(0xe0)]?u['InitialState'][_0x2a6c78(0xf7)]:0x0,_0x3221ae=u['DefenceBlow']>initialDef?'blue':_0x2a6c78(0xba),_0x247aa0=u[_0x2a6c78(0xf7)]);let _0x1c4b92=_0x2a6c78(0xba),_0x1d6ab7='0';'DefenceShot'in u&&(initialDef=_0x2a6c78(0xbf)in u[_0x2a6c78(0xe0)]?u['InitialState'][_0x2a6c78(0xbf)]:0x0,_0x1c4b92=u[_0x2a6c78(0xbf)]>initialDef?_0x2a6c78(0xf3):_0x2a6c78(0xba),_0x1d6ab7=u[_0x2a6c78(0xbf)]);if(_0x3c9795)cardwr['stats'][_0x2a6c78(0xab)]=(u['Magic']===_0x2a6c78(0x10f)?'üíÄ':u[_0x2a6c78(0x111)]==='LifeMagic'?'üôè':'ü™Ñ')+'\x20'+u['MagicPower'];else{if(_0x2a6c78(0x76)in u)cardwr[_0x2a6c78(0x95)][_0x2a6c78(0xab)]=_0x2a6c78(0x92)+('<span\x20style=\x22color:'+_0x5e7ff4+_0x2a6c78(0xc5)+_0x327c98+_0x2a6c78(0x126));else'AttackShot'in u?cardwr[_0x2a6c78(0x95)][_0x2a6c78(0xab)]=_0x2a6c78(0x11e)+('<span\x20style=\x22color:'+_0x5e7ff4+_0x2a6c78(0xc5)+_0x327c98+_0x2a6c78(0x126)):cardwr[_0x2a6c78(0x95)][_0x2a6c78(0xab)]=_0x2a6c78(0x139);}for(const _0x4f3d67 in DT_ActiveStates){DT_ActiveStates[_0x4f3d67][_0x2a6c78(0xb7)][_0x2a6c78(0xd4)](u)&&(cardwr[_0x2a6c78(0x95)]['innerHTML']+=_0x2a6c78(0xac)+DT_ActiveStates[_0x4f3d67][_0x2a6c78(0xf8)]+_0x2a6c78(0x126));}cardwr[_0x2a6c78(0x95)][_0x2a6c78(0xab)]+='&nbsp;',cardwr[_0x2a6c78(0x95)]['innerHTML']+=_0x2a6c78(0xfc)+_0x26c498+';\x22>'+u['Hits']+'/'+u[_0x2a6c78(0xe0)][_0x2a6c78(0xfe)]+_0x2a6c78(0x126),cardwr[_0x2a6c78(0x95)][_0x2a6c78(0xab)]+=_0x2a6c78(0x84),cardwr['stats'][_0x2a6c78(0xab)]+=_0x2a6c78(0xb3)+(_0x2a6c78(0xa9)+_0x3221ae+_0x2a6c78(0xc5)+_0x247aa0+_0x2a6c78(0x126))+'/'+(_0x2a6c78(0xa9)+_0x1c4b92+';\x22>'+_0x1d6ab7+_0x2a6c78(0x126)),cardwr[_0x2a6c78(0x95)]['innerHTML']+='&nbsp;',cardwr['stats'][_0x2a6c78(0xab)]+=_0x2a6c78(0x8d)+u[_0x2a6c78(0x87)]+_0x2a6c78(0x126),cardwr[_0x2a6c78(0xc7)][_0x2a6c78(0xca)][_0x2a6c78(0x98)]=DT_ImgWidthPx,cardwr[_0x2a6c78(0xc7)]['style'][_0x2a6c78(0x80)]=DT_ImgHeightPx,cardwr[_0x2a6c78(0xc7)][_0x2a6c78(0xca)][_0x2a6c78(0x8e)](_0x2a6c78(0xb1),_0x2a6c78(0xbd));let _0x1461ef='',_0x4adc18='';u[_0x2a6c78(0xe1)]===!![]&&(_0x1461ef=_0x2a6c78(0xa2)+DT_Resources[_0x2a6c78(0xb2)][_0x2a6c78(0xc1)]+_0x2a6c78(0x7e),_0x4adc18=_0x2a6c78(0x7b)),cardwr[_0x2a6c78(0xc7)][_0x2a6c78(0xca)][_0x2a6c78(0x8e)](_0x2a6c78(0x12a),_0x4adc18+_0x2a6c78(0xbc)),cardwr[_0x2a6c78(0xc7)]['style'][_0x2a6c78(0x8e)](_0x2a6c78(0x11a),_0x1461ef+('linear-gradient(to\x20top,\x20var(--bloodcoloralpha)\x20'+_0x17b0de+_0x2a6c78(0xf1)+_0x4ee162+')'));}function DT_UploadResources(){DT_UploadImages(),DT_UploadSounds();}function DT_UploadImages(){const _0x45cdf5=_0x2c3519;for(const _0xac27ba in DT_Units){let _0x20f979=new Image();_0x20f979[_0x45cdf5(0xc1)]=BASE_PATH+'icons/img_'+(DT_Units[_0xac27ba][_0x45cdf5(0xb4)]-0x1)+_0x45cdf5(0x81),DT_Resources[_0x45cdf5(0x134)][DT_Units[_0xac27ba][_0x45cdf5(0xb4)]]=_0x20f979;}let _0x231442=new Image();_0x231442['src']=BASE_PATH+'projectile.png',DT_Resources[_0x45cdf5(0xa7)]=_0x231442;let _0x527e06=new Image();_0x527e06[_0x45cdf5(0xc1)]=BASE_PATH+_0x45cdf5(0x10b),DT_Resources[_0x45cdf5(0xb2)]=_0x527e06;}function DT_UploadSounds(){const _0x380c40=_0x2c3519;function _0x2b855c(_0xd87d19,_0x5ca0a1,_0x1f6e7c=_0x380c40(0xa1)){const _0x35d067=_0x380c40;if(!(_0x5ca0a1 in DT_Resources['sfx'][_0x1f6e7c])){let _0x486f74=new Audio(BASE_PATH+_0xd87d19);DT_Resources[_0x35d067(0xdf)][_0x1f6e7c][_0x5ca0a1]=_0x486f74;}}_0x2b855c(_0x380c40(0x73),_0x380c40(0x74),_0x380c40(0xde)),_0x2b855c(_0x380c40(0x101),_0x380c40(0x74),_0x380c40(0xf6)),_0x2b855c('sfx/swordblow.wav',_0x380c40(0x128),_0x380c40(0xde)),_0x2b855c(_0x380c40(0x101),_0x380c40(0x128),_0x380c40(0xf6)),_0x2b855c(_0x380c40(0x114),_0x380c40(0x75),_0x380c40(0xde)),_0x2b855c(_0x380c40(0x94),_0x380c40(0x117),_0x380c40(0xde)),_0x2b855c(_0x380c40(0xa6),'Draining\x20Life','Post'),_0x2b855c('sfx/shothit.wav',_0x380c40(0xee),'Post'),_0x2b855c(_0x380c40(0xc3),_0x380c40(0xee),_0x380c40(0xf6)),_0x2b855c(_0x380c40(0xc0),_0x380c40(0xe3),'Post'),_0x2b855c(_0x380c40(0x123),'Bless','Post'),_0x2b855c(_0x380c40(0xaa),_0x380c40(0x132),_0x380c40(0xde)),_0x2b855c(_0x380c40(0x85),'Move','Post'),_0x2b855c('sfx/curseofdeath.wav',_0x380c40(0x12f),_0x380c40(0xde)),_0x2b855c(_0x380c40(0xff),_0x380c40(0x121),_0x380c40(0xde)),_0x2b855c(_0x380c40(0x11f),_0x380c40(0x12d)),_0x2b855c(_0x380c40(0x105),'Lose'),_0x2b855c('sfx/button.wav',_0x380c40(0xdd)),_0x2b855c(_0x380c40(0xcf),'Pick'),_0x2b855c(_0x380c40(0xdc),'Slide');}function DT_ClearArmies(_0x55516c=_0x2c3519(0xd8)){const _0x3d691c=_0x2c3519;if(_0x55516c!==_0x3d691c(0xd8)){let _0x5488d3=_0x55516c==='player'?[...DT_PlayerForward,...DT_PlayerRear]:[...DT_EnemyForward,...DT_EnemyRear];for(const _0x186815 of _0x5488d3){DT_RemoveUnit(DT_Armies[_0x186815]);}}else DT_Armies=[],DT_ArmiesInitialState=[],DT_RelicsInUse=[];}function DT_ClearElements(){const _0x3fc7f5=_0x2c3519;DT_DeleteListeners();for(const _0x36083d of DT_CSSCards){_0x36083d[_0x3fc7f5(0xdb)]['remove']();}DT_CSSCards=[];if(DT_Grid!==null)DT_Grid[_0x3fc7f5(0xb0)]();DT_Grid=null;}function DT_StartTheBattle(){const _0x439c91=_0x2c3519;if(DT_Parent===null){console['log'](_0x439c91(0x118));return;}else DT_Units===null&&console[_0x439c91(0xbe)]('Resources\x20haven\x27t\x20been\x20uploaded,\x20make\x20sure\x20you\x20called\x20the\x20function\x20DT_UploadResources()');DT_PlayerWon=![],DT_EnemyWon=![],DT_BattleIsOverCalled=![],TurnCounter=0x0,DT_ClearElements(),DT_CreateElements(),DT_AddListeners(),DT_CSSCards[0x0][_0x439c91(0xdb)][_0x439c91(0x9f)](new CustomEvent('Action',{'detail':{'type':_0x439c91(0x135),'target':0x0}}));}